import"./assets/main-DbSZpuML.js";import{s as Re,d as He,e as We,i as je,f as ze,h as Be}from"./assets/practice-CGigKf5_.js";import{l as ie,a as De,b as se}from"./assets/custom-lessons-store-ClPKfKWc.js";import{c as he}from"./assets/custom-lesson-presets-BlE7b2P4.js";import{a as fe}from"./assets/auth-CUcfS-ao.js";import"./assets/vendor-CWxt7QI6.js";const le={"greetings-farewells":[{word:"Hello",translation:"Привіт",example:"Hello, nice to meet you!"},{word:"Hi",translation:"Привіт (неформально)",example:"Hi, are you ready for class?"},{word:"Good morning",translation:"Доброго ранку",example:"Good morning, Mrs Smith."},{word:"Good afternoon",translation:"Доброго дня",example:"Good afternoon, everyone."},{word:"Good evening",translation:"Доброго вечора",example:"Good evening, how was your day?"},{word:"Nice to meet you",translation:"Приємно познайомитися",example:"Nice to meet you, I'm Tom."},{word:"How are you?",translation:"Як справи?",example:"Hi, Anna! How are you?"},{word:"I'm fine, thanks",translation:"У мене все добре, дякую",example:"I'm fine, thanks. And you?"},{word:"See you later",translation:"Побачимось пізніше",example:"I have to go now. See you later!"},{word:"See you soon",translation:"До скорої зустрічі",example:"Thanks for your help. See you soon."},{word:"Goodbye",translation:"До побачення",example:"Goodbye, have a nice evening!"},{word:"Bye",translation:"Бувай",example:"Bye, talk to you tomorrow!"},{word:"Take care",translation:"Бережи себе",example:"I'm heading home now. Take care!"},{word:"Have a nice day",translation:"Гарного дня",example:"Thanks for coming. Have a nice day!"},{word:"Good night",translation:"Надобраніч",example:"It's late. Good night!"}],"personal-info-basics":[{word:"first name",translation:"ім'я",example:"My first name is Olha."},{word:"last name",translation:"прізвище",example:"Her last name is Petrenko."},{word:"full name",translation:"повне ім'я",example:"Please write your full name here."},{word:"nickname",translation:"прізвисько / нікнейм",example:"His friends call him Max; it's his nickname."},{word:"age",translation:"вік",example:"My age is twenty."},{word:"I am ... years old",translation:"мені ... років",example:"I am twenty years old."},{word:"years old",translation:"років (вік)",example:"I'm eleven years old."},{word:"country",translation:"країна",example:"My country is Ukraine."},{word:"city",translation:"місто",example:"I live in the city of Lviv."},{word:"hometown",translation:"рідне місто",example:"My hometown is Poltava."},{word:"place of birth",translation:"місце народження",example:"My place of birth is Kharkiv."},{word:"address",translation:"адреса",example:"My address is 12 Green Street."},{word:"nationality",translation:"національність",example:"She is Italian by nationality."},{word:"native language",translation:"рідна мова",example:"Ukrainian is my native language."},{word:"foreign language",translation:"іноземна мова",example:"English is my first foreign language."},{word:"from",translation:"з / родом із",example:"I am from Ukraine."},{word:"live in",translation:"жити в",example:"I live in Kyiv."},{word:"live with",translation:"жити з",example:"I live with my parents."},{word:"date of birth",translation:"дата народження",example:"My date of birth is May 12, 2005."},{word:"job / occupation",translation:"робота / професія",example:"My job is a student."},{word:"student",translation:"студент / учень",example:"I'm a student at the local school."},{word:"teacher",translation:"вчитель / викладач",example:"My teacher is from Canada."},{word:"grade",translation:"клас (у школі)",example:"I'm in Grade 6."},{word:"single",translation:"неодружений / неодружена",example:"He is single at the moment."},{word:"married",translation:"одружений / заміжня",example:"My parents are married."},{word:"male",translation:"чоловіча стать",example:"He is male."},{word:"female",translation:"жіноча стать",example:"She is female."},{word:"speak",translation:"говорити (мовою)",example:"I speak Ukrainian and English."},{word:"introduce yourself",translation:"представитись",example:"Let me introduce myself."}],"classroom-objects":[{word:"pen",translation:"ручка",transcription:"pen",example:"I write with a blue pen."},{word:"pencil",translation:"олівець",transcription:"ˈpensl",example:"This pencil is very sharp."},{word:"notebook",translation:"зошит",transcription:"ˈnəʊtbʊk",example:"I have a new notebook for English."},{word:"eraser",translation:"гумка",transcription:"ɪˈreɪzə",example:"Use an eraser to correct mistakes."},{word:"ruler",translation:"лінійка",transcription:"ˈruːlə",example:"The ruler is on the desk."},{word:"desk",translation:"парта, робочий стіл",transcription:"desk",example:"My desk is next to the window."},{word:"chair",translation:"стілець",transcription:"tʃeə",example:"There is a chair in front of the desk."},{word:"computer",translation:"комп’ютер",transcription:"kəmˈpjuːtə",example:"I work on the computer every day."},{word:"keyboard",translation:"клавіатура",transcription:"ˈkiːbɔːd",example:"Type your name on the keyboard."},{word:"mouse",translation:"мишка (комп’ютерна)",transcription:"maʊs",example:"Click the mouse to open the file."},{word:"book",translation:"книга",transcription:"bʊk",example:"Open your book at page ten."},{word:"paper",translation:"папір",transcription:"ˈpeɪpə",example:"I need a piece of paper."},{word:"folder",translation:"папка",transcription:"ˈfəʊldə",example:"Put your documents in the folder."},{word:"document",translation:"документ",transcription:"ˈdɒkjʊmənt",example:"I printed the document for the meeting."},{word:"printer",translation:"принтер",transcription:"ˈprɪntə",example:"The printer is not working today."},{word:"board",translation:"дошка",transcription:"bɔːd",example:"The teacher writes on the board."},{word:"marker",translation:"маркер",transcription:"ˈmɑːkə",example:"Use a black marker, please."},{word:"bag",translation:"сумка, рюкзак",transcription:"bæɡ",example:"My school bag is very heavy."},{word:"calendar",translation:"календар",transcription:"ˈkælɪndə",example:"The calendar is on the wall."},{word:"lamp",translation:"лампа",transcription:"læmp",example:"The lamp is on the desk."},{word:"stapler",translation:"степлер",transcription:"ˈsteɪplə",example:"Can I use your stapler?"},{word:"paper clip",translation:"скріпка",transcription:"ˈpeɪpə klɪp",example:"There are some paper clips in the drawer."},{word:"envelope",translation:"конверт",transcription:"ˈenvələʊp",example:"Put the letter in an envelope."},{word:"whiteboard",translation:"біла дошка",transcription:"ˈwaɪtbɔːd",example:"The whiteboard is clean now."},{word:"clock",translation:"годинник",transcription:"klɒk",example:"There is a clock on the wall."}],"colours-basics":[{word:"black",translation:"чорний",transcription:"blæk",example:"I prefer a black theme in the app."},{word:"white",translation:"білий",transcription:"waɪt",example:"The logo looks clean on a white background."},{word:"grey",translation:"сірий",transcription:"ɡreɪ",example:"Use a light grey for the captions."},{word:"gray",translation:"сірий (амер.)",transcription:"ɡreɪ",example:"The walls are painted gray."},{word:"red",translation:"червоний",transcription:"red",example:"Red buttons usually signal an alert."},{word:"blue",translation:"синій",transcription:"bluː",example:"Our brand uses a dark blue palette."},{word:"green",translation:"зелений",transcription:"ɡriːn",example:"Green indicates success or confirmation."},{word:"yellow",translation:"жовтий",transcription:"ˈjel.oʊ",example:"Add a yellow highlight for emphasis."},{word:"orange",translation:"помаранчевий",transcription:"ˈɒr.ɪndʒ",example:"Orange can draw attention to a CTA."},{word:"purple",translation:"фіолетовий",transcription:"ˈpɜː.pəl",example:"We tested a purple accent on the header."},{word:"pink",translation:"рожевий",transcription:"pɪŋk",example:"This chart uses pink for the second series."},{word:"brown",translation:"коричневий",transcription:"braʊn",example:"We switched to a warm brown for the furniture."},{word:"beige",translation:"бежевий",transcription:"beɪʒ",example:"Beige walls make the room calmer."},{word:"light",translation:"світлий",transcription:"laɪt",example:"Use a light green header."},{word:"dark",translation:"темний",transcription:"dɑːk",example:"A dark blue footer looks more balanced."},{word:"pale",translation:"блідий",transcription:"peɪl",example:"Pale pink is used for the background."},{word:"pastel",translation:"пастельний",transcription:"ˈpæs.təl",example:"I like pastel colours for minimalistic design."},{word:"bright",translation:"яскравий",transcription:"braɪt",example:"Bright yellow icons catch the eye."},{word:"vivid",translation:"насичений",transcription:"ˈvɪv.ɪd",example:"Use a vivid red to emphasize urgency."},{word:"deep",translation:"глибокий (про колір)",transcription:"diːp",example:"I prefer a deep purple accent."},{word:"rich",translation:"багатий, насичений",transcription:"rɪtʃ",example:"The brand uses a rich green tone."},{word:"neutral",translation:"нейтральний",transcription:"ˈnjuː.trəl",example:"Neutral grey works well for typography."},{word:"muted",translation:"приглушений",transcription:"ˈmjuː.tɪd",example:"Use a muted orange instead of a bright one."},{word:"warm",translation:"теплий (відтінок)",transcription:"wɔːm",example:"Warm beige creates a cozy atmosphere."},{word:"cool",translation:"холодний (відтінок)",transcription:"kuːl",example:"Cool blue feels more professional."},{word:"contrast",translation:"контраст",transcription:"ˈkɒn.trɑːst",example:"Increase the contrast for better readability."},{word:"shade",translation:"відтінок",transcription:"ʃeɪd",example:"Choose a lighter shade of green."},{word:"tone",translation:"тон",transcription:"təʊn",example:"The tone of blue is too dark."},{word:"palette",translation:"палітра",transcription:"ˈpæl.ət",example:"Our new brand palette includes three main colours."}],"family-relationships":[{word:"mother",translation:"мати",transcription:"ˈmʌðər",example:"My mother is a doctor."},{word:"mom",translation:"мама",transcription:"mɒm",example:"My mom is a doctor."},{word:"father",translation:"батько",transcription:"ˈfɑːðər",example:"My father works in IT."},{word:"dad",translation:"тато",transcription:"dæd",example:"My dad works in IT."},{word:"parents",translation:"батьки",transcription:"ˈpeərənts",example:"My parents live abroad."},{word:"son",translation:"син",transcription:"sʌn",example:"She has a teenage son."},{word:"daughter",translation:"дочка",transcription:"ˈdɔːtər",example:"Her daughter studies medicine."},{word:"brother",translation:"брат",transcription:"ˈbrʌðər",example:"I have an older brother."},{word:"sister",translation:"сестра",transcription:"ˈsɪstər",example:"I have an older sister."},{word:"husband",translation:"чоловік",transcription:"ˈhʌzbənd",example:"Her husband travels a lot."},{word:"wife",translation:"дружина",transcription:"waɪf",example:"My wife works from home."},{word:"child",translation:"дитина",transcription:"tʃaɪld",example:"Their child is very polite."},{word:"children",translation:"діти",transcription:"ˈtʃɪldrən",example:"They have two children."},{word:"grandmother",translation:"бабуся",transcription:"ˈɡrænˌmʌðər",example:"My grandmother is 80."},{word:"grandfather",translation:"дідусь",transcription:"ˈɡrændˌfɑːðər",example:"My grandfather tells great stories."},{word:"grandparents",translation:"дідусь і бабуся",transcription:"ˈɡrænˌpeərənts",example:"We visit our grandparents on weekends."},{word:"aunt",translation:"тітка",transcription:"ɑːnt",example:"My aunt lives in London."},{word:"uncle",translation:"дядько",transcription:"ˈʌŋkəl",example:"My uncle lives in Canada."},{word:"cousin",translation:"двоюрідний брат / сестра",transcription:"ˈkʌzən",example:"My cousin works as a designer."},{word:"niece",translation:"племінниця",transcription:"niːs",example:"My niece is six years old."},{word:"nephew",translation:"племінник",transcription:"ˈnefjuː",example:"He spends weekends with his nephew."},{word:"in-laws",translation:"родичі з боку чоловіка/дружини",transcription:"ˈɪn.lɔːz",example:"I get along well with my in-laws."},{word:"mother-in-law",translation:"свекруха / теща",transcription:"ˈmʌðər ɪn lɔː",example:"Her mother-in-law is very supportive."},{word:"father-in-law",translation:"свекор / тесть",transcription:"ˈfɑːðər ɪn lɔː",example:"My father-in-law is a kind man."},{word:"brother-in-law",translation:"дівер / шваґро",transcription:"ˈbrʌðər ɪn lɔː",example:"My brother-in-law is an architect."},{word:"sister-in-law",translation:"зовиця / невістка",transcription:"ˈsɪstər ɪn lɔː",example:"My sister-in-law is a lawyer."},{word:"stepmother",translation:"мачуха",transcription:"ˈstepˌmʌðər",example:"He was raised by his stepmother."},{word:"stepfather",translation:"вітчим",transcription:"ˈstepˌfɑːðər",example:"He was raised by his stepfather."},{word:"stepsister",translation:"зведена сестра",transcription:"ˈstepˌsɪstər",example:"She has a younger stepsister."},{word:"stepbrother",translation:"зведений брат",transcription:"ˈstepˌbrʌðər",example:"He has a stepbrother in another city."},{word:"single",translation:"неодружений / незаміжня",transcription:"ˈsɪŋɡəl",example:"I’m single."},{word:"in a relationship",translation:"у стосунках",transcription:"ɪn ə rɪˈleɪʃənʃɪp",example:"He is in a relationship."},{word:"married",translation:"одружений / заміжня",transcription:"ˈmærid",example:"She is married with two children."},{word:"engaged",translation:"заручений / заручена",transcription:"ɪnˈɡeɪdʒd",example:"They got engaged last year."},{word:"divorced",translation:"розлучений / розлучена",transcription:"dɪˈvɔːst",example:"He is divorced."},{word:"widowed",translation:"вдів(ець) / вдова",transcription:"ˈwɪdəʊd",example:"She was widowed young."},{word:"partner",translation:"партнер / партнерка",transcription:"ˈpɑːtnər",example:"My partner works remotely."},{word:"spouse",translation:"подружжя (офіц.)",transcription:"spaʊs",example:"Please include your spouse’s name."},{word:"fiancé",translation:"наречений",transcription:"fiˈɒn.seɪ",example:"Her fiancé lives in Berlin."},{word:"fiancée",translation:"наречена",transcription:"fiˈɒn.seɪ",example:"His fiancée is from Spain."},{word:"cohabiting",translation:"спільне проживання",transcription:"kəʊˈhæbɪtɪŋ",example:"They are cohabiting but not married."},{word:"close",translation:"близький",transcription:"kləʊs",example:"We have a close family."},{word:"supportive",translation:"підтримувальний",transcription:"səˈpɔːtɪv",example:"She has a very supportive husband."},{word:"distant",translation:"відсторонений",transcription:"ˈdɪstənt",example:"He has a distant relationship with his father."},{word:"complicated",translation:"складний",transcription:"ˈkɒmplɪkeɪtɪd",example:"Their relationship is complicated."},{word:"get along with",translation:"ладнати з кимось",transcription:"ɡet əˈlɒŋ wɪð",example:"I get along well with my in-laws."},{word:"take care of",translation:"піклуватися про",transcription:"teɪk keər ɒv",example:"She takes care of her grandparents."},{word:"look after",translation:"доглядати",transcription:"lʊk ˈɑːftər",example:"He looks after his niece on weekends."},{word:"raise",translation:"виховувати",transcription:"reɪz",example:"They raised three children."},{word:"bring up",translation:"виховувати (синонім)",transcription:"brɪŋ ʌp",example:"She was brought up by her grandparents."},{word:"split up",translation:"розійтися",transcription:"splɪt ʌp",example:"They split up last year."},{word:"break up",translation:"розлучитися (про пару)",transcription:"breɪk ʌp",example:"They broke up after 5 years together."},{word:"reconcile",translation:"помиритися",transcription:"ˈrek.ən.saɪl",example:"They reconciled after a long talk."},{word:"family gathering",translation:"сімейні збори",transcription:"ˈfæmɪli ˈɡæðərɪŋ",example:"We have a family gathering every summer."},{word:"family reunion",translation:"сімейне возз’єднання",transcription:"ˈfæmɪli riˈjuːniən",example:"The family reunion takes place once a year."},{word:"siblings",translation:"брати і сестри",transcription:"ˈsɪblɪŋz",example:"Do you have any siblings?"},{word:"relationship",translation:"стосунки",transcription:"rɪˈleɪʃənʃɪp",example:"He is in a relationship."},{word:"children",translation:"діти",transcription:"ˈtʃɪldrən",example:"Do you have children?"},{word:"family",translation:"родина",transcription:"ˈfæmɪli",example:"Does your family live nearby?"}],"home-rooms-furniture":[{word:"living room",translation:"вітальня",transcription:"ˈlɪvɪŋ ruːm",example:"We relax in the living room after work."},{word:"bedroom",translation:"спальня",transcription:"ˈbedruːm",example:"The bedroom has a big wardrobe."},{word:"kitchen",translation:"кухня",transcription:"ˈkɪtʃən",example:"The kitchen is small but functional."},{word:"bathroom",translation:"ванна кімната",transcription:"ˈbɑːθruːm",example:"The bathroom has a shower, not a bath."},{word:"hallway",translation:"передпокій",transcription:"ˈhɔːlweɪ",example:"The hallway is narrow."},{word:"corridor",translation:"коридор",transcription:"ˈkɒrɪdɔːr",example:"There’s a long corridor in the apartment."},{word:"balcony",translation:"балкон",transcription:"ˈbælkəni",example:"There’s a small balcony with a view."},{word:"home office",translation:"домашній офіс",transcription:"həʊm ˈɒfɪs",example:"I work from a small home office."},{word:"study",translation:"кабінет",transcription:"ˈstʌdi",example:"He spends most of his time in the study."},{word:"storage room",translation:"комора",transcription:"ˈstɔːrɪdʒ ruːm",example:"We keep tools in the storage room."},{word:"sofa",translation:"диван",transcription:"ˈsəʊfə",example:"The sofa is very comfortable."},{word:"couch",translation:"диван (амер.)",transcription:"kaʊtʃ",example:"We bought a new couch for the living room."},{word:"armchair",translation:"крісло",transcription:"ˈɑːmtʃeər",example:"I read in the armchair by the window."},{word:"coffee table",translation:"журнальний столик",transcription:"ˈkɒfi ˈteɪbəl",example:"Put the magazines on the coffee table."},{word:"bed",translation:"ліжко",transcription:"bed",example:"The bed is king-size."},{word:"wardrobe",translation:"шафа для одягу",transcription:"ˈwɔːdrəʊb",example:"My clothes are in the wardrobe."},{word:"closet",translation:"кладовка / гардеробна",transcription:"ˈklɒzɪt",example:"There’s a closet next to the bathroom."},{word:"dresser",translation:"комод",transcription:"ˈdresər",example:"The keys are in the top drawer of the dresser."},{word:"chest of drawers",translation:"комод (брит.)",transcription:"tʃest əv drɔːz",example:"She bought a new chest of drawers for the bedroom."},{word:"desk",translation:"письмовий стіл",transcription:"desk",example:"I keep my laptop on the desk."},{word:"chair",translation:"стілець",transcription:"tʃeər",example:"This chair supports my back well."},{word:"bookshelf",translation:"книжкова полиця",transcription:"ˈbʊkʃelf",example:"The bookshelf is full of novels."},{word:"bookcase",translation:"книжкова шафа",transcription:"ˈbʊkkeɪs",example:"The bookcase is near the window."},{word:"nightstand",translation:"приліжкова тумба",transcription:"ˈnaɪt.stænd",example:"There’s a lamp on the nightstand."},{word:"dining table",translation:"обідній стіл",transcription:"ˈdaɪnɪŋ ˈteɪbəl",example:"We eat at the dining table."},{word:"kitchen cabinets",translation:"кухонні шафки",transcription:"ˈkɪtʃən ˈkæbɪnɪts",example:"The kitchen cabinets are new."},{word:"fridge",translation:"холодильник",transcription:"frɪdʒ",example:"The fridge is almost empty."},{word:"refrigerator",translation:"холодильник (повна форма)",transcription:"rɪˈfrɪdʒəreɪtər",example:"There’s milk in the refrigerator."},{word:"stove",translation:"плита",transcription:"stəʊv",example:"The stove is electric."},{word:"cooker",translation:"плита (брит.)",transcription:"ˈkʊkər",example:"We bought a new gas cooker."},{word:"oven",translation:"духовка",transcription:"ˈʌvən",example:"The oven heats up fast."},{word:"microwave",translation:"мікрохвильовка",transcription:"ˈmaɪkrəweɪv",example:"We use the microwave to reheat food."},{word:"washing machine",translation:"пральна машина",transcription:"ˈwɒʃɪŋ məˌʃiːn",example:"The washing machine is running."},{word:"dishwasher",translation:"посудомийка",transcription:"ˈdɪʃˌwɒʃər",example:"The dishwasher saves time."},{word:"kettle",translation:"електрочайник",transcription:"ˈketəl",example:"Boil water in the kettle, please."},{word:"toaster",translation:"тостер",transcription:"ˈtəʊstər",example:"The toaster makes great breakfast."},{word:"air conditioner",translation:"кондиціонер",transcription:"ˈeə kənˌdɪʃənər",example:"The air conditioner is set to 23°C."},{word:"heater",translation:"обігрівач",transcription:"ˈhiːtər",example:"We use a heater in winter."},{word:"lamp",translation:"лампа",transcription:"læmp",example:"The lamp gives warm light."},{word:"floor lamp",translation:"торшер",transcription:"flɔː læmp",example:"The floor lamp gives warm light."},{word:"rug",translation:"килимок",transcription:"rʌɡ",example:"There’s a rug under the coffee table."},{word:"carpet",translation:"килим",transcription:"ˈkɑːpɪt",example:"The carpet covers the entire floor."},{word:"curtains",translation:"штори",transcription:"ˈkɜːtənz",example:"We installed new curtains."},{word:"blinds",translation:"жалюзі",transcription:"blaɪndz",example:"We installed new blinds."},{word:"mirror",translation:"дзеркало",transcription:"ˈmɪrər",example:"The mirror is on the wall."},{word:"shelf",translation:"полиця",transcription:"ʃelf",example:"There’s a shelf above the desk."},{word:"bin",translation:"смітник",transcription:"bɪn",example:"The bin is under the sink."},{word:"trash can",translation:"сміттєве відро (амер.)",transcription:"træʃ kæn",example:"Please empty the trash can."},{word:"do the dishes",translation:"мити посуд",transcription:"duː ðə ˈdɪʃɪz",example:"I’ll do the dishes after dinner."},{word:"do the laundry",translation:"прати білизну",transcription:"duː ðə ˈlɔːndri",example:"We do the laundry on weekends."},{word:"vacuum",translation:"пилососити",transcription:"ˈvækjuːm",example:"I need to vacuum the living room."},{word:"take out the trash",translation:"винести сміття",transcription:"teɪk aʊt ðə træʃ",example:"Please take out the trash tonight."},{word:"wipe the table",translation:"витерти стіл",transcription:"waɪp ðə ˈteɪbəl",example:"Wipe the table after cooking."},{word:"make the bed",translation:"застелити ліжко",transcription:"meɪk ðə bed",example:"I always make the bed in the morning."},{word:"water the plants",translation:"поливати рослини",transcription:"ˈwɔːtər ðə plɑːnts",example:"Don’t forget to water the plants."}]},K=new Map;let we=!1;function Ge(){we||(we=!0,fe.subscribe(({user:e})=>{Re(fe.isAdmin(e))}))}function Fe(e){if(!e)return;const t=window.getComputedStyle(e).position;(t==="static"||!t)&&(e.style.position="relative")}function Ke(e){const t=e.querySelector(".lesson-topic__share-controls");if(t)return t;const n=document.createElement("div");return n.className="lesson-topic__share-controls",n.style.position="absolute",n.style.top="0",n.style.right="0",n.style.display="flex",n.style.gap="6px",n.style.alignItems="center",n.style.zIndex="10",e.appendChild(n),n}function Qe(e){if(!e||K.has(e))return;const t=e.querySelector(".lesson-topic__header")??e;Fe(t);const n=Ke(t),{button:r,panel:a,unregister:o}=He({context:e,triggerClassName:"lesson-topic__share-trigger for-admin js-share-topic-btn",triggerStyle:"border:none;background:#2563eb;color:#fff;padding:4px 12px;border-radius:999px;font-size:12px;line-height:1;cursor:pointer;box-shadow:0 4px 12px rgba(37,99,235,0.24);",onShare:({student:s,context:i})=>{const l=document.createElement("div");l.innerHTML=i.outerHTML;const c=window.location.search.slice(8),h=document.querySelector("h1"),b=h?h.textContent:"",x=l.querySelector(".lesson-topic__share-controls"),y=l.querySelector(".practice-share-panel");x.remove(),y.remove();const d={lessonId:c,userEmail:s.email,lessonName:b,homeworkType:"theory",homeworkData:l.innerHTML};return We(d)}});a.style.right="0",a.style.top="38px",n.appendChild(r),t.appendChild(a),K.set(e,{unregister:o,panel:a})}function Je(){K.forEach((e,t)=>{var n;t.isConnected||(e.panel&&je(e.panel)&&ze(),(n=e.unregister)==null||n.call(e),K.delete(t))})}const ye=()=>{Ge(),Je(),document.querySelectorAll(".lesson-topic").forEach(t=>Qe(t))},Ye=55,Ve=5,Me=0,Xe={"custom-no1-mggxs7zo":[{id:"abf91e0d2ea04f8cabb896481369bcdf",themeId:"42",templateId:"70",fontStackId:Me,title:"Wordwall вправа"}],"custom-no2-4db25661":[{id:"110f5ab8bba8415eadefd09fb52c4e87",themeId:"65",templateId:"30",fontStackId:"12",title:"Wordwall вправа для особових займенників",url:"https://wordwall.net/embed/110f5ab8bba8415eadefd09fb52c4e87?themeId=65&templateId=30&fontStackId=12"}],"custom-no3-b9fd7e6c":[{id:"110f5ab8bba8415eadefd09fb52c4e87",themeId:"65",templateId:"30",fontStackId:"12",title:"Wordwall вправа для особових займенників",url:"https://wordwall.net/embed/110f5ab8bba8415eadefd09fb52c4e87?themeId=65&templateId=30&fontStackId=12"}],"custom-no4-c6f6abec":[{id:"110f5ab8bba8415eadefd09fb52c4e87",themeId:"65",templateId:"30",fontStackId:"12",title:"Wordwall вправа для особових займенників",url:"https://wordwall.net/embed/110f5ab8bba8415eadefd09fb52c4e87?themeId=65&templateId=30&fontStackId=12"}],"custom-no5-a3c6ccb2":[{id:"cd69f6a25d164b098c91cb9f50c307ee",themeId:"65",templateId:"30",fontStackId:"12",title:"Wordwall вправа для особових займенників",url:"https://wordwall.net/embed/cd69f6a25d164b098c91cb9f50c307ee?themeId=65&templateId=30&fontStackId=0"}],"custom-no6-da70b690":[{id:"cd69f6a25d164b098c91cb9f50c307ee",themeId:"65",templateId:"30",fontStackId:"12",title:"Wordwall вправа для особових займенників",url:"https://wordwall.net/embed/cd69f6a25d164b098c91cb9f50c307ee?themeId=65&templateId=30&fontStackId=0"}],"custom-no7-43000f0c":[],"custom-no8-846a8d9e":[],"custom-no9-cf6e6bee":[],"custom-no10-28500f64":[],"custom-no11-d8d86e31":[],"custom-no12-93e53fe8":[],"custom-no13-f4bcb910":[],"custom-no14-40fdaa86":[],"custom-no15-ef51a27e":[],"custom-no16-e3b3d783":[],"custom-no17-6337b1c4":[],"custom-no18-b8435532":[],"custom-no19-8d87b15e":[],"custom-no20-06a86866":[],"custom-no21-670eb82c":[],"custom-no22-2073a55b":[],"custom-no23-21e7300b":[],"custom-no24-29c54cf7":[],"custom-no25-796a6730":[],"custom-no26-9b5f1ffc":[],"custom-no27-6487572a":[],"custom-no28-7f7a2815":[],"custom-no29-9710e19a":[],"custom-no30-b72e7840":[],"custom-no31-2b6f7bda":[],"custom-no32-deb561b3":[],"custom-no33-9a2f527a":[],"custom-no34-5b2c8e22":[],"custom-no35-a6a8ac33":[],"custom-no36-6a082f08":[],"custom-no37-faa9b7b8":[],"custom-no38-5206027c":[],"custom-no39-6b35cfd3":[],"custom-no40-4927837a":[],"custom-no41-7ba1db93":[],"custom-no42-29b5bb10":[],"custom-no43-7ecfedc0":[],"custom-no44-0e8b8ebd":[],"custom-no45-310fbeb4":[],"custom-no46-ccb1de5a":[],"custom-no47-d6148758":[],"custom-no48-3e5720c9":[],"custom-no49-f759cafd":[],"custom-no50-23930ae8":[]};function Ze(e){return e?e.url?String(e.url):e.id?`https://wordwall.net/embed/${String(e.id).trim()}`:null:null}function Ae(e){const t=Ze(e);if(!t)return null;const n=new URLSearchParams,r=e.themeId??Ye,a=e.templateId??Ve,o=e.fontStackId??Me;r!=null&&n.set("themeId",String(r)),a!=null&&n.set("templateId",String(a)),o!=null&&n.set("fontStackId",String(o));const s=n.toString();return s?`${t}?${s}`:t}function et(e){const t=Ae(e);if(!t)return null;const n=document.createElement("iframe");return n.className="lesson-wordwall__iframe",n.src=t,n.width=String(e.width??1e3),n.height=String(e.height??760),n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("loading","lazy"),n.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),e.title&&n.setAttribute("title",e.title),n}function tt(e){if(!e)return[];const t=Xe[e];return Array.isArray(t)?t.map(n=>({...n})).filter(n=>!!Ae(n)):[]}const nt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},J=typeof import.meta<"u"&&nt&&"/"||"/";function ce(e){const t=J.endsWith("/")?J:`${J}/`,n=String(e||"");return n.startsWith(t)?n:`${t}${n.replace(/^\/+/,"")}`}const R=new URLSearchParams(window.location.search),rt=e=>e,H=R.get("topic"),ge=R.get("custom"),be=R.get("title"),xe=rt(R.get("category")),ke=R.get("level"),Ee=R.get("file"),p=H?ie.find(e=>e.id===H):void 0,w=(()=>{if(!ge)return null;const e=[];return Array.isArray(he)&&he.forEach(t=>{if(!t||typeof t!="object")return;const n=Array.isArray(t.topicIds)?[...t.topicIds]:[];!t.id||!n.length||e.push({...t,topicIds:n,source:"preset"})}),De().filter(t=>t&&typeof t=="object").forEach(t=>{const n=Array.isArray(t.topicIds)?[...t.topicIds]:[];!t.id||!n.length||e.push({...t,topicIds:n,source:"local"})}),e.find(t=>t.id===ge)??null})(),S=!!w,G=S?w.title:p!=null&&p.title?p.title:be?decodeURIComponent(be):"Матеріал уроку",Z=S?"custom":p!=null&&p.category?p.category:xe?decodeURIComponent(xe):"",ee=(()=>{if(S){if(w.level)return w.level;const e=(w.topicIds||[]).map(n=>ie.find(r=>r.id===n)).filter(Boolean);return Array.from(new Set(e.map(n=>n.level))).sort().join(", ")}return p!=null&&p.level?p.level:ke?decodeURIComponent(ke):""})(),te=(()=>{if(S)return null;const e=(p==null?void 0:p.htmlPath)??(Ee?decodeURIComponent(Ee):null);return e&&e.startsWith("lessons/")?e:null})();window.lessonContext={id:S?w.id:(p==null?void 0:p.id)??H??null,title:G,category:Z,level:ee,htmlPath:te,source:S?w.source||"custom":"catalog",topicIds:S?[...w.topicIds||[]]:p!=null&&p.id?[p.id]:H?[H]:[],isCustomLesson:S};const Te=document.querySelector("[data-lesson-title]"),ve=document.querySelector("[data-lesson-category]"),Se=document.querySelector("[data-lesson-level]"),U=document.querySelector("[data-lesson-status]"),k=document.getElementById("lesson-content");function at(){const e=document.querySelector('[data-component="copyright-year"]');e&&(e.textContent=String(new Date().getFullYear()))}function ot(){Te&&(Te.textContent=G);const t=(()=>{var r;return S?"Комбінований урок":((r=se[Z])==null?void 0:r.label)??""})()||Z;ve&&(ve.textContent=t||""),Se&&(Se.textContent=ee?`Рівень: ${ee}`:"");const n=document.getElementById("practice-title");n&&(n.textContent=G),document.title=`${G} | English Teacher Platform`}function Ue(e){return`lesson-topic-${String(e||"").trim().toLowerCase().replace(/[^a-z0-9_-]+/g,"-").replace(/^-+|-+$/g,"")||"topic"}`}function it(e){if(!e.length)return null;const t=document.createElement("section");t.className="lesson-custom-summary";const n=document.createElement("h2");n.textContent="Склад уроку",t.appendChild(n);const r=document.createElement("ol");return r.className="lesson-custom-summary__list",e.forEach((a,o)=>{var x;const s=document.createElement("li");s.className="lesson-custom-summary__item";const i=((x=se[a.category])==null?void 0:x.label)??a.category,l=Ue(a.id),c=document.createElement("a");c.className="lesson-custom-summary__link",c.href=`#${l}`,c.dataset.topicAnchor=l;const h=document.createElement("strong");h.textContent=`${o+1}. ${a.title}`;const b=document.createElement("span");b.textContent=`${i} · ${a.level}`,c.appendChild(h),c.appendChild(b),c.addEventListener("click",y=>{const d=document.getElementById(l);d&&(y.preventDefault(),d.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>{try{d.focus({preventScroll:!0})}catch{d.focus()}}))}),s.appendChild(c),r.appendChild(s)}),t.appendChild(r),t}async function st(e){if(!e)return null;const t=new Set;if(e.id&&t.add(`data/practice/${e.id}.json`),e.htmlPath){const n=String(e.htmlPath).replace(/^\.?\/?/,"").replace(/\.html?$/i,"");if(n){t.add(`data/practice/${n}.json`);const r=n.split("/"),a=r[r.length-1];a&&t.add(`data/practice/${a}.json`)}}for(const n of t)try{const r=await fetch(ce(n),{cache:"no-store"});if(!r.ok)continue;const a=await r.json();if(a&&Array.isArray(a.tasks)&&a.tasks.length)return a}catch(r){console.warn(`Не вдалося завантажити практику за шляхом ${n}`,r)}return null}function Y(e){if(!e)return;const t=document.createElement("p");t.className="practice-inline__empty muted",t.textContent="Практика для цієї теми поки відсутня.",e.appendChild(t)}function Le(e){const t=tt(e);if(!t.length)return null;const n=document.createElement("section");n.className="lesson-wordwall";const r=document.createElement("h2");r.className="lesson-wordwall__title",r.textContent="Wordwall",n.appendChild(r);const a=document.createElement("div");a.className="lesson-wordwall__items",n.appendChild(a);let o=!1;return t.forEach((s,i)=>{const l=et({...s,title:s.title||`Wordwall вправа ${i+1}`});l&&(o=!0,a.appendChild(l))}),o?n:null}async function lt(){var o;if(!k)return;const e=((w==null?void 0:w.topicIds)||[]).map(s=>ie.find(i=>i.id===s)).filter(Boolean);if(!e.length){U&&(U.textContent="Не вдалося знайти вибрані теми. Створіть урок заново.");return}if(k.innerHTML="",w!=null&&w.description){const s=document.createElement("p");s.className="lesson-custom-description",s.textContent=w.description,k.appendChild(s)}const t={grammar:0,lexical:1},n=e.slice().sort((s,i)=>{const l=t[s.category]??99,c=t[i.category]??99;return l!==c?l-c:0}),r=it(n);r&&k.appendChild(r);const a=Le((w==null?void 0:w.id)??null);a&&k.appendChild(a);for(const s of n){const i=document.createElement("section");i.className="lesson-topic",i.dataset.topicId=s.id;const l=Ue(s.id);i.id=l,i.setAttribute("tabindex","-1");const c=document.createElement("header");c.className="lesson-topic__header";const h=document.createElement("h3");h.className="lesson-topic__title",h.textContent=s.title,c.appendChild(h);const b=document.createElement("p");b.className="lesson-topic__meta";const x=((o=se[s.category])==null?void 0:o.label)??s.category;b.textContent=`${x} · Рівень ${s.level}`,c.appendChild(b),i.appendChild(c);const y=document.createElement("div");y.className="lesson-topic__body",i.appendChild(y),k.appendChild(i);try{const u=await fetch(ce(s.htmlPath));if(!u.ok)throw new Error(`Не вдалося завантажити файл: ${u.status}`);const I=await u.text();y.innerHTML=I}catch(u){y.innerHTML='<p class="lesson-topic__error">Не вдалося завантажити матеріал цієї теми.</p>',console.error(u)}const d=document.createElement("div");d.className="lesson-topic__practice",i.appendChild(d);try{const u=await st(s);if(u&&Array.isArray(u.tasks)&&u.tasks.length){const I=window.practice||{},j=u.title?`Практика: ${u.title}`:`Практика: ${s.title}`,z=u.level||s.level||"";typeof I.renderTaskList=="function"?I.renderTaskList(d,u.tasks,{title:j,level:z,description:u.description,keyPrefix:`${s.id}-practice`}):Y(d)}else Y(d)}catch(u){console.error("Помилка під час завантаження практики",u),Y(d)}}U&&U.remove(),await _e(k)}async function ct(){if(k){if(S){await lt(),ye();return}if(!te){U&&(U.textContent="Не вдалося визначити файл з матеріалом. Перейдіть назад та оберіть тему зі списку.");return}try{const e=await fetch(ce(te));if(!e.ok)throw new Error(`Не вдалося завантажити файл: ${e.status}`);const t=await e.text();k.innerHTML="";const n=Le((p==null?void 0:p.id)??null);n&&k.appendChild(n);const r=document.createElement("template");r.innerHTML=t,k.appendChild(r.content),ye(),await _e(k)}catch(e){U&&(U.textContent="Сталася помилка під час завантаження матеріалу. Спробуйте пізніше або поверніться до каталогу."),console.error(e)}}}function Pe(e){return String(e||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}const ne=Object.keys(le||{}).map(t=>({key:t,normalized:Pe(t)})),Ie=(()=>{const e=new Map;return ne.forEach(t=>{t.normalized&&!e.has(t.normalized)&&e.set(t.normalized,t.key)}),e})();function dt(e){if(typeof e!="string")return null;const t=Object.prototype.hasOwnProperty.call(le,e)?e:null;if(t)return t;const n=Pe(e);if(!n)return null;if(Ie.has(n))return Ie.get(n);const r=ne.find(o=>o.normalized.includes(n));if(r)return r.key;const a=ne.find(o=>n.includes(o.normalized));return a?a.key:null}function pt(e){if(!e)return null;const t=[],n=i=>{if(!i)return;const l=String(i).trim();l&&t.push(l)},r=["communicationTopic","topic","topicId","module","communicationModule"];r.forEach(i=>{var l;(l=e.dataset)!=null&&l[i]&&n(e.dataset[i])});const a=e.closest("[data-communication-topic],[data-topic],[data-topic-id],[data-module],[data-communication-module]");a&&a!==e&&r.forEach(i=>{var l;(l=a.dataset)!=null&&l[i]&&n(a.dataset[i])}),e.id&&n(e.id);const o=window.lessonContext||{};n(o.id),n(o.topicId),Array.isArray(o.topicIds)&&o.topicIds.forEach(n);const s=new Set;for(const i of t){if(s.has(i))continue;s.add(i);const l=dt(i);if(l)return l}return null}function mt(e,t){if(!e)return;const n=Array.isArray(t)?t:[];if(!n.length)return;e.classList.add("communication__table");const r=document.createElement("table"),a=document.createElement("thead"),o=document.createElement("tr");["Слово","Транскрипція","Переклад","Приклад"].forEach(i=>{const l=document.createElement("th");l.textContent=i,o.appendChild(l)}),a.appendChild(o);const s=document.createElement("tbody");n.forEach(i=>{if(!i)return;const l=document.createElement("tr"),c=document.createElement("td");c.innerHTML=`<p>${i.word}</p>`;const h=Be(i.word);c.append(h),c.classList.add("inline-cell");const b=document.createElement("td");b.textContent=i.transcription||"";const x=document.createElement("td");x.textContent=i.translation||"";const y=document.createElement("td");y.textContent=i.example||i.sentence||"",l.appendChild(c),l.appendChild(b),l.appendChild(x),l.appendChild(y),s.appendChild(l)}),r.appendChild(a),r.appendChild(s),e.innerHTML="",e.appendChild(r)}async function _e(e){if(!e)return;const t=Array.from(e.querySelectorAll("[data-communication-words]"));t.length&&t.forEach(n=>{const r=pt(n);if(!r)return;const a=le[r]||[];a.length&&mt(n,a)})}function ut(){at(),ot(),ct()}ut();const ht=async e=>{const n="https://vq1wtq2d2l.execute-api.us-east-2.amazonaws.com/dev"+"/openai";return await fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(a=>a.json())},ft=async(e,t,n={},r=[])=>{const a=wt(e,t,n,r),o=await ht(a);try{return typeof o=="string"?JSON.parse(o):o}catch{const i=typeof o=="string"?o.match(/\{[\s\S]*\}$/):null;if(i)return JSON.parse(i[0]);throw new Error("Не вдалося розпарсити JSON відповіді моделі")}};function wt(e,t,n={},r=[]){const a=localStorage.getItem("gptToken");if(!a||(a==null?void 0:a.length)<10){console.warn("⚠️ gptToken відсутній у localStorage");const h=prompt("Enter Your GPT Token");localStorage.setItem("gptToken",h)}const o="gpt-4o-mini",s=String(t||"").trim().toLowerCase(),{system:i,user:l}=yt(e,s,n),c=xt(l,r);return{token:a,model:o,messages:[{role:"system",content:i},{role:"user",content:c}],temperature:.3,max_tokens:4e3}}function yt(e,t,n){n.language;const r=Number.isInteger(n.items)?n.items:gt[t]||10,a=n.seedId||bt(e),o=`
YOU ARE an ESL task generator.
GOAL: create ONE task block of type "${t}" on the topic "${e}".
OUTPUT ONLY VALID JSON. Keep the language level around A1–A2.
All prompts, questions, answers, hints, and labels must be written in ENGLISH.
Encoding — UTF-8. No explanations, no prefixes, no code fences.
Ensure internal consistency so answers match the task logic.
`,s={mcq:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "mcq-${a}-1",
  "type": "mcq",
  "prompt": "Choose the correct option.",
  "items": [
    {
      "q": "<short question with one missing form>",
      "choices": ["<option0>", "<option1>", "<option2>"],
      "answer": ["<index_of_correct_choice_as_string>"]
    },
    ...
  ]
}

REQUIREMENTS:
- ${r} items.
- Follow the schema exactly.
- Provide exactly 3 answer choices per question with a single correct one.
- "answer" must be the index of the correct option as a string: "0" | "1" | "2".
- Keep questions natural, concise, and on the topic "${e}".
- Return JSON only, no additional commentary.

EXAMPLE (FORMAT ONLY; DO NOT COPY CONTENT):
{
  "id": "mcq-ps-1",
  "type": "mcq",
  "prompt": "Choose the correct Present Simple form.",
  "items": [
    { "q": "He usually ___ the bus to work.", "choices": ["take", "takes", "is taking"], "answer": ["1"] },
    { "q": "They ___ coffee in the morning.", "choices": ["have", "haves", "are having"], "answer": ["0"] }
  ]
}
      `.trim(),user:`
Topic: ${e}
Generate a task block of type "mcq" strictly following the OUTPUT SCHEMA.
Number of items: ${r}.
      `.trim()},gap:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "gap-${a}-1",
  "type": "gap",
  "prompt": "Fill the gaps with the correct word.",
  "items": [
    { "q": "They ___ (work) on Sundays.", "answer": ["correct_form", "alternative_if_any"] },
    ...
  ]
}
REQUIREMENTS:
- ${r} sentences.
- "q" must be a clean English sentence. Do NOT wrap it in angle brackets, quotes, or markdown — use only plain text with a single blank shown as ___ (three underscores).
- "answer" must be an array with at least one valid solution in lowercase (no angle brackets).
- Keep sentences short, level A1–A2, and connected to "${e}".
      `.trim(),user:f(e,"gap",r)},transform:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "transform-${a}-1",
  "type": "transform",
  "prompt": "Rewrite each sentence in the negative form (no final period).",
  "items": [
    {
      "q": "She likes coffee.",
      "hint": "use doesn't + base verb; no period",
      "answer": ["she doesn't like coffee", "she does not like coffee"]
    }
  ]
}
REQUIREMENTS:
- ${r} items.
- Answers must follow the prompt instructions (for example, omit the final period).
- Provide a helpful English hint for each item.
      `.trim(),user:f(e,"transform",r)},match:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "match-${a}-1",
  "type": "match",
  "prompt": "Match the base verb with the third person singular form (he/she/it).",
  "pairs": [
    { "left": "go", "right": "goes" },
    ...
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(12,r))} unique pairs.
- Provide one clear correct match for each pair without duplicates.
- Use vocabulary related to "${e}".
      `.trim(),user:f(e,"match",r)},error:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "error-${a}-1",
  "type": "error",
  "prompt": "Find and correct the mistake (Present Simple, no final period).",
  "items": [
    { "q": "She don't like tea.", "hint": "use doesn't + base verb", "answer": ["she doesn't like tea", "she does not like tea"] }
  ]
}
REQUIREMENTS:
- ${r} sentences containing a typical error connected to "${e}".
- Provide clear English hints.
- Match the formatting requested in the prompt (for example, omit the period).
      `.trim(),user:f(e,"error",r)},order:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "order-${a}-1",
  "type": "order",
  "prompt": "Put the words in the correct order.",
  "items": [
    { "q": "Arrange the sentence", "tokens": ["she", "often", "reads", "books"], "answer": "she often reads books" }
  ]
}
REQUIREMENTS:
- ${r} items.
- Provide tokens that form exactly the correct answer (lowercase, no period unless required by the topic).
- Use sentences relevant to "${e}".
      `.trim(),user:f(e,"order",r)},short:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "short-${a}-1",
  "type": "short",
  "prompt": "Write short answers about ${e}.",
  "items": [
    { "q": "Write 2–3 sentences about your daily routine.", "keywords": ["i", "usually", "every"] }
  ]
}
REQUIREMENTS:
- ${Math.min(6,Math.max(3,Math.floor(r/2)))} tasks that invite short written responses.
- "keywords" act as guidance, not strict scoring rubrics, and must be lowercase English words.
      `.trim(),user:f(e,"short",r)},open:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "open-${a}-1",
  "type": "open",
  "prompt": "<brief classroom instruction in English>",
  "items": [
    { "situation": "<open-ended question or scenario related to the topic>" }
  ],
  "scoring": {
    "criteria": [
      "<criterion 1>",
      "<criterion 2>",
      "<criterion 3>"
    ]
  }
}
REQUIREMENTS:
- ${Math.max(3,Math.min(10,r))} unique items that require free-form answers.
- Keep each "situation" within 8–14 words, focused on real-life communication linked to "${e}".
- Maintain an A1–A2 learner level and avoid simple yes/no prompts.
- Provide exactly 3 concise scoring criteria phrased for teachers (e.g., "Use two past time expressions").
- Optionally add "example_answers" arrays (1–3 short samples) to model good responses.
- Output JSON only with no surrounding commentary.
      `.trim(),user:f(e,"open",r)},writing:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "writing-${a}-1",
  "type": "writing",
  "prompt": "Short writing task about ${e}.",
  "description": "<1–2 sentences describing the assignment>",
  "checklist": [
    "<criterion 1>",
    "<criterion 2>",
    "<criterion 3>"
  ]
}
REQUIREMENTS:
- Provide a clear English description of the task.
- Include 4–6 checklist items with concrete evaluation criteria.
      `.trim(),user:f(e,"writing",r)},roleplay:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "roleplay-${a}-1",
  "type": "roleplay",
  "prompt": "<short instruction in English>",
  "scenario": {
    "setting": "<where the situation takes place>",
    "summary": "<1–2 sentences describing the task>",
    "roles": [
      {
        "name": "Student 1",
        "goal": "<goal to achieve>",
        "details": "<two facts or prompts>"
      },
      {
        "name": "Student 2",
        "goal": "<goal to achieve>",
        "details": "<two facts or prompts>"
      }
    ],
    "steps": [
      "<step 1>",
      "<step 2>",
      "<step 3>",
      "<step 4>"
    ]
  },
  "phrases": [
    { "phrase": "<useful English phrase>", "translation": "<short explanation or translation in English>" }
  ]
}
REQUIREMENTS:
- The situation must clearly connect to the topic "${e}".
- Exactly two roles: Student 1 and Student 2.
- Provide 3–5 steps describing how the dialogue should develop.
- Include ${Math.max(6,Math.min(10,r))} useful English phrases with brief English explanations or synonyms.
- Do not add bullet symbols inside the strings.
      `.trim(),user:f(e,"roleplay",r)},"dialogue-gap":{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "dialogue-gap-${a}-1",
  "type": "dialogue-gap",
  "prompt": "Fill the blanks in the dialogue using the word bank.",
  "words": ["<word1>", "<word2>", "<word3>"],
  "dialogue": [
    { "speaker": "Student 1", "line": "<Line with one or two ___ blanks>" }
  ],
  "answers": ["<correct word 1>", "<correct word 2>"]
}
REQUIREMENTS:
- ${Math.max(4,Math.min(8,r))} turns in the dialogue.
- Use exactly ${Math.max(4,Math.min(8,r))} blanks "___" across the dialogue.
- "words" must list one entry per blank (repeat words when a blank uses the same word) and contain no unused distractors.
- "answers" must be the same length as "words", list the correct words in blank order, and use only lowercase English words present in "words".
- Keep each line short (maximum 12 words) and on the topic "${e}".
- Do not add extra fields beyond the schema.
      `.trim(),user:f(e,"dialogue-gap",r)},"dialogue-order":{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "dialogue-order-${a}-1",
  "type": "dialogue-order",
  "prompt": "Arrange the dialogue lines in the correct order.",
  "lines": [
    { "speaker": "Student 1", "line": "<Line>" },
    { "speaker": "Student 2", "line": "<Line>" }
  ],
  "solution": [1, 0]
}
REQUIREMENTS:
- ${Math.max(4,Math.min(8,r))} total lines.
- Each line must contain 6–12 words, sound natural, and stay on the topic "${e}".
- "solution" is an array of zero-based indices describing the correct order of the lines.
- Do not add extra fields beyond the schema.
      `.trim(),user:f(e,"dialogue-order",r)},truefalse:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "truefalse-${a}-1",
  "type": "truefalse",
  "prompt": "Decide if each statement is true or false.",
  "items": [
    { "statement": "<short statement>", "answer": true }
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(12,r))} statements.
- "answer" must be strictly true or false.
- Use simple A1–A2 level sentences in English related to "${e}".
      `.trim(),user:f(e,"truefalse",r)},"definition-match":{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "definition-match-${a}-1",
  "type": "definition-match",
  "prompt": "Match the word with its definition.",
  "pairs": [
    { "left": "<word>", "right": "<short definition>" }
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(10,r))} pairs.
- "left" must be a single lowercase word without articles.
- "right" must be one sentence of up to 14 words.
- Use vocabulary connected to the topic "${e}".
      `.trim(),user:f(e,"definition-match",r)},"synonym-clue":{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "synonym-clue-${a}-1",
  "type": "synonym-clue",
  "prompt": "Choose the correct word based on the clue.",
  "wordBank": ["<word1>", "<word2>", "<word3>"],
  "items": [
    { "clue": "<clue>", "answers": ["<correct word>"] }
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(10,r))} items.
- Provide a word bank of 6–8 lowercase English words that includes all correct answers.
- "answers" may contain 1–2 acceptable synonyms, all in lowercase English.
- Write concise clues; omit the final period if the clue is a fragment.
      `.trim(),user:f(e,"synonym-clue",r)},scramble:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "scramble-${a}-1",
  "type": "scramble",
  "prompt": "Unscramble the word.",
  "items": [
    { "scrambled": "<jumbled letters>", "answers": ["<correct word>"] }
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(10,r))} items.
- "scrambled" must be a shuffled version of an English word from "${e}".
- "answers" may list 1–2 valid spellings in lowercase English.
      `.trim(),user:f(e,"scramble",r)},wordpairs:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "wordpairs-${a}-1",
  "type": "wordpairs",
  "prompt": "Match the singular form to the plural form.",
  "pairs": [
    { "left": "<singular>", "right": "<plural>" }
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(10,r))} pairs.
- Use accurate singular/plural pairs relevant to "${e}".
- Do not add extra keys beyond the schema.
      `.trim(),user:f(e,"wordpairs",r)},"odd-one-out":{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "odd-one-out-${a}-1",
  "type": "odd-one-out",
  "prompt": "Find the odd one out.",
  "items": [
    { "options": ["<word1>", "<word2>", "<word3>", "<word4>"], "answer": "2", "explanation": "<reason>" }
  ]
}
REQUIREMENTS:
- ${Math.max(6,Math.min(10,r))} items.
- Provide exactly 4 options per item.
- "answer" must be the index of the odd item as a string ("0"–"3").
- Include a brief English explanation (up to 10 words) for why the option is odd.
- Only one option may be different; the rest must relate to "${e}".
      `.trim(),user:f(e,"odd-one-out",r)},context:{system:`
${o}
OUTPUT SCHEMA:
{
  "id": "context-${a}-1",
  "type": "context",
  "prompt": "<instruction in English>",
  "context": {
    "title": "<2–4 words>",
    "format": "dialog" | "narrative",
    "body": []
  },
  "questions": [
    {
      "q": "<question>",
      "choices": ["<option0>", "<option1>", "<option2>"],
      "answer": ["<index_of_correct_choice_as_string>"]
    },
    ...
  ]
}

REQUIREMENTS:
- Provide ${r} comprehension questions for the passage.
- Keep the text within 200 words using simple A1 English connected to "${e}".
- If "format" is "dialog", use objects {"speaker": "...", "line": "..."}.
- If "format" is "narrative", use an array of short paragraph strings.
- Each question must offer exactly 3 choices and a single correct answer.
- Return the index of the correct choice as a string ("0" | "1" | "2").
- Output only JSON, no extra commentary.

EXAMPLE (FORMAT ONLY; DO NOT COPY CONTENT):
{
  "id": "context-ps-1",
  "type": "context",
  "prompt": "Read the dialogue and choose the correct answer.",
  "context": {
    "title": "Morning Chat",
    "format": "dialog",
    "body": [
      { "speaker": "Emma", "line": "Hi, Leo! Are you ready for school?" },
      { "speaker": "Leo", "line": "Yes, but I can't find my maths book." },
      { "speaker": "Emma", "line": "Check your bag again." }
    ]
  },
  "questions": [
    {
      "q": "What did Leo lose?",
      "choices": ["Pencil case", "Math textbook", "English notebook"],
      "answer": ["1"]
    }
  ]
}`.trim(),user:f(e,"context",r)}},i=s[t]||s.mcq,l=(n.additionalInstructions||n.extraInstructions||"").trim();return l?{system:i.system,user:`${i.user}

Additional teacher instructions:
${l}`}:i}const gt={mcq:10,gap:10,transform:10,match:8,error:10,order:10,short:3,open:4,writing:1,roleplay:8,"dialogue-gap":6,"dialogue-order":6,truefalse:8,"definition-match":8,"synonym-clue":8,scramble:8,wordpairs:8,"odd-one-out":8,context:4};function f(e,t,n){return`Topic: ${e}
Generate a task block of type "${t}" with ${n} items. Return JSON only that follows the described schema.`}function bt(e){return String(e||"task").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,6)||"task"}function xt(e,t){const n=String(e||"").trim(),r=kt(t);return r?`${n||"Generate the task block."}

STRICT VOCABULARY REQUIREMENTS (communication lesson):
1. Treat the target expressions below as the ONLY lexical focus for the task. Every generated item and every correct answer must contain at least one of these expressions verbatim (you may adapt grammar but keep the core phrase).
2. Do not introduce alternative key phrases or synonyms outside this list; supporting words like articles or pronouns are fine, but the highlighted expression must come from the list.
3. When offering distractors or incorrect options, keep them realistic yet stay close to the topic; never invent brand-new key phrases outside the set.
4. The Ukrainian translations are reference only – the final task must remain fully in English.

Target vocabulary:
${r}`:n||e||""}function kt(e){if(!Array.isArray(e)||!e.length)return"";const t=r=>{if(!r)return"";const a=r.indexOf(" — "),o=r.indexOf(" – "),s=r.indexOf(" - "),i=[a,o,s].filter(h=>h>=0),l=i.length?Math.min(...i):-1;return(l>=0?r.slice(0,l):r).trim()},n=e.map((r,a)=>{if(!r)return"";const o=r.word||r.term||r.phrase||r.text||`Item ${a+1}`,s=r.translation||r.meaning||r.ua||r.uk||"",i=r.example||r.sentence||r.usage||r.sample||"",l=t(i);let c=`${a+1}. ${o}`;return s&&(c+=` — ${s}`),l&&(c+=` (Example: ${l})`),c}).filter(Boolean);return n.length?n.join(`
`):""}const Ce=document.querySelector(".js-practice-section"),m=document.querySelector("[data-practice-generator]"),V=m==null?void 0:m.querySelector("[data-practice-status]"),F=document.querySelector("[data-generator-output]"),W=document.querySelector("[data-generator-json]"),P=document.querySelector("[data-generator-copy]"),_=document.querySelector("[data-generator-download]"),D=m==null?void 0:m.querySelector("[data-types]"),v=m==null?void 0:m.querySelector("[data-types-trigger]"),A=m==null?void 0:m.querySelector("[data-types-panel]"),$e=document.querySelector("[data-practice-placeholder]"),E=window.lessonContext||{};let $=E.title||"Generated Practice",M=E.level||"custom";const O=[],Q=[];function N(e){e&&e.classList.add("hidden")}function de(e){e&&e.classList.remove("hidden")}function Oe(e){return!e||e.classList.contains("hidden")}function pe(){return localStorage.getItem("hideGenerateSection")==="true"}function re(){pe()?(N(Ce),N(A),N(F),L()):(de(Ce),oe(),q())}function ae(e){return`${e&&typeof e=="object"&&e.id?String(e.id):String((e==null?void 0:e.type)||"task")}-${Date.now()}-${Math.random().toString(16).slice(2,8)}`}function Ne(){return{title:$||E.title||"Generated Practice",level:M||E.level||"custom",tasks:[...O,...Q].map(e=>e.data)}}function q(){if(W){if(pe()){N(F);return}if(!O.length&&!Q.length){W.textContent="",N(F),P&&(P.disabled=!0),_&&(_.disabled=!0);return}W.textContent=JSON.stringify(Ne(),null,2),de(F),P&&(P.disabled=!1),_&&(_.disabled=!1)}}function Et(e){const t=ae(e);return Q.push({key:t,data:e}),q(),t}function Tt(e,t){const n=a=>{const o=a.findIndex(s=>e&&s.key===e||s.data===t);return o!==-1?(a.splice(o,1),!0):!1};(n(Q)||n(O))&&q()}function vt(){if(!m)return;const e=m.querySelector('[name="topic"]');if(e&&!e.value){const t=E.title||"Lesson topic";e.value=t}}function T(e,t="idle"){V&&(V.textContent=e,V.dataset.state=t)}function St(e){return String(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,8)}function X(e){return String(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function me(){return Array.from(m.querySelectorAll('input[name="types"]'))}function It(e){const t=e.filter(n=>n.checked).map(n=>{var r,a;return(a=(r=n.nextElementSibling)==null?void 0:r.textContent)==null?void 0:a.trim()}).filter(Boolean);return t.length?t.length<=2?t.join(", "):`${t.slice(0,2).join(", ")} +${t.length-2}`:"Оберіть типи"}function oe(){if(!v)return;const e=me();v.textContent=It(e)}function L(){!A||!v||Oe(A)||(N(A),v.setAttribute("aria-expanded","false"))}function Ct(){if(!A||!v)return;if(Oe(A)){de(A),v.setAttribute("aria-expanded","true");const t=A.querySelector('input[name="types"]');t==null||t.focus({preventScroll:!0})}else L()}function $t(){const e=!pe();localStorage.setItem("hideGenerateSection",String(e)),re(),q()}function Mt(){const e=document.getElementById("practice"),t=e==null?void 0:e.querySelector("#practice-body");if($e&&$e.remove(),t&&t.children.length===1){const n=t.firstElementChild;n&&/практика поки відсутня/i.test(n.textContent||"")&&n.remove()}}function At(){const e=document.getElementById("practice");if(!e)return;const t=e.querySelector("#practice-body");if(t&&!t.querySelector(".practice-dynamic-title")){const n=document.createElement("div");n.className="practice-dynamic-title",n.innerHTML=`
      <h2>Згенеровані завдання</h2>
      ${E.level?`<p class="muted">Рівень: ${E.level}</p>`:""}
    `,t.prepend(n)}}async function Ut(e){var x,y;if(e.preventDefault(),!m)return;const t=m.querySelector('button[type="submit"]'),n=m.querySelector('[name="topic"]'),r=m.querySelector('[name="count"]'),a=m.querySelector('[name="instructions"]'),o=me(),s=(x=n==null?void 0:n.value)==null?void 0:x.trim(),i=Number.parseInt((r==null?void 0:r.value)||"10",10)||10,l=((y=a==null?void 0:a.value)==null?void 0:y.trim())||"",c=o.filter(d=>d.checked).map(d=>d.value);if(!s){T("Укажіть тему для генерації завдання.","error"),n==null||n.focus();return}if(!c.length&&typeof L=="function"){T("Оберіть принаймні один тип завдання.","error");return}const h=St(s)||"task";T(`Генеруємо ${c.length} тип(и) завдань…`,"loading"),t&&(t.disabled=!0,t.dataset.originalText=t.dataset.originalText||t.textContent,t.textContent="Генерація…"),String(E.category||"").toLowerCase();const b=void 0;try{const d=c.map(g=>ft(s,g,{items:i,language:"en",seedId:`${h}-${g}`,...l?{additionalInstructions:l}:{}},b).then(C=>({type:g,task:C}))),u=await Promise.allSettled(d),I=u.map((g,C)=>g.status==="fulfilled"?{type:c[C],task:g.value.task}:null).filter(Boolean),j=u.map((g,C)=>g.status==="rejected"?c[C]:null).filter(Boolean);if(!I.length)throw new Error("Не вдалося згенерувати жодного типу завдань");const z=[];I.forEach(({type:g,task:C})=>{const B={...C};B.id||(B.id=`${g}-${h}-${Date.now().toString(36)}${Math.random().toString(36).slice(2,6)}`);const qe=Et(B);z.push({task:B,key:qe})}),Mt(),window.practice&&typeof window.practice.appendTask=="function"&&(At(),z.forEach(({task:g,key:C})=>{window.practice.appendTask(g,{key:C})})),L();const ue=I.map(({type:g})=>g).join(", ");j.length?T(`Згенеровано: ${ue}. Помилки: ${j.join(", ")}`,"success"):T(`Готово! Додано ${I.length} блок(и): ${ue}.`,"success")}catch(d){console.error(d);const u=d instanceof Error&&d.message?`Помилка: ${d.message}`:"Не вдалося згенерувати завдання. Перевірте токен або спробуйте ще раз.";T(u,"error")}finally{if(t){const d=t.dataset.originalText||"Згенерувати завдання";t.disabled=!1,t.textContent=d}}}async function Lt(){if(!W)return;const e=W.textContent;if(e)try{await navigator.clipboard.writeText(e),T("JSON скопійовано у буфер.","success")}catch(t){console.error(t),T("Не вдалося скопіювати JSON. Спробуйте вручну.","error")}}function Pt(e){return`${X(E.id)||X(e.title)||X(E.title)||"practice"||"practice"}.json`}async function _t(){const e=Ne(),t=JSON.stringify(e,null,2);if(!t||t==="{}"||t==="[]"){T("Немає даних для завантаження.","error");return}try{const n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=Pt(e),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),T("Файл завантажено.","success")}catch(n){console.error(n),T("Не вдалося завантажити файл.","error")}}function Ot(){if(m){if(vt(),m.addEventListener("submit",Ut),P&&(P.addEventListener("click",Lt),P.disabled=!0),_&&(_.addEventListener("click",_t),_.disabled=!0),v&&A&&D){v.setAttribute("aria-haspopup","true"),v.setAttribute("aria-expanded","false"),v.addEventListener("click",()=>{Ct()});const e=n=>{D.contains(n.target)||L()};document.addEventListener("pointerdown",e);const t=n=>{const r=n.relatedTarget;(!r||!D.contains(r))&&L()};D.addEventListener("focusout",t),document.addEventListener("keydown",n=>{n.key==="Escape"&&(L(),v.focus())}),me().forEach(n=>{n.addEventListener("change",()=>{oe()})}),oe(),m.addEventListener("submit",()=>{L()})}document.addEventListener("practice:taskRemoved",e=>{const t=e.detail||{};Tt(t.key,t.task)}),document.addEventListener("practice:dataLoaded",e=>{const t=e.detail;O.length=0,t&&Array.isArray(t.entries)?($=t.title??$,M=t.level??M,t.entries.forEach(({task:n,key:r})=>{const a=r||ae(n);O.push({key:a,data:n})})):t&&Array.isArray(t.tasks)?($=t.title??$,M=t.level??M,t.tasks.forEach(n=>{const r=n&&n.id?String(n.id):ae(n);O.push({key:r,data:n})})):t?($=t.title??$,M=t.level??M):($=E.title||$,M=E.level||M),q(),re()}),re(),q(),document.addEventListener("keydown",e=>{e.code&&e.code==="KeyH"&&e.ctrlKey&&e.shiftKey&&(e.preventDefault(),$t())})}}Ot();
//# sourceMappingURL=lesson.js.map
