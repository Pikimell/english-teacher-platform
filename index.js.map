{"version":3,"file":"index.js","sources":["../src/scripts/main.js"],"sourcesContent":["import { lessons, lessonCategories } from '../data/lessons.js';\n\nconst state = {\n  search: '',\n  category: 'all',\n  level: 'all',\n};\n\nconst searchInput = document.querySelector('[data-filter=\"search\"]');\nconst levelSelect = document.querySelector('[data-filter=\"level\"]');\nconst categoryButtons = Array.from(document.querySelectorAll('[data-category]'));\nconst grids = {\n  grammar: document.querySelector('[data-category-grid=\"grammar\"]'),\n  communication: document.querySelector('[data-category-grid=\"communication\"]'),\n  quick: document.querySelector('[data-category-grid=\"quick\"]'),\n};\nconst sections = {\n  grammar: document.querySelector('[data-category-section=\"grammar\"]'),\n  communication: document.querySelector('[data-category-section=\"communication\"]'),\n  quick: document.querySelector('[data-category-section=\"quick\"]'),\n};\nconst emptyMessages = {\n  grammar: document.querySelector('[data-category-empty=\"grammar\"]'),\n  communication: document.querySelector('[data-category-empty=\"communication\"]'),\n  quick: document.querySelector('[data-category-empty=\"quick\"]'),\n};\nconst stats = {\n  total: document.querySelector('[data-stat-total]'),\n  grammar: document.querySelector('[data-stat-grammar]'),\n  communication: document.querySelector('[data-stat-communication]'),\n  quick: document.querySelector('[data-stat-quick]'),\n};\n\nfunction normaliseValue(value) {\n  return value.trim().toLowerCase();\n}\n\nfunction updateCategoryButtons() {\n  categoryButtons.forEach((button) => {\n    const isActive = button.dataset.category === state.category;\n    const isAll = button.dataset.category === 'all';\n    const active = isAll ? state.category === 'all' : isActive;\n    button.classList.toggle('chip--filled', active);\n    button.setAttribute('aria-pressed', String(active));\n  });\n}\n\nfunction createCardTemplate(lesson) {\n  const categoryLabel = lessonCategories[lesson.category]?.label ?? lesson.category;\n  const link = `lesson.html?topic=${encodeURIComponent(lesson.id)}&category=${encodeURIComponent(lesson.category)}&level=${encodeURIComponent(lesson.level)}&title=${encodeURIComponent(lesson.title)}&file=${encodeURIComponent(lesson.htmlPath)}`;\n  const tags = Array.isArray(lesson.tags) ? lesson.tags : [];\n\n  return `\n    <article class=\"lesson-card\" data-lesson-id=\"${lesson.id}\" data-category=\"${lesson.category}\" data-level=\"${lesson.level}\">\n      <a class=\"lesson-card__link\" href=\"${link}\">\n        <div class=\"lesson-card__meta\">\n          <span class=\"lesson-card__category\">${categoryLabel}</span>\n          <span class=\"lesson-card__level\" aria-label=\"Рівень\">${lesson.level}</span>\n        </div>\n        <h3 class=\"lesson-card__title\">${lesson.title}</h3>\n        <p class=\"lesson-card__description\">${lesson.description}</p>\n        ${tags.length ? `<ul class=\"lesson-card__tags\">${tags.map((tag) => `<li>${tag}</li>`).join('')}</ul>` : ''}\n        <span class=\"lesson-card__cta\">Перейти до матеріалу</span>\n      </a>\n    </article>\n  `;\n}\n\nfunction filterLessons() {\n  const searchTerm = normaliseValue(state.search);\n  const matches = lessons.filter((lesson) => {\n    const matchesCategory = state.category === 'all' || lesson.category === state.category;\n    const matchesLevel = state.level === 'all' || lesson.level === state.level;\n\n    if (!searchTerm) {\n      return matchesCategory && matchesLevel;\n    }\n\n    const haystack = [lesson.title, lesson.description, ...(lesson.tags ?? [])]\n      .filter(Boolean)\n      .map((value) => normaliseValue(String(value)));\n\n    const matchesSearch = haystack.some((value) => value.includes(searchTerm));\n\n    return matchesCategory && matchesLevel && matchesSearch;\n  });\n\n  return matches.reduce(\n    (acc, lesson) => {\n      acc[lesson.category]?.push(lesson);\n      return acc;\n    },\n    {\n      grammar: [],\n      communication: [],\n      quick: [],\n    },\n  );\n}\n\nfunction renderLessons() {\n  const groupedLessons = filterLessons();\n\n  Object.entries(groupedLessons).forEach(([category, items]) => {\n    const grid = grids[category];\n    const emptyMessage = emptyMessages[category];\n    const section = sections[category];\n\n    if (!grid || !emptyMessage || !section) return;\n\n    grid.innerHTML = items.map(createCardTemplate).join('');\n    const isEmpty = items.length === 0;\n    emptyMessage.hidden = !isEmpty;\n    if (isEmpty) {\n      grid.setAttribute('data-empty', 'true');\n    } else {\n      grid.removeAttribute('data-empty');\n    }\n\n    const shouldHideSection = state.category !== 'all' && state.category !== category;\n    section.hidden = shouldHideSection;\n  });\n}\n\nfunction setStats() {\n  if (stats.total) stats.total.textContent = String(lessons.length);\n  if (stats.grammar) stats.grammar.textContent = String(lessons.filter((lesson) => lesson.category === 'grammar').length);\n  if (stats.communication) stats.communication.textContent = String(lessons.filter((lesson) => lesson.category === 'communication').length);\n  if (stats.quick) stats.quick.textContent = String(lessons.filter((lesson) => lesson.category === 'quick').length);\n}\n\nfunction handleSearch(event) {\n  state.search = event.target.value;\n  renderLessons();\n}\n\nfunction handleLevelChange(event) {\n  state.level = event.target.value;\n  renderLessons();\n}\n\nfunction handleCategoryClick(event) {\n  const category = event.currentTarget.dataset.category;\n  if (!category) return;\n\n  state.category = category;\n  updateCategoryButtons();\n  renderLessons();\n}\n\nfunction setCurrentYear() {\n  const currentYearElement = document.querySelector('[data-component=\"copyright-year\"]');\n  if (!currentYearElement) return;\n  currentYearElement.textContent = String(new Date().getFullYear());\n}\n\nfunction init() {\n  setStats();\n  updateCategoryButtons();\n  renderLessons();\n  setCurrentYear();\n\n  if (searchInput) {\n    searchInput.addEventListener('input', handleSearch);\n  }\n\n  if (levelSelect) {\n    levelSelect.addEventListener('change', handleLevelChange);\n  }\n\n  categoryButtons.forEach((button) => {\n    button.addEventListener('click', handleCategoryClick);\n  });\n}\n\ninit();\n"],"names":["state","searchInput","levelSelect","categoryButtons","grids","sections","emptyMessages","stats","normaliseValue","value","updateCategoryButtons","button","isActive","active","createCardTemplate","lesson","categoryLabel","_a","lessonCategories","link","tags","tag","filterLessons","searchTerm","lessons","matchesCategory","matchesLevel","matchesSearch","acc","renderLessons","groupedLessons","category","items","grid","emptyMessage","section","isEmpty","shouldHideSection","setStats","handleSearch","event","handleLevelChange","handleCategoryClick","setCurrentYear","currentYearElement","init"],"mappings":"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"}