{"version":3,"file":"revision-lessons.js","sources":["../src/features/revision-tests/revision-tests-list.js"],"sourcesContent":["import { getAllRevisionTests } from './revision-tests-registry.js';\n\nfunction escapeHtml(value) {\n  return String(value ?? '')\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction formatMeta(test) {\n  const parts = [];\n\n  if (Number.isFinite(test.duration) && test.duration > 0) {\n    parts.push(`~${test.duration} хв`);\n  }\n\n  const taskCount = Array.isArray(test.tasks) ? test.tasks.length : 0;\n  if (taskCount) {\n    parts.push(`${taskCount} завдань`);\n  }\n\n  return parts.join(' · ');\n}\n\nfunction renderTags(tags) {\n  if (!Array.isArray(tags) || !tags.length) {\n    return '';\n  }\n\n  const safeTags = tags\n    .map(tag => (typeof tag === 'string' ? tag.trim() : ''))\n    .filter(Boolean);\n\n  if (!safeTags.length) return '';\n\n  return `<ul class=\"lesson-card__tags\">${safeTags\n    .map(tag => `<li>${escapeHtml(tag)}</li>`)\n    .join('')}</ul>`;\n}\n\nfunction createTestCard(test) {\n  const description = escapeHtml(test.description || '');\n  const metaLine = formatMeta(test);\n  const tags = renderTags(test.tags);\n\n  return `\n    <article class=\"lesson-card lesson-card--revision\" data-test-slug=\"${escapeHtml(\n      test.slug\n    )}\">\n      <a class=\"lesson-card__link\" href=\"revision-test.html?test=${encodeURIComponent(\n        test.slug\n      )}\">\n        <div class=\"lesson-card__meta\">\n          <span class=\"lesson-card__category\">Контрольна</span>\n          ${\n            test.level\n              ? `<span class=\"lesson-card__level\">${escapeHtml(test.level)}</span>`\n              : ''\n          }\n        </div>\n        <h3 class=\"lesson-card__title\">${escapeHtml(test.title)}</h3>\n        <p class=\"lesson-card__description\">${\n          description || 'Опис ще не додано.'\n        }</p>\n        ${metaLine ? `<p class=\"lesson-card__description\">${metaLine}</p>` : ''}\n        ${tags}\n        <span class=\"lesson-card__cta\">Перейти до завдань</span>\n      </a>\n    </article>\n  `;\n}\n\nfunction renderRevisionTests() {\n  const grid = document.querySelector('[data-tests-grid]');\n  const emptyState = document.querySelector('[data-tests-empty]');\n\n  if (!grid || !emptyState) return;\n\n  const tests = getAllRevisionTests();\n  const hasTests = tests.length > 0;\n\n  if (!hasTests) {\n    grid.innerHTML = '';\n    grid.setAttribute('data-empty', 'true');\n    emptyState.hidden = false;\n    return;\n  }\n\n  const cardsMarkup = tests.map(createTestCard).join('');\n  grid.innerHTML = cardsMarkup;\n  grid.removeAttribute('data-empty');\n  emptyState.hidden = true;\n}\n\nrenderRevisionTests();\nconst footerYear = document.querySelector('[data-component=\"copyright-year\"]');\nif (footerYear) {\n  footerYear.textContent = String(new Date().getFullYear());\n}\n"],"names":["escapeHtml","value","formatMeta","test","parts","taskCount","renderTags","tags","safeTags","tag","createTestCard","description","metaLine","renderRevisionTests","grid","emptyState","tests","getAllRevisionTests","cardsMarkup","footerYear"],"mappings":"mGAEA,SAASA,EAAWC,EAAO,CACzB,OAAO,OAAOA,GAAS,EAAE,EACtB,QAAQ,KAAM,OAAO,EACrB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,QAAQ,EACtB,QAAQ,KAAM,OAAO,CAC1B,CAEA,SAASC,EAAWC,EAAM,CACxB,MAAMC,EAAQ,CAAA,EAEV,OAAO,SAASD,EAAK,QAAQ,GAAKA,EAAK,SAAW,GACpDC,EAAM,KAAK,IAAID,EAAK,QAAQ,KAAK,EAGnC,MAAME,EAAY,MAAM,QAAQF,EAAK,KAAK,EAAIA,EAAK,MAAM,OAAS,EAClE,OAAIE,GACFD,EAAM,KAAK,GAAGC,CAAS,UAAU,EAG5BD,EAAM,KAAK,KAAK,CACzB,CAEA,SAASE,EAAWC,EAAM,CACxB,GAAI,CAAC,MAAM,QAAQA,CAAI,GAAK,CAACA,EAAK,OAChC,MAAO,GAGT,MAAMC,EAAWD,EACd,IAAIE,GAAQ,OAAOA,GAAQ,SAAWA,EAAI,KAAI,EAAK,EAAG,EACtD,OAAO,OAAO,EAEjB,OAAKD,EAAS,OAEP,iCAAiCA,EACrC,IAAIC,GAAO,OAAOT,EAAWS,CAAG,CAAC,OAAO,EACxC,KAAK,EAAE,CAAC,QAJkB,EAK/B,CAEA,SAASC,EAAeP,EAAM,CAC5B,MAAMQ,EAAcX,EAAWG,EAAK,aAAe,EAAE,EAC/CS,EAAWV,EAAWC,CAAI,EAC1BI,EAAOD,EAAWH,EAAK,IAAI,EAEjC,MAAO;AAAA,yEACgEH,EACnEG,EAAK,IACX,CAAK;AAAA,mEAC8D,mBAC3DA,EAAK,IACb,CAAO;AAAA;AAAA;AAAA,YAIKA,EAAK,MACD,oCAAoCH,EAAWG,EAAK,KAAK,CAAC,UAC1D,EACL;AAAA;AAAA,yCAE8BH,EAAWG,EAAK,KAAK,CAAC;AAAA,8CAErDQ,GAAe,oBAChB;AAAA,UACCC,EAAW,uCAAuCA,CAAQ,OAAS,EAAE;AAAA,UACrEL,CAAI;AAAA;AAAA;AAAA;AAAA,GAKd,CAEA,SAASM,GAAsB,CAC7B,MAAMC,EAAO,SAAS,cAAc,mBAAmB,EACjDC,EAAa,SAAS,cAAc,oBAAoB,EAE9D,GAAI,CAACD,GAAQ,CAACC,EAAY,OAE1B,MAAMC,EAAQC,IAGd,GAAI,EAFaD,EAAM,OAAS,GAEjB,CACbF,EAAK,UAAY,GACjBA,EAAK,aAAa,aAAc,MAAM,EACtCC,EAAW,OAAS,GACpB,MACD,CAED,MAAMG,EAAcF,EAAM,IAAIN,CAAc,EAAE,KAAK,EAAE,EACrDI,EAAK,UAAYI,EACjBJ,EAAK,gBAAgB,YAAY,EACjCC,EAAW,OAAS,EACtB,CAEAF,IACA,MAAMM,EAAa,SAAS,cAAc,mCAAmC,EACzEA,IACFA,EAAW,YAAc,OAAO,IAAI,KAAM,EAAC,YAAW,CAAE"}