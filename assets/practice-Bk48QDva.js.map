{"version":3,"file":"practice-Bk48QDva.js","sources":["../../src/api/homework.js","../../src/api/user.js","../../src/features/practice/practice.js"],"sourcesContent":["import axios from './axiosInstance.js';\n\nexport const getUserHomework = async data => {\n  const res = await axios.post('/homework/list', data);\n  return res.data;\n};\n\nexport const addHomework = async homework => {\n  const res = await axios.post('/homework', homework);\n  return res.data;\n};\n\nexport const getUserHomeworkLessons = async userEmail => {\n  const params = {\n    page: 1,\n    limit: 100,\n    userEmail,\n  };\n\n  const res = await axios.post('/homework/lessons', params);\n  const { data } = res;\n\n  data.items = data.items.reverse();\n  return data.items;\n};\n","import axios from './axiosInstance.js';\n\nexport const getUsers = async (page = 1, limit = 1000) => {\n  const res = await axios.get('/user');\n  return res.data;\n  /* \n  items - це масив з студентами. У кожного студента є властивість email\n  */\n};\n","// Lightweight practice renderer for topic pages\n\nimport { addHomework } from '@api/homework.js';\nimport { getUsers } from '@api/user.js';\nimport { auth } from '@features/auth/auth.js';\n\n// Convention: for page /X/indexN.html → fetch /X/practice/indexN.json\nconst practiceAPI = (function () {\n  const basePath =\n    (typeof import.meta !== 'undefined' &&\n      import.meta.env &&\n      import.meta.env.BASE_URL) ||\n    '/';\n\n  function resolveAssetPath(path) {\n    const normalizedBase = basePath.endsWith('/') ? basePath : `${basePath}/`;\n    const rawPath = String(path || '');\n    if (/^[a-z]+:/i.test(rawPath)) return rawPath;\n    if (rawPath.startsWith(normalizedBase)) return rawPath;\n    return `${normalizedBase}${rawPath.replace(/^\\/+/, '')}`;\n  }\n\n  function derivePracticePath() {\n    try {\n      const url = new URL(window.location.href);\n      const parts = url.pathname.split('/');\n      let file = parts.pop();\n      if (!file || !/\\.html?$/i.test(file)) file = 'index.html';\n      const json = file.replace(/\\.html?$/i, '.json');\n      parts.push('practice', json);\n      return parts.join('/');\n    } catch (e) {\n      return null;\n    }\n  }\n\n  function el(tag, attrs = {}, ...children) {\n    const node = document.createElement(tag);\n    for (const [k, v] of Object.entries(attrs || {})) {\n      if (k === 'class') node.className = v;\n      else if (k === 'html') node.innerHTML = v;\n      else if (k.startsWith('on') && typeof v === 'function')\n        node.addEventListener(k.slice(2), v);\n      else node.setAttribute(k, v);\n    }\n    for (const ch of children) {\n      if (ch == null) continue;\n      node.appendChild(\n        typeof ch === 'string' ? document.createTextNode(ch) : ch\n      );\n    }\n    return node;\n  }\n\n  function shuffle(arr) {\n    const a = arr.slice();\n    for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n  }\n\n  function normalize(s) {\n    return String(s || '')\n      .trim()\n      .toLowerCase()\n      .replace(/\\s+/g, ' ');\n  }\n\n  const shareState = {\n    users: null,\n    request: null,\n    active: null,\n  };\n\n  function fetchStudents() {\n    if (shareState.users) return Promise.resolve(shareState.users);\n    if (shareState.request) return shareState.request;\n\n    shareState.request = getUsers()\n      .then(data => {\n        const items = Array.isArray(data?.items) ? data.items : [];\n        shareState.users = items;\n        return items;\n      })\n      .catch(error => {\n        console.error('Не вдалося завантажити список студентів', error);\n        throw error;\n      })\n      .finally(() => {\n        shareState.request = null;\n      });\n    return shareState.request;\n  }\n\n  function formatStudentName(student) {\n    if (!student || typeof student !== 'object') return 'Невідомий студент';\n    const possibleFirst =\n      student.firstName || student.firstname || student.nameFirst || '';\n    const possibleLast =\n      student.lastName || student.lastname || student.nameLast || '';\n    const full = [possibleFirst, possibleLast]\n      .map(part => String(part || '').trim())\n      .filter(Boolean)\n      .join(' ');\n    const display =\n      full ||\n      student.displayName ||\n      student.fullName ||\n      student.username ||\n      student.email ||\n      (student.id ? `ID ${student.id}` : '');\n    return display || 'Без імені';\n  }\n\n  function closeActiveSharePanel() {\n    if (!shareState.active) return;\n    const { panel, button } = shareState.active;\n    panel.style.display = 'none';\n    panel.dataset.open = 'false';\n    button.setAttribute('aria-expanded', 'false');\n    shareState.active = null;\n  }\n\n  const shareControls = new Set();\n  let canShareTasks = false;\n\n  function applyShareVisibility(control) {\n    const { button, panel } = control;\n    if (!button || !panel) return;\n    if (!button.isConnected && !panel.isConnected) {\n      shareControls.delete(control);\n      return;\n    }\n    if (canShareTasks) {\n      button.hidden = false;\n      return;\n    }\n    button.hidden = true;\n    panel.style.display = 'none';\n    panel.dataset.open = 'false';\n  }\n\n  function registerShareControl(button, panel) {\n    const control = { button, panel };\n    shareControls.add(control);\n    applyShareVisibility(control);\n    return () => {\n      shareControls.delete(control);\n    };\n  }\n\n  function setShareAvailability(isAllowed) {\n    const next = Boolean(isAllowed);\n    if (canShareTasks === next) return;\n    canShareTasks = next;\n    if (!canShareTasks) {\n      closeActiveSharePanel();\n    }\n    shareControls.forEach(control => applyShareVisibility(control));\n  }\n\n  auth.subscribe(({ user }) => {\n    setShareAvailability(auth.isAdmin(user));\n  });\n\n  function handleOutsideShareClick(event) {\n    if (!shareState.active) return;\n    const { panel, button } = shareState.active;\n    const target = event.target;\n    if (panel.contains(target) || button.contains(target)) return;\n    closeActiveSharePanel();\n  }\n\n  function handleShareKeydown(event) {\n    if (event.key === 'Escape') {\n      closeActiveSharePanel();\n    }\n  }\n\n  function renderStudentOptions(panel, students, task) {\n    panel.innerHTML = '';\n    if (!students.length) {\n      panel.appendChild(\n        el(\n          'div',\n          {\n            class: 'muted',\n            style: 'font-size:13px;text-align:center;padding:12px 8px;',\n          },\n          'Список студентів порожній'\n        )\n      );\n      return;\n    }\n    const list = el('ul', {\n      style:\n        'list-style:none;margin:0;padding:0;max-height:220px;overflow:auto;',\n    });\n    students.forEach(student => {\n      const button = el(\n        'button',\n        {\n          type: 'button',\n          style:\n            'width:100%;background:transparent;border:none;text-align:left;padding:8px 10px;border-radius:8px;cursor:pointer;display:flex;flex-direction:column;gap:2px;',\n          onmouseenter: () => {\n            button.style.backgroundColor = '#f1f5f9';\n          },\n          onmouseleave: () => {\n            button.style.backgroundColor = 'transparent';\n          },\n          onclick: () => {\n            const lessonId = window.location.search.slice(8);\n            const lessonName = document.querySelector('h1').textContent;\n\n            console.log(lessonId);\n\n            const homework = {\n              lessonId,\n              userEmail: student.email,\n              lessonName,\n              homeworkType: 'task',\n              homeworkData: JSON.stringify(task),\n            };\n\n            addHomework(homework);\n\n            closeActiveSharePanel();\n          },\n        },\n        el(\n          'span',\n          { style: 'font-size:14px;font-weight:600;color:#0f172a;' },\n          formatStudentName(student)\n        ),\n        student.email\n          ? el(\n              'span',\n              { class: 'muted', style: 'font-size:12px;color:#475569;' },\n              student.email\n            )\n          : null\n      );\n      const item = el('li', { style: 'margin:0;padding:0;' }, button);\n      list.appendChild(item);\n    });\n    panel.appendChild(list);\n  }\n\n  function createSharePanel() {\n    return el('div', {\n      class: 'practice-share-panel',\n      role: 'dialog',\n      'aria-label': 'Надсилання завдання студенту',\n      style:\n        'position:absolute;top:38px;right:0;min-width:240px;max-width:280px;border:1px solid #e2e8f0;border-radius:12px;background:#fff;box-shadow:0 18px 40px rgba(15,23,42,0.18);padding:8px;z-index:30;display:none;',\n      'data-open': 'false',\n    });\n  }\n\n  function toggleSharePanel(button, panel, task) {\n    const isOpen = panel.dataset.open === 'true';\n    if (isOpen) {\n      closeActiveSharePanel();\n      return;\n    }\n    if (shareState.active && shareState.active.panel !== panel) {\n      closeActiveSharePanel();\n    }\n    panel.dataset.open = 'true';\n    panel.style.display = 'block';\n    button.setAttribute('aria-expanded', 'true');\n    panel.innerHTML = '';\n    panel.appendChild(\n      el(\n        'div',\n        {\n          class: 'muted',\n          style: 'font-size:13px;padding:12px 8px;text-align:center;',\n        },\n        'Завантаження…'\n      )\n    );\n    shareState.active = { panel, button };\n    fetchStudents()\n      .then(students => {\n        renderStudentOptions(panel, students, task);\n      })\n      .catch(() => {\n        panel.innerHTML = '';\n        panel.appendChild(\n          el(\n            'div',\n            {\n              style:\n                'color:#ef4444;font-size:13px;text-align:center;padding:12px 8px;',\n            },\n            'Не вдалося завантажити студентів. Спробуйте ще раз.'\n          )\n        );\n      });\n  }\n\n  function createShareButton(task) {\n    const panel = createSharePanel();\n    const button = el(\n      'button',\n      {\n        type: 'button',\n        class: 'practice-share-trigger for-admin js-share-homework-btn',\n        title: 'Надіслати студенту',\n        'aria-haspopup': 'dialog',\n        'aria-expanded': 'false',\n        style:\n          'border:none;background:#2563eb;color:#fff;padding:4px 10px;border-radius:999px;font-size:12px;line-height:1;cursor:pointer;box-shadow:0 4px 12px rgba(37,99,235,0.24);',\n        onclick: event => {\n          event.preventDefault();\n          toggleSharePanel(button, panel, task);\n        },\n      },\n      'Надіслати'\n    );\n    return { button, panel };\n  }\n\n  document.addEventListener('click', handleOutsideShareClick);\n  document.addEventListener('keydown', handleShareKeydown);\n\n  // Subtle hint toggle: hidden by default, shown on small button click\n  function makeHint(hintText) {\n    const wrap = el('div', { class: 'hint-wrap', style: 'margin-top:6px;' });\n    const btn = el(\n      'button',\n      {\n        type: 'button',\n        class: 'hint-toggle',\n        'aria-label': 'Показати підказку',\n        title: 'Підказка',\n        style:\n          'border:none;background:transparent;color:#94a3b8;cursor:pointer;padding:0;font-size:14px;line-height:1;',\n      },\n      '?'\n    );\n    const box = el(\n      'div',\n      {\n        class: 'hint-box muted',\n        style: 'display:none;margin-top:6px;color:#475569;',\n      },\n      `Підказка: ${hintText}`\n    );\n    btn.addEventListener('click', () => {\n      const isHidden = box.style.display === 'none';\n      box.style.display = isHidden ? 'block' : 'none';\n      btn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');\n    });\n    wrap.appendChild(btn);\n    wrap.appendChild(box);\n    return wrap;\n  }\n\n  function renderMCQ(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Choose the correct option')\n    );\n    const blocks = [];\n    (task.items || []).forEach((item, idx) => {\n      const name = `${task.id || 'mcq'}-${idx}`;\n      const allowMulti = Array.isArray(item.answer) && item.answer.length > 1;\n      const block = el(\n        'div',\n        {\n          class: 'mcq-item',\n          style:\n            'margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n        },\n        el(\n          'div',\n          { class: 'q', style: 'margin-bottom:8px;font-weight:600;' },\n          item.q\n        )\n      );\n      (item.choices || []).forEach((choice, cIdx) => {\n        const id = `${name}-${cIdx}`;\n        const lbl = el(\n          'label',\n          {\n            for: id,\n            style: 'display:flex;align-items:center;gap:8px;margin:4px 0;',\n          },\n          el('input', {\n            type: allowMulti ? 'checkbox' : 'radio',\n            name,\n            id,\n            value: String(cIdx),\n          }),\n          el('span', {}, choice)\n        );\n        block.appendChild(lbl);\n      });\n      if (item.explanation) {\n        block.appendChild(\n          el(\n            'div',\n            {\n              class: 'exp muted',\n              style: 'display:none;margin-top:6px;color:#475569;',\n            },\n            item.explanation\n          )\n        );\n      }\n      blocks.push({ block, item, name });\n      container.appendChild(block);\n    });\n    const result = el('div', {\n      class: 'result',\n      style: 'margin-top:8px;font-weight:600;',\n    });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      blocks.forEach(({ block, item, name }) => {\n        const answers = Array.isArray(item.answer)\n          ? item.answer.map(String)\n          : [String(item.answer)];\n        const inputs = Array.from(\n          block.querySelectorAll(`input[name='${name}']`)\n        );\n        const picked = inputs\n          .filter(i => i.checked)\n          .map(i => i.value)\n          .sort();\n        const expected = answers.slice().sort();\n        const ok =\n          picked.length === expected.length &&\n          picked.every((v, i) => v === expected[i]);\n        block.style.borderColor = ok ? '#10b981' : '#ef4444';\n        const exp = block.querySelector('.exp');\n        if (exp) exp.style.display = ok ? 'none' : 'block';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${blocks.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderGap(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Fill the gaps'));\n    const items = [];\n    (task.items || []).forEach((it, idx) => {\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      const parts = String(it.q || '').split(/___/);\n      const input = el('input', {\n        type: 'text',\n        style: 'padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n      });\n      if (parts.length > 1) {\n        row.appendChild(el('span', {}, parts[0]));\n        row.appendChild(input);\n        row.appendChild(el('span', {}, parts.slice(1).join('___')));\n      } else {\n        row.appendChild(\n          el('div', { style: 'margin-bottom:6px;font-weight:600;' }, it.q)\n        );\n        row.appendChild(input);\n      }\n      if (it.hint) row.appendChild(makeHint(it.hint));\n      items.push({\n        row,\n        input,\n        answers: (it.answer || []).map(a => normalize(a)),\n      });\n      container.appendChild(row);\n    });\n    const result = el('div', { style: 'margin-top:8px;font-weight:600;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      items.forEach(({ row, input, answers }) => {\n        const val = normalize(input.value);\n        const ok = answers.includes(val);\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${items.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderMatch(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Match pairs'));\n    const pairs = task.pairs || [];\n    const rights = shuffle(pairs.map(p => p.right));\n    const rows = [];\n    pairs.forEach(p => {\n      const select = el(\n        'select',\n        {\n          style: 'padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n        },\n        el('option', { value: '' }, '— обери —'),\n        ...rights.map(r => el('option', { value: r }, r))\n      );\n      const row = el(\n        'div',\n        {\n          style:\n            'display:flex;align-items:center;gap:10px;margin:8px 0;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n        },\n        el('div', { style: 'min-width:160px;font-weight:600;' }, p.left),\n        select\n      );\n      rows.push({ row, select, right: p.right });\n      container.appendChild(row);\n    });\n    const result = el('div', { style: 'margin-top:8px;font-weight:600;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      rows.forEach(({ row, select, right }) => {\n        const ok = select.value === right;\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${rows.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderContext(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Прочитайте текст та дайте відповіді')\n    );\n\n    const context = task.context || {};\n    const format = String(context.format || 'narrative').toLowerCase();\n    const body = Array.isArray(context.body) ? context.body : [];\n    const textWrap = el('div', {\n      style:\n        'margin:12px 0;padding:14px;border:1px solid #cbd5e1;border-radius:10px;background:#f8fafc;',\n    });\n\n    if (context.title) {\n      textWrap.appendChild(\n        el('h4', { style: 'margin:0 0 8px;font-size:18px;' }, context.title)\n      );\n    }\n\n    if (format === 'dialog') {\n      body.forEach(turn => {\n        if (!turn) return;\n        const speaker =\n          typeof turn === 'object' && turn.speaker ? `${turn.speaker}:` : '';\n        const line =\n          typeof turn === 'object' && 'line' in turn\n            ? turn.line\n            : typeof turn === 'string'\n            ? turn\n            : '';\n        textWrap.appendChild(\n          el(\n            'p',\n            {\n              style:\n                'margin:4px 0;display:flex;gap:6px;align-items:flex-start;line-height:1.5;',\n            },\n            speaker ? el('strong', {}, speaker) : null,\n            el('span', {}, line)\n          )\n        );\n      });\n    } else {\n      body.forEach((paragraph, index) => {\n        const text =\n          typeof paragraph === 'string'\n            ? paragraph\n            : paragraph && paragraph.text\n            ? paragraph.text\n            : '';\n        if (!text) return;\n        textWrap.appendChild(\n          el('p', { style: index ? 'margin:8px 0 0;' : 'margin:0;' }, text)\n        );\n      });\n    }\n\n    container.appendChild(textWrap);\n\n    const questions = Array.isArray(task.questions) ? task.questions : [];\n    if (!questions.length) return;\n\n    const blocks = [];\n    questions.forEach((question, idx) => {\n      const block = el(\n        'div',\n        {\n          style:\n            'margin-bottom:12px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n        },\n        el(\n          'div',\n          { style: 'margin-bottom:8px;font-weight:600;' },\n          question.q || `Питання ${idx + 1}`\n        )\n      );\n\n      const answers = Array.isArray(question.answer)\n        ? question.answer.map(String)\n        : question.answer != null\n        ? [String(question.answer)]\n        : [];\n\n      if (Array.isArray(question.choices) && question.choices.length) {\n        const name = `${task.id || 'context'}-${idx}`;\n        const allowMulti = answers.length > 1;\n        const expectedIsIndex = answers.every(value => /^\\d+$/.test(value));\n        question.choices.forEach((choice, cIdx) => {\n          const id = `${name}-${cIdx}`;\n          block.appendChild(\n            el(\n              'label',\n              {\n                for: id,\n                style: 'display:flex;align-items:center;gap:8px;margin:4px 0;',\n              },\n              el('input', {\n                type: allowMulti ? 'checkbox' : 'radio',\n                name,\n                id,\n                value: String(cIdx),\n              }),\n              el('span', {}, choice)\n            )\n          );\n        });\n        blocks.push({\n          block,\n          type: 'choices',\n          allowMulti,\n          getPicked: () => {\n            const inputs = Array.from(\n              block.querySelectorAll(`input[name='${name}']`)\n            );\n            const picked = inputs\n              .filter(input => input.checked)\n              .map(input => input.value);\n            if (!expectedIsIndex) {\n              return picked.map(index =>\n                normalize(question.choices[Number(index)] || '')\n              );\n            }\n            return picked;\n          },\n          expected: expectedIsIndex\n            ? answers\n            : answers.map(answer => normalize(answer)),\n        });\n      } else {\n        const input = el('textarea', {\n          rows: 2,\n          style:\n            'width:100%;max-width:640px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n        });\n        block.appendChild(input);\n        blocks.push({\n          block,\n          type: 'text',\n          input,\n          expected: answers.map(answer => normalize(answer)),\n        });\n      }\n\n      if (question.explanation) {\n        block.appendChild(\n          el(\n            'div',\n            {\n              class: 'muted',\n              style: 'display:none;margin-top:6px;color:#475569;',\n            },\n            question.explanation\n          )\n        );\n      }\n\n      container.appendChild(block);\n    });\n\n    const result = el('div', {\n      style: 'margin-top:8px;font-weight:600;',\n    });\n    const button = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n\n    button.addEventListener('click', () => {\n      let correct = 0;\n      blocks.forEach(entry => {\n        let ok = false;\n        if (entry.type === 'choices') {\n          const picked = entry.getPicked().sort();\n          const expected = entry.expected.slice().sort();\n          ok =\n            picked.length === expected.length &&\n            picked.every((value, index) => value === expected[index]);\n        } else {\n          const value = normalize(entry.input.value);\n          ok = entry.expected.length\n            ? entry.expected.includes(value)\n            : Boolean(value);\n        }\n        entry.block.style.borderColor = ok ? '#10b981' : '#ef4444';\n        const explanation = entry.block.querySelector('.muted');\n        if (explanation) explanation.style.display = ok ? 'none' : 'block';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${blocks.length}`;\n    });\n\n    container.appendChild(button);\n    container.appendChild(result);\n  }\n\n  function renderTask(container, task, taskKey, options = {}) {\n    const { showRemove = true } = options;\n    const keyBase =\n      taskKey ||\n      (task && task.id\n        ? String(task.id)\n        : `task-${Math.random().toString(16).slice(2, 8)}`);\n    const box = el('section', {\n      style: 'position:relative;margin:18px 0 26px;',\n      'data-task-id': task && task.id ? String(task.id) : '',\n      'data-task-key': keyBase,\n    });\n    const controls = el('div', {\n      style:\n        'position:absolute;top:6px;right:6px;display:flex;gap:6px;align-items:center;z-index:5;',\n    });\n\n    const { button: shareBtn, panel: sharePanel } = createShareButton(task);\n    const unregisterShareControl = registerShareControl(shareBtn, sharePanel);\n\n    controls.appendChild(shareBtn);\n    // Subtle remove button (top-right), hidden until hover/focus\n    if (showRemove) {\n      const removeBtn = el(\n        'button',\n        {\n          type: 'button',\n          title: 'Видалити завдання',\n          'aria-label': 'Видалити завдання',\n          style:\n            'border:none;background:transparent;color:#94a3b8;cursor:pointer;padding:2px;line-height:1;font-size:14px;opacity:0.6;',\n          onmouseenter: () => (removeBtn.style.opacity = '1'),\n          onmouseleave: () => (removeBtn.style.opacity = '0.6'),\n          onclick: () => {\n            if (shareState.active && shareState.active.panel === sharePanel) {\n              closeActiveSharePanel();\n            }\n            document.dispatchEvent(\n              new CustomEvent('practice:taskRemoved', {\n                detail: { key: keyBase, task },\n              })\n            );\n            unregisterShareControl();\n            box.remove();\n          },\n        },\n        '✕'\n      );\n      controls.appendChild(removeBtn);\n    }\n    box.appendChild(controls);\n    box.appendChild(sharePanel);\n    if (task.title) box.appendChild(el('h3', {}, task.title));\n    const rawType = task && task.type;\n    const normalizedType = String(rawType || '')\n      .trim()\n      .toLowerCase();\n    switch (normalizedType) {\n      case 'mcq':\n        renderMCQ(box, task);\n        break;\n      case 'gap':\n        renderGap(box, task);\n        break;\n      case 'match':\n        renderMatch(box, task);\n        break;\n      case 'context':\n        renderContext(box, task);\n        break;\n      case 'transform':\n        renderTransform(box, task);\n        break;\n      case 'error':\n        renderError(box, task);\n        break;\n      case 'order':\n        renderOrder(box, task);\n        break;\n      case 'short':\n        renderShort(box, task);\n        break;\n      case 'roleplay':\n        renderRoleplay(box, task);\n        break;\n      case 'dialogue-gap':\n        renderDialogueGap(box, task);\n        break;\n      case 'dialogue-order':\n        renderDialogueOrder(box, task);\n        break;\n      case 'truefalse':\n        renderTrueFalse(box, task);\n        break;\n      case 'definition-match': {\n        const matchTask = {\n          ...task,\n          prompt: task.prompt || 'Поєднай слово з визначенням',\n        };\n        renderMatch(box, matchTask);\n        break;\n      }\n      case 'synonym-clue':\n        renderSynonymClue(box, task);\n        break;\n      case 'scramble':\n        renderScramble(box, task);\n        break;\n      case 'wordpairs': {\n        const pairsTask = {\n          ...task,\n          prompt: task.prompt || 'Поєднай форму в однині та множині',\n        };\n        renderMatch(box, pairsTask);\n        break;\n      }\n      case 'odd-one-out':\n        renderOddOneOut(box, task);\n        break;\n      case 'open':\n        renderOpen(box, task);\n        break;\n      case 'writing':\n        renderWriting(box, task);\n        break;\n      default:\n        box.appendChild(\n          el('div', { class: 'muted' }, `Невідомий тип завдання: ${rawType}`)\n        );\n    }\n    container.appendChild(box);\n    return box;\n  }\n\n  // Expose minimal public API for dynamic appends\n  function appendTask(task, meta = {}) {\n    const root = ensurePracticeContainer();\n    if (!root || !task) return;\n    const body = root.querySelector('#practice-body') || root;\n    const allowRemove = meta.showRemove !== false;\n    renderTask(body, task, meta.key, { showRemove: allowRemove });\n  }\n\n  function renderTaskList(target, tasks, options = {}) {\n    if (!target) return null;\n    const entries = Array.isArray(tasks) ? tasks.filter(Boolean) : [];\n    const {\n      title,\n      level,\n      description,\n      keyPrefix = 'inline',\n      showEmptyNote = false,\n      showRemove = false,\n    } = options;\n\n    if (!entries.length) {\n      if (showEmptyNote) {\n        const note = el(\n          'p',\n          { class: 'muted practice-inline__empty' },\n          'Практика для цієї теми поки відсутня.'\n        );\n        target.appendChild(note);\n      }\n      return null;\n    }\n\n    const wrapper = el('section', { class: 'practice-inline' });\n\n    if (title || level || description) {\n      const header = el('header', { class: 'practice-inline__header' });\n      if (title) {\n        header.appendChild(\n          el('h3', { class: 'practice-inline__title' }, title)\n        );\n      }\n      if (level) {\n        header.appendChild(\n          el('span', { class: 'practice-inline__badge' }, level)\n        );\n      }\n      if (description) {\n        header.appendChild(\n          el('p', { class: 'practice-inline__description muted' }, description)\n        );\n      }\n      wrapper.appendChild(header);\n    }\n\n    entries.forEach((task, index) => {\n      const key = `${keyPrefix}-${index}`;\n      renderTask(wrapper, task, key, { showRemove });\n    });\n\n    target.appendChild(wrapper);\n    document.dispatchEvent(\n      new CustomEvent('practice:inlineRendered', {\n        detail: {\n          tasks: entries,\n          container: target,\n          options,\n        },\n      })\n    );\n    return wrapper;\n  }\n\n  function createTaskElement(task, meta = {}) {\n    if (!task) return null;\n    const fragment = document.createDocumentFragment();\n    const allowRemove = meta.showRemove !== false;\n    const element = renderTask(fragment, task, meta.key, {\n      showRemove: allowRemove,\n    });\n    return element;\n  }\n\n  async function fetchPracticeCandidate(path) {\n    if (!path) return null;\n    const resolvedPath = resolveAssetPath(path);\n    try {\n      const res = await fetch(resolvedPath, { cache: 'no-store' });\n      if (!res.ok) return null;\n      return await res.json();\n    } catch (error) {\n      return null;\n    }\n  }\n\n  async function loadData() {\n    const inline = document.getElementById('practice-data');\n    if (inline) {\n      try {\n        return JSON.parse(inline.textContent);\n      } catch (error) {\n        return null;\n      }\n    }\n\n    const context = window.lessonContext || {};\n    const candidates = new Set();\n\n    if (context.id) {\n      candidates.add(`data/practice/${context.id}.json`);\n    }\n\n    if (context.htmlPath) {\n      const normalized = String(context.htmlPath)\n        .replace(/^\\.\\/?/, '')\n        .replace(/\\.html?$/i, '');\n      if (normalized) {\n        candidates.add(`data/practice/${normalized}.json`);\n        const segments = normalized.split('/');\n        const last = segments[segments.length - 1];\n        if (last) {\n          candidates.add(`data/practice/${last}.json`);\n        }\n      }\n    }\n\n    for (const candidate of candidates) {\n      const data = await fetchPracticeCandidate(candidate);\n      if (data) return data;\n    }\n\n    const fallbackPath = derivePracticePath();\n    if (!fallbackPath) return null;\n    return await fetchPracticeCandidate(fallbackPath);\n  }\n\n  // ============ Extra renderers (moved inside closure) ============\n  function renderTransform(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Transform the sentence')\n    );\n    const items = [];\n    (task.items || []).forEach(it => {\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      row.appendChild(\n        el('div', { style: 'margin-bottom:6px;font-weight:600;' }, it.q)\n      );\n      const input = el('input', {\n        type: 'text',\n        style:\n          'width:100%;max-width:640px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n      });\n      row.appendChild(input);\n      if (it.hint) row.appendChild(makeHint(it.hint));\n      items.push({\n        row,\n        input,\n        answers: (it.answer || []).map(a => normalize(a)),\n      });\n      container.appendChild(row);\n    });\n    const result = el('div', { style: 'margin-top:8px;font-weight:600;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      items.forEach(({ row, input, answers }) => {\n        const ok = answers.includes(normalize(input.value));\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${items.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderError(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Find and correct the error')\n    );\n    const items = [];\n    (task.items || []).forEach(it => {\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      row.appendChild(\n        el('div', { style: 'margin-bottom:6px;font-weight:600;' }, it.q)\n      );\n      const input = el('input', {\n        type: 'text',\n        style:\n          'width:100%;max-width:640px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n      });\n      row.appendChild(input);\n      if (it.hint) row.appendChild(makeHint(it.hint));\n      items.push({\n        row,\n        input,\n        answers: (it.answer || []).map(a => normalize(a)),\n      });\n      container.appendChild(row);\n    });\n    const result = el('div', { style: 'margin-top:8px;font-weight:600;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      items.forEach(({ row, input, answers }) => {\n        const ok = answers.includes(normalize(input.value));\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${items.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderOrder(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Put the words in order')\n    );\n    const blocks = [];\n    (task.items || []).forEach((it, idx) => {\n      const correctStr = normalize(\n        Array.isArray(it.answer) ? it.answer.join(' ') : it.answer\n      );\n      const pool = shuffle((it.tokens || []).slice());\n      const row = el('div', {\n        style:\n          'margin:10px 0;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      const poolWrap = el('div', {\n        style: 'display:flex;flex-wrap:wrap;gap:6px;margin-bottom:6px;',\n      });\n      const outWrap = el('div', {\n        style:\n          'display:flex;flex-wrap:wrap;gap:6px;min-height:36px;padding:6px;border:1px dashed #cbd5e1;border-radius:8px;background:#f8fafc;',\n      });\n      const used = new Set();\n      function makeBtn(word, i) {\n        const b = el(\n          'button',\n          {\n            type: 'button',\n            style:\n              'padding:4px 8px;border:1px solid #cbd5e1;border-radius:6px;background:#fff;cursor:pointer;',\n          },\n          word\n        );\n        b.addEventListener('click', () => {\n          if (used.has(i)) return;\n          used.add(i);\n          b.style.opacity = 0.5;\n          outWrap.appendChild(\n            el(\n              'span',\n              {\n                class: 'chip',\n                style:\n                  'padding:4px 8px;border:1px solid #cbd5e1;border-radius:6px;background:#fff;',\n              },\n              word\n            )\n          );\n        });\n        return b;\n      }\n      pool.forEach((w, i) => poolWrap.appendChild(makeBtn(w, `${idx}-${i}`)));\n      const actions = el('div', {\n        style: 'margin-top:6px;display:flex;gap:8px;',\n      });\n      const reset = el('button', { type: 'button', class: 'btn' }, 'Скинути');\n      reset.addEventListener('click', () => {\n        used.clear();\n        outWrap.innerHTML = '';\n        Array.from(poolWrap.children).forEach(ch => (ch.style.opacity = 1));\n        row.style.borderColor = '#e5e7eb';\n      });\n      actions.appendChild(reset);\n      row.appendChild(\n        el('div', { style: 'margin-bottom:6px;font-weight:600;' }, it.q || '')\n      );\n      row.appendChild(poolWrap);\n      row.appendChild(outWrap);\n      row.appendChild(actions);\n      blocks.push({ row, outWrap, correctStr });\n      container.appendChild(row);\n    });\n    const result = el('div', { style: 'margin-top:8px;font-weight:600;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      blocks.forEach(({ row, outWrap, correctStr }) => {\n        const built = normalize(\n          Array.from(outWrap.querySelectorAll('.chip'))\n            .map(n => n.textContent)\n            .join(' ')\n        );\n        const ok = built === correctStr;\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct++;\n      });\n      result.textContent = `Результат: ${correct}/${blocks.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderShort(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Short answer'));\n    const items = [];\n    (task.items || []).forEach(it => {\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      row.appendChild(\n        el('div', { style: 'margin-bottom:6px;font-weight:600;' }, it.q)\n      );\n      const input = el('textarea', {\n        rows: 3,\n        style:\n          'width:100%;max-width:720px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n      });\n      row.appendChild(input);\n      items.push({\n        row,\n        input,\n        keywords: (it.keywords || []).map(k => normalize(k)),\n      });\n      container.appendChild(row);\n    });\n    const result = el('div', { style: 'margin-top:8px;font-weight:600;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let sum = 0,\n        total = 0;\n      items.forEach(({ row, input, keywords }) => {\n        const text = normalize(input.value);\n        const matched = keywords.filter(k => text.includes(k)).length;\n        sum += matched;\n        total += keywords.length;\n        row.style.borderColor =\n          matched === keywords.length\n            ? '#10b981'\n            : matched > 0\n            ? '#f59e0b'\n            : '#ef4444';\n        const info =\n          row.querySelector('.short-info') ||\n          el('div', {\n            class: 'short-info',\n            style: 'margin-top:6px;color:#475569;',\n          });\n        info.textContent = `Збіги ключових слів: ${matched}/${keywords.length}`;\n        if (!row.contains(info)) row.appendChild(info);\n      });\n      result.textContent = `Загальний збіг ключових слів: ${sum}/${total}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderOpen(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Відповіді у вільній формі')\n    );\n\n    const items = Array.isArray(task && task.items)\n      ? task.items.filter(Boolean)\n      : [];\n    if (items.length) {\n      const list = el('div', {\n        style: 'display:flex;flex-direction:column;gap:12px;margin-top:12px;',\n      });\n      items.forEach((item, index) => {\n        const entry = el('div', {\n          style:\n            'padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n        });\n        const situation =\n          (item && (item.situation || item.prompt || item.q)) ||\n          `Ситуація ${index + 1}`;\n        entry.appendChild(\n          el(\n            'div',\n            { style: 'margin:0 0 6px;font-weight:600;color:#0f172a;' },\n            situation\n          )\n        );\n\n        const examples =\n          item && Array.isArray(item.example_answers)\n            ? item.example_answers.filter(Boolean)\n            : [];\n        if (examples.length) {\n          entry.appendChild(\n            el(\n              'div',\n              { class: 'muted', style: 'margin:0 0 6px;color:#64748b;' },\n              'Приклад відповіді:'\n            )\n          );\n          const chips = el('div', {\n            style: 'display:flex;flex-wrap:wrap;gap:8px;',\n          });\n          examples.forEach(answer => {\n            chips.appendChild(\n              el(\n                'span',\n                {\n                  style:\n                    'display:inline-flex;align-items:center;padding:4px 10px;border-radius:9999px;background:#e2e8f0;color:#0f172a;font-size:14px;',\n                },\n                answer\n              )\n            );\n          });\n          entry.appendChild(chips);\n        }\n        list.appendChild(entry);\n      });\n      container.appendChild(list);\n    }\n\n    const criteria =\n      task && task.scoring && Array.isArray(task.scoring.criteria)\n        ? task.scoring.criteria.filter(Boolean)\n        : [];\n    if (criteria.length) {\n      const scoringBox = el('div', {\n        style:\n          'margin-top:16px;padding:14px;border:1px dashed #cbd5e1;border-radius:10px;background:#f8fafc;',\n      });\n      scoringBox.appendChild(\n        el(\n          'h4',\n          {\n            style:\n              'margin:0 0 8px;font-size:16px;font-weight:600;color:#0f172a;',\n          },\n          'Критерії оцінювання'\n        )\n      );\n      const list = el('ul', {\n        style: 'margin:0;padding-left:18px;color:#475569;',\n      });\n      criteria.forEach(criterion => {\n        list.appendChild(el('li', { style: 'margin:4px 0;' }, criterion));\n      });\n      scoringBox.appendChild(list);\n      container.appendChild(scoringBox);\n    }\n  }\n\n  function renderRoleplay(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Role-play scenario'));\n\n    const scenario =\n      task && typeof task.scenario === 'object' ? task.scenario : {};\n    const infoBox = el('div', {\n      style:\n        'margin:12px 0;padding:14px;border:1px solid #cbd5e1;border-radius:10px;background:#f8fafc;',\n    });\n    let infoAdded = false;\n\n    if (scenario.setting) {\n      infoBox.appendChild(\n        el(\n          'p',\n          { style: 'margin:0 0 6px;font-weight:600;' },\n          `Локація: ${scenario.setting}`\n        )\n      );\n      infoAdded = true;\n    }\n\n    if (scenario.summary) {\n      infoBox.appendChild(\n        el('p', { style: 'margin:0;color:#334155;' }, scenario.summary)\n      );\n      infoAdded = true;\n    }\n\n    if (infoAdded) {\n      container.appendChild(infoBox);\n    }\n\n    const roles = Array.isArray(scenario.roles) ? scenario.roles : [];\n    if (roles.length) {\n      const rolesWrap = el('div', {\n        style:\n          'display:grid;gap:12px;margin-top:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));',\n      });\n      roles.forEach((role, index) => {\n        const name = (role && role.name) || `Student ${index + 1}`;\n        const roleBox = el(\n          'div',\n          {\n            style:\n              'padding:14px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;box-shadow:0 1px 0 rgba(148, 163, 184, 0.2);',\n          },\n          el('div', { style: 'font-weight:600;margin-bottom:6px;' }, name)\n        );\n\n        if (role && role.goal) {\n          roleBox.appendChild(\n            el(\n              'p',\n              { style: 'margin:0 0 6px;color:#0f172a;' },\n              `Мета: ${role.goal}`\n            )\n          );\n        }\n\n        const rawDetails =\n          role && Array.isArray(role.details)\n            ? role.details\n            : typeof role?.details === 'string'\n            ? role.details.split(/[;,\\n]/)\n            : [];\n        const details = rawDetails\n          .map(item => String(item || '').trim())\n          .filter(Boolean);\n        if (details.length === 1) {\n          roleBox.appendChild(\n            el('p', { style: 'margin:0;color:#475569;' }, details[0])\n          );\n        } else if (details.length > 1) {\n          const list = el('ul', {\n            style: 'margin:0;padding-left:18px;color:#475569;',\n          });\n          details.forEach(detail => {\n            list.appendChild(el('li', { style: 'margin:2px 0;' }, detail));\n          });\n          roleBox.appendChild(list);\n        }\n\n        rolesWrap.appendChild(roleBox);\n      });\n      container.appendChild(rolesWrap);\n    }\n\n    const steps = Array.isArray(scenario.steps) ? scenario.steps : [];\n    if (steps.length) {\n      const stepsWrap = el('div', {\n        style:\n          'margin-top:16px;padding:14px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      stepsWrap.appendChild(\n        el(\n          'h4',\n          {\n            style:\n              'margin:0 0 6px;font-size:16px;font-weight:600;color:#0f172a;',\n          },\n          'Покроковий план діалогу'\n        )\n      );\n      const list = el('ol', {\n        style: 'margin:0 0 0 18px;padding:0;color:#475569;',\n      });\n      steps.forEach(step => {\n        if (!step) return;\n        list.appendChild(el('li', { style: 'margin:4px 0;' }, step));\n      });\n      stepsWrap.appendChild(list);\n      container.appendChild(stepsWrap);\n    }\n\n    const phrases = Array.isArray(task && task.phrases) ? task.phrases : [];\n    if (phrases.length) {\n      container.appendChild(\n        el(\n          'h4',\n          {\n            style:\n              'margin:18px 0 8px;font-size:16px;font-weight:600;color:#0f172a;',\n          },\n          'Корисні фрази для діалогу'\n        )\n      );\n      const list = el('div', {\n        style: 'display:flex;flex-direction:column;gap:8px;',\n      });\n      phrases.forEach(item => {\n        const phraseText =\n          typeof item === 'string'\n            ? item\n            : item && (item.phrase || item.text || item.value || '');\n        const translation =\n          item && typeof item === 'object'\n            ? item.translation || item.note || item.ua || item.uk || ''\n            : '';\n        if (!phraseText) return;\n        const id = `phrase-${Math.random().toString(36).slice(2, 8)}`;\n        list.appendChild(\n          el(\n            'label',\n            {\n              for: id,\n              style:\n                'display:flex;gap:10px;align-items:flex-start;padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n            },\n            el('input', { id, type: 'checkbox', style: 'margin-top:4px;' }),\n            el(\n              'div',\n              {},\n              el(\n                'span',\n                { style: 'font-weight:600;color:#0f172a;' },\n                phraseText\n              ),\n              translation\n                ? el(\n                    'span',\n                    {\n                      class: 'muted',\n                      style: 'display:block;margin-top:4px;color:#475569;',\n                    },\n                    translation\n                  )\n                : null\n            )\n          )\n        );\n      });\n      container.appendChild(list);\n    }\n  }\n\n  function renderDialogueGap(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Заповніть пропуски у діалозі')\n    );\n\n    const answers = Array.isArray(task?.answers)\n      ? task.answers.map(item => normalize(item))\n      : [];\n    const blanks = [];\n    let activeBlank = null;\n\n    function setActive(blank) {\n      if (activeBlank && activeBlank !== blank) {\n        activeBlank.style.boxShadow = 'none';\n      }\n      if (blank && activeBlank !== blank) {\n        blank.style.boxShadow = '0 0 0 2px rgba(37, 99, 235, 0.35)';\n        activeBlank = blank;\n      } else {\n        if (blank) blank.style.boxShadow = 'none';\n        activeBlank = null;\n      }\n    }\n\n    function clearBlank(blank) {\n      if (!blank) return;\n      blank.dataset.value = '';\n      blank.textContent = '___';\n      blank.style.borderColor = '#cbd5e1';\n      blank.style.background = '#fff';\n      blank.style.boxShadow = 'none';\n    }\n\n    const bank = el('div', {\n      style:\n        'display:flex;flex-wrap:wrap;gap:8px;margin:12px 0;padding:10px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;',\n    });\n    const words = Array.isArray(task?.words) ? task.words : [];\n    const seenWords = new Set();\n    const uniqueWords = [];\n    words.forEach(word => {\n      const value = String(word || '').trim();\n      if (!value) return;\n      const signature = normalize(value);\n      if (seenWords.has(signature)) return;\n      seenWords.add(signature);\n      uniqueWords.push(value);\n    });\n\n    uniqueWords.forEach(value => {\n      const btn = el(\n        'button',\n        {\n          type: 'button',\n          class: 'btn',\n          style:\n            'padding:6px 10px;border:1px solid #94a3b8;border-radius:999px;background:#fff;color:#0f172a;cursor:pointer;font-size:14px;line-height:1;',\n          onclick: () => {\n            const target =\n              activeBlank || blanks.find(blank => !blank.dataset.value);\n            if (!target) return;\n\n            target.dataset.value = value;\n            target.textContent = value;\n            target.style.borderColor = '#2563eb';\n            target.style.background = '#eef2ff';\n            setActive(null);\n          },\n        },\n        value\n      );\n      btn.dataset.word = value;\n      bank.appendChild(btn);\n    });\n    if (bank.children.length) {\n      container.appendChild(bank);\n    }\n\n    const dialogueWrap = el('div', {\n      style: 'display:flex;flex-direction:column;gap:10px;',\n    });\n    const dialogue = Array.isArray(task?.dialogue) ? task.dialogue : [];\n    let blankIndex = 0;\n    dialogue.forEach(turn => {\n      if (!turn) return;\n      const speaker = turn.speaker || turn.role || '';\n      const line = turn.line || turn.text || '';\n      const row = el(\n        'div',\n        {\n          style:\n            'padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;display:flex;gap:10px;align-items:flex-start;',\n        },\n        speaker\n          ? el('strong', { style: 'min-width:90px;' }, `${speaker}:`)\n          : null\n      );\n      const textWrap = el('div', {\n        style: 'display:flex;flex-wrap:wrap;gap:6px;align-items:center;',\n      });\n      const parts = String(line || '').split(/___/);\n      parts.forEach((part, idx) => {\n        if (part) {\n          textWrap.appendChild(el('span', {}, part));\n        }\n        if (idx < parts.length - 1) {\n          const expected = answers[blankIndex] || '';\n          const blank = el(\n            'button',\n            {\n              type: 'button',\n              style:\n                'min-width:52px;padding:4px 10px;border:1px solid #cbd5e1;border-radius:8px;background:#fff;color:#0f172a;cursor:pointer;',\n              onclick: () => {\n                if (blank.dataset.value) {\n                  clearBlank(blank);\n                  setActive(blank);\n                  return;\n                }\n                if (activeBlank === blank) {\n                  setActive(null);\n                } else {\n                  setActive(blank);\n                }\n              },\n              ondblclick: () => {\n                clearBlank(blank);\n                setActive(null);\n              },\n            },\n            '___'\n          );\n          blank.dataset.expected = expected;\n          blank.dataset.index = String(blankIndex);\n          blanks.push(blank);\n          blankIndex += 1;\n          textWrap.appendChild(blank);\n        }\n      });\n      row.appendChild(textWrap);\n      dialogueWrap.appendChild(row);\n    });\n\n    container.appendChild(dialogueWrap);\n\n    const actions = el('div', {\n      style:\n        'margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;',\n    });\n    const checkBtn = el(\n      'button',\n      { type: 'button', class: 'btn primary' },\n      'Перевірити'\n    );\n    const resetBtn = el('button', { type: 'button', class: 'btn' }, 'Скинути');\n    const result = el('div', {\n      style: 'font-weight:600;color:#0f172a;',\n    });\n\n    checkBtn.addEventListener('click', () => {\n      let correct = 0;\n      blanks.forEach(blank => {\n        const expected = blank.dataset.expected || '';\n        const value = normalize(blank.dataset.value || blank.textContent || '');\n        const ok = expected ? value === expected : Boolean(value);\n        blank.style.borderColor = ok ? '#10b981' : '#ef4444';\n        blank.style.background = ok ? '#ecfdf5' : '#fee2e2';\n        if (ok) correct += 1;\n      });\n      if (blanks.length) {\n        result.textContent = `Результат: ${correct}/${blanks.length}`;\n      } else {\n        result.textContent = '';\n      }\n    });\n\n    resetBtn.addEventListener('click', () => {\n      blanks.forEach(blank => clearBlank(blank));\n      result.textContent = '';\n      setActive(null);\n    });\n\n    actions.appendChild(checkBtn);\n    actions.appendChild(resetBtn);\n    actions.appendChild(result);\n    container.appendChild(actions);\n  }\n\n  function renderDialogueOrder(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Упорядкуйте діалог'));\n\n    const lines = Array.isArray(task?.lines)\n      ? task.lines.map(line => ({\n          speaker: line?.speaker || line?.role || '',\n          text: line?.line || line?.text || '',\n        }))\n      : [];\n    const solution = Array.isArray(task?.solution)\n      ? task.solution.map(value => Number.parseInt(value, 10))\n      : lines.map((_, index) => index);\n\n    const poolWrap = el('div', {\n      style:\n        'display:flex;flex-direction:column;gap:8px;margin-top:10px;padding:10px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;',\n    });\n    const outWrap = el('div', {\n      style:\n        'margin-top:14px;padding:12px;border:1px dashed #cbd5e1;border-radius:10px;min-height:80px;display:flex;flex-direction:column;gap:8px;',\n    });\n    const used = new Set();\n\n    function makeLabel({ speaker, text }) {\n      const content = speaker ? `${speaker}: ${text}` : text;\n      return content.trim();\n    }\n\n    function removeChip(chip) {\n      if (!chip) return;\n      const index = Number.parseInt(chip.dataset.index || '-1', 10);\n      const sourceId = chip.dataset.buttonId;\n      if (sourceId) {\n        const btn = poolWrap.querySelector(`[data-id=\"${sourceId}\"]`);\n        if (btn) {\n          btn.disabled = false;\n          btn.style.opacity = '1';\n        }\n      }\n      used.delete(index);\n      chip.remove();\n    }\n\n    function appendChip(index, label, sourceId) {\n      const chip = el(\n        'div',\n        {\n          class: 'dialogue-chip',\n          style:\n            'padding:10px;border:1px solid #94a3b8;border-radius:10px;background:#fff;display:flex;justify-content:space-between;align-items:center;gap:12px;cursor:pointer;',\n          onclick: event => {\n            event.stopPropagation();\n            removeChip(chip);\n          },\n        },\n        el('span', {}, label),\n        el('span', { style: 'color:#94a3b8;font-size:12px;' }, '×')\n      );\n      chip.dataset.index = String(index);\n      chip.dataset.buttonId = sourceId;\n      outWrap.appendChild(chip);\n    }\n\n    const shuffledIndices = shuffle(lines.map((_, index) => index));\n    shuffledIndices.forEach(index => {\n      const line = lines[index];\n      const label = makeLabel(line);\n      const buttonId = `line-${index}-${Math.random()\n        .toString(36)\n        .slice(2, 6)}`;\n      const btn = el(\n        'button',\n        {\n          type: 'button',\n          class: 'btn',\n          style:\n            'text-align:left;padding:10px;border:1px solid #cbd5e1;border-radius:10px;background:#fff;color:#0f172a;cursor:pointer;',\n          onclick: () => {\n            if (used.has(index)) return;\n            used.add(index);\n            btn.disabled = true;\n            btn.style.opacity = '0.5';\n            appendChip(index, label, buttonId);\n          },\n          'data-id': buttonId,\n        },\n        label\n      );\n      poolWrap.appendChild(btn);\n    });\n\n    container.appendChild(poolWrap);\n    container.appendChild(outWrap);\n\n    const actions = el('div', {\n      style:\n        'margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;',\n    });\n    const checkBtn = el(\n      'button',\n      { type: 'button', class: 'btn primary' },\n      'Перевірити'\n    );\n    const resetBtn = el('button', { type: 'button', class: 'btn' }, 'Скинути');\n    const result = el('div', { style: 'font-weight:600;color:#0f172a;' });\n\n    checkBtn.addEventListener('click', () => {\n      const built = Array.from(outWrap.children).map(chip =>\n        Number.parseInt(chip.dataset.index || '-1', 10)\n      );\n      const expected = solution.slice();\n      const ok =\n        built.length === expected.length &&\n        built.every((value, idx) => value === expected[idx]);\n      outWrap.style.borderColor = ok ? '#10b981' : '#ef4444';\n      result.textContent = ok\n        ? 'Діалог впорядковано правильно!'\n        : `Поточний порядок: ${built.length}/${expected.length} реплік. Перевірте послідовність.`;\n    });\n\n    resetBtn.addEventListener('click', () => {\n      Array.from(outWrap.children).forEach(chip => removeChip(chip));\n      const buttons = poolWrap.querySelectorAll('button');\n      buttons.forEach(btn => {\n        btn.disabled = false;\n        btn.style.opacity = '1';\n      });\n      used.clear();\n      outWrap.style.borderColor = '#cbd5e1';\n      result.textContent = '';\n    });\n\n    actions.appendChild(checkBtn);\n    actions.appendChild(resetBtn);\n    actions.appendChild(result);\n    container.appendChild(actions);\n  }\n\n  function renderTrueFalse(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Обери True або False'));\n\n    const rows = [];\n    const items = Array.isArray(task?.items) ? task.items : [];\n    items.forEach((item, index) => {\n      if (!item || !item.statement) return;\n      const row = el(\n        'div',\n        {\n          style:\n            'margin:8px 0;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n        },\n        el('p', { style: 'margin:0 0 8px;font-weight:600;' }, item.statement)\n      );\n      const name = `${task.id || 'tf'}-${index}`;\n      const expected = Boolean(item.answer);\n      const trueLabel = el(\n        'label',\n        {\n          style:\n            'display:inline-flex;align-items:center;gap:6px;margin-right:16px;',\n        },\n        el('input', { type: 'radio', name, value: 'true' }),\n        'True'\n      );\n      const falseLabel = el(\n        'label',\n        { style: 'display:inline-flex;align-items:center;gap:6px;' },\n        el('input', { type: 'radio', name, value: 'false' }),\n        'False'\n      );\n      const options = el('div', { style: 'display:flex;align-items:center;' });\n      options.appendChild(trueLabel);\n      options.appendChild(falseLabel);\n      row.appendChild(options);\n      rows.push({ row, name, expected });\n      container.appendChild(row);\n    });\n\n    if (!rows.length) return;\n\n    const actions = el('div', {\n      style:\n        'margin-top:14px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;',\n    });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary' },\n      'Перевірити'\n    );\n    const result = el('div', { style: 'font-weight:600;color:#0f172a;' });\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      rows.forEach(({ row, name, expected }) => {\n        const picked = row.querySelector(`input[name=\"${name}\"]:checked`);\n        const ok = picked ? picked.value === String(expected) : false;\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct += 1;\n      });\n      result.textContent = `Результат: ${correct}/${rows.length}`;\n    });\n    actions.appendChild(btn);\n    actions.appendChild(result);\n    container.appendChild(actions);\n  }\n\n  function renderSynonymClue(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Доберіть слово за описом')\n    );\n\n    const wordBank = Array.isArray(task?.wordBank) ? task.wordBank : [];\n    if (wordBank.length) {\n      const bank = el('div', {\n        style:\n          'margin:8px 0 12px;padding:10px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;display:flex;flex-wrap:wrap;gap:8px;',\n      });\n      wordBank.forEach(word => {\n        const value = String(word || '').trim();\n        if (!value) return;\n        bank.appendChild(\n          el(\n            'span',\n            {\n              style:\n                'padding:6px 10px;border:1px solid #94a3b8;border-radius:999px;background:#fff;font-size:14px;',\n            },\n            value\n          )\n        );\n      });\n      container.appendChild(bank);\n    }\n\n    const rows = [];\n    const items = Array.isArray(task?.items) ? task.items : [];\n    items.forEach(item => {\n      if (!item || !item.clue) return;\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      row.appendChild(\n        el('p', { style: 'margin:0 0 6px;font-weight:600;' }, item.clue)\n      );\n      const input = el('input', {\n        type: 'text',\n        style:\n          'width:100%;max-width:320px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n      });\n      row.appendChild(input);\n      const answers = Array.isArray(item?.answers)\n        ? item.answers.map(answer => normalize(answer))\n        : Array.isArray(item?.answer)\n        ? item.answer.map(answer => normalize(answer))\n        : item?.answer\n        ? [normalize(item.answer)]\n        : [];\n      rows.push({ row, input, answers });\n      container.appendChild(row);\n    });\n\n    if (!rows.length) return;\n\n    const result = el('div', { style: 'font-weight:600;color:#0f172a;' });\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary' },\n      'Перевірити'\n    );\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      rows.forEach(({ row, input, answers }) => {\n        const value = normalize(input.value);\n        const ok = answers.length ? answers.includes(value) : Boolean(value);\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct += 1;\n      });\n      result.textContent = `Результат: ${correct}/${rows.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderScramble(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Розшифруйте слова'));\n\n    const rows = [];\n    const items = Array.isArray(task?.items) ? task.items : [];\n    items.forEach(item => {\n      if (!item || !item.scrambled) return;\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      row.appendChild(\n        el(\n          'div',\n          { style: 'margin-bottom:6px;font-weight:600;' },\n          item.scrambled\n        )\n      );\n      const input = el('input', {\n        type: 'text',\n        style:\n          'width:100%;max-width:260px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;',\n      });\n      row.appendChild(input);\n      const answers = Array.isArray(item?.answers)\n        ? item.answers.map(value => normalize(value))\n        : Array.isArray(item?.answer)\n        ? item.answer.map(value => normalize(value))\n        : item?.answer\n        ? [normalize(item.answer)]\n        : [];\n      rows.push({ row, input, answers });\n      container.appendChild(row);\n    });\n\n    if (!rows.length) return;\n\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary' },\n      'Перевірити'\n    );\n    const result = el('div', {\n      style: 'margin-top:6px;font-weight:600;color:#0f172a;',\n    });\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      rows.forEach(({ row, input, answers }) => {\n        const value = normalize(input.value);\n        const ok = answers.length ? answers.includes(value) : Boolean(value);\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        if (ok) correct += 1;\n      });\n      result.textContent = `Результат: ${correct}/${rows.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderOddOneOut(container, task) {\n    container.appendChild(el('h3', {}, task.prompt || 'Знайди зайве слово'));\n\n    const blocks = [];\n    const items = Array.isArray(task?.items) ? task.items : [];\n    items.forEach((item, index) => {\n      const options = Array.isArray(item?.options) ? item.options : [];\n      if (!options.length) return;\n      const row = el('div', {\n        style:\n          'margin-bottom:10px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;',\n      });\n      row.appendChild(\n        el(\n          'div',\n          { style: 'margin-bottom:6px;font-weight:600;' },\n          `Набір ${index + 1}`\n        )\n      );\n      const groupName = `${task.id || 'odd'}-${index}`;\n      options.forEach((option, optionIndex) => {\n        const id = `${groupName}-${optionIndex}`;\n        row.appendChild(\n          el(\n            'label',\n            {\n              for: id,\n              style: 'display:flex;align-items:center;gap:6px;margin:4px 0;',\n            },\n            el('input', {\n              type: 'radio',\n              name: groupName,\n              value: String(optionIndex),\n              id,\n            }),\n            option\n          )\n        );\n      });\n      const explanation = String(item?.explanation || '').trim();\n      if (explanation) {\n        const note = el('div', {\n          class: 'muted',\n          style: 'display:none;margin-top:6px;color:#475569;',\n        });\n        note.textContent = `Пояснення: ${explanation}`;\n        row.appendChild(note);\n      }\n      const answerIndex = normalize(item?.answer || '');\n      blocks.push({ row, groupName, answerIndex });\n      container.appendChild(row);\n    });\n\n    if (!blocks.length) return;\n\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary' },\n      'Перевірити'\n    );\n    const result = el('div', {\n      style: 'margin-top:6px;font-weight:600;color:#0f172a;',\n    });\n    btn.addEventListener('click', () => {\n      let correct = 0;\n      blocks.forEach(({ row, groupName, answerIndex }) => {\n        const picked = row.querySelector(`input[name=\"${groupName}\"]:checked`);\n        const value = normalize(picked ? picked.value : '');\n        const ok = answerIndex ? value === answerIndex : Boolean(value);\n        row.style.borderColor = ok ? '#10b981' : '#ef4444';\n        const note = row.querySelector('.muted');\n        if (note) note.style.display = ok ? 'none' : 'block';\n        if (ok) correct += 1;\n      });\n      result.textContent = `Результат: ${correct}/${blocks.length}`;\n    });\n    container.appendChild(btn);\n    container.appendChild(result);\n  }\n\n  function renderWriting(container, task) {\n    container.appendChild(\n      el('h3', {}, task.prompt || 'Writing/Speaking prompt')\n    );\n    if (task.description)\n      container.appendChild(el('p', { class: 'muted' }, task.description));\n    const list = el('div', { style: 'margin-top:8px;' });\n    (task.checklist || []).forEach(ch => {\n      const id = Math.random().toString(36).slice(2);\n      const row = el(\n        'label',\n        {\n          for: id,\n          style: 'display:flex;align-items:center;gap:8px;margin:6px 0;',\n        },\n        el('input', { id, type: 'checkbox' }),\n        el('span', {}, ch)\n      );\n      list.appendChild(row);\n    });\n    container.appendChild(list);\n    const btn = el(\n      'button',\n      { type: 'button', class: 'btn primary', style: 'margin-top:8px;' },\n      'Позначити як перевірено'\n    );\n    const note = el('div', { class: 'muted', style: 'margin-top:6px;' });\n    btn.addEventListener('click', () => {\n      note.textContent =\n        'Готово! Перевір список і за бажанням відправ наставнику.';\n    });\n    container.appendChild(btn);\n    container.appendChild(note);\n  }\n\n  function ensurePracticeContainer() {\n    let root = document.getElementById('practice');\n    if (!root && /\\/grammar\\//.test(location.pathname)) {\n      const wrap = el('div', { class: 'container' });\n      wrap.appendChild(el('hr', { class: 'sep' }));\n      root = el('section', { id: 'practice' });\n      wrap.appendChild(root);\n      document.body.appendChild(wrap);\n    }\n    return root;\n  }\n\n  function init() {\n    const root = ensurePracticeContainer();\n    if (!root) return;\n    // Ensure stable inner container so external toolbars are not wiped\n    let body = root.querySelector('#practice-body');\n    if (!body) {\n      body = el('div', { id: 'practice-body' });\n      root.appendChild(body);\n    }\n    const context = window.lessonContext || {};\n    if (context.isCustomLesson) {\n      const placeholder = root.querySelector('[data-practice-placeholder]');\n      if (placeholder) {\n        placeholder.textContent =\n          'Практика для кожної теми розміщена одразу після теорії. Тут можете згенерувати додаткові завдання.';\n      }\n      if (body) {\n        body.innerHTML =\n          '<p class=\"muted\">Згенеруйте додаткові вправи або додайте власні завдання.</p>';\n      }\n      document.dispatchEvent(\n        new CustomEvent('practice:dataLoaded', { detail: null })\n      );\n      document.dispatchEvent(\n        new CustomEvent('practice:rendered', {\n          detail: { ok: false, reason: 'custom-lesson' },\n        })\n      );\n      return;\n    }\n\n    loadData().then(data => {\n      if (!data) {\n        document.dispatchEvent(\n          new CustomEvent('practice:dataLoaded', { detail: null })\n        );\n        body.innerHTML = '<p class=\"muted\">Практика поки відсутня.</p>';\n        document.dispatchEvent(\n          new CustomEvent('practice:rendered', { detail: { ok: false } })\n        );\n        return;\n      }\n      body.innerHTML = '';\n      const header = el(\n        'div',\n        {},\n        el(\n          'h2',\n          {},\n          'Practice ',\n          el('span', { class: 'badge' }, data.level || 'B1')\n        ),\n        data.title ? el('p', { class: 'muted' }, data.title) : null\n      );\n      body.appendChild(header);\n\n      const entries = (data.tasks || []).map((task, index) => ({\n        key: task && task.id ? String(task.id) : `base-${index}`,\n        task,\n      }));\n\n      document.dispatchEvent(\n        new CustomEvent('practice:dataLoaded', {\n          detail: {\n            title: data.title,\n            level: data.level,\n            entries,\n          },\n        })\n      );\n\n      entries.forEach(({ task, key }) => renderTask(body, task, key));\n      document.dispatchEvent(\n        new CustomEvent('practice:rendered', { detail: { ok: true } })\n      );\n    });\n  }\n\n  document.addEventListener('DOMContentLoaded', init);\n\n  window.practice = window.practice || {};\n  Object.assign(window.practice, {\n    appendTask,\n    renderTaskList,\n    createTaskElement,\n  });\n\n  return {\n    appendTask,\n    renderTaskList,\n    createTaskElement,\n  };\n})();\n\nexport const createPracticeTaskElement = practiceAPI.createTaskElement;\nexport const appendPracticeTask = practiceAPI.appendTask;\nexport const renderPracticeTaskList = practiceAPI.renderTaskList;\n\ndocument.addEventListener('click', e => {\n  const div = e.target.closest('.text-block');\n  if (div) {\n    const html = div.innerHTML;\n    navigator.clipboard.writeText(`<div class=\"text-block\">${html}</div>`);\n    console.log('Скопійовано');\n  }\n});\n"],"names":["getUserHomework","data","axios","addHomework","homework","getUserHomeworkLessons","userEmail","params","res","getUsers","page","limit","practiceAPI","basePath","__vite_import_meta_env__","resolveAssetPath","path","normalizedBase","rawPath","derivePracticePath","parts","file","json","el","tag","attrs","children","node","k","v","ch","shuffle","arr","a","i","j","normalize","s","shareState","fetchStudents","items","error","formatStudentName","student","possibleFirst","possibleLast","part","closeActiveSharePanel","panel","button","shareControls","canShareTasks","applyShareVisibility","control","registerShareControl","setShareAvailability","isAllowed","next","auth","user","handleOutsideShareClick","event","target","handleShareKeydown","renderStudentOptions","students","task","list","lessonId","lessonName","item","createSharePanel","toggleSharePanel","createShareButton","makeHint","hintText","wrap","btn","box","isHidden","renderMCQ","container","blocks","idx","name","allowMulti","block","choice","cIdx","id","lbl","result","correct","answers","picked","expected","ok","exp","renderGap","it","row","input","val","renderMatch","pairs","rights","p","rows","select","r","right","renderContext","context","format","body","textWrap","turn","speaker","line","paragraph","index","text","questions","question","expectedIsIndex","value","answer","entry","explanation","renderTask","taskKey","options","showRemove","keyBase","controls","shareBtn","sharePanel","unregisterShareControl","removeBtn","rawType","renderTransform","renderError","renderOrder","renderShort","renderRoleplay","renderDialogueGap","renderDialogueOrder","renderTrueFalse","matchTask","renderSynonymClue","renderScramble","pairsTask","renderOddOneOut","renderOpen","renderWriting","appendTask","meta","root","ensurePracticeContainer","allowRemove","renderTaskList","tasks","entries","title","level","description","keyPrefix","showEmptyNote","note","wrapper","header","key","createTaskElement","fragment","fetchPracticeCandidate","resolvedPath","loadData","inline","candidates","normalized","segments","last","candidate","fallbackPath","correctStr","pool","poolWrap","outWrap","used","makeBtn","word","b","w","actions","reset","n","sum","total","keywords","matched","info","situation","examples","chips","criteria","scoringBox","criterion","scenario","infoBox","infoAdded","roles","rolesWrap","role","roleBox","details","detail","steps","stepsWrap","step","phrases","phraseText","translation","blanks","activeBlank","setActive","blank","clearBlank","bank","words","seenWords","uniqueWords","signature","dialogueWrap","dialogue","blankIndex","checkBtn","resetBtn","lines","solution","_","makeLabel","removeChip","chip","sourceId","appendChip","label","buttonId","built","trueLabel","falseLabel","wordBank","groupName","option","optionIndex","answerIndex","init","placeholder","createPracticeTaskElement","e","div","html"],"mappings":"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"}