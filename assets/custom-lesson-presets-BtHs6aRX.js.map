{"version":3,"file":"custom-lesson-presets-BtHs6aRX.js","sources":["../../src/api/axiosInstance.js","../../src/api/authorization.js","../../src/features/auth/auth.js","../../src/data/custom-lesson-presets.js"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'http://localhost:3003',\n});\n\nexport default instance;\n","import axios from './axiosInstance.js';\n\nexport const loginUser = async ({\n  name,\n  givenName,\n  familyName,\n  email,\n  picture,\n}) => {\n  const data = { name, givenName, familyName, email, picture };\n  const res = await axios.post('/user', data);\n  return res.data;\n};\n","import { loginUser } from '@api/authorization.js';\n\nconst admins = ['volodkaposhta@gmail.com', 'nreznik451@gmail.com'];\nconst STORAGE_KEY = 'english-teacher.google-user';\nconst AUTH_STATE_KEY = 'english-teacher.google-auth-state';\n\nconst authRoot = document.querySelector('[data-auth-root]');\nconst signInContainer = document.querySelector('[data-auth-signin]');\nconst profileContainer = document.querySelector('[data-auth-profile]');\nconst nameElement = document.querySelector('[data-user-name]');\nconst emailElement = document.querySelector('[data-user-email]');\nconst avatarElement = document.querySelector('[data-user-avatar]');\nconst signOutButton = document.querySelector('[data-auth-signout]');\n\nlet currentUser = null;\nlet isInitialised = false;\nconst subscribers = new Set();\nlet hasHydratedFromStorage = false;\nlet hasBoundStorageListener = false;\n\nfunction decodeJwtPayload(token) {\n  try {\n    if (!token || typeof token !== 'string') return null;\n    const parts = token.split('.');\n    if (!parts[1]) return null;\n    const base64 = parts[1].replace(/-/g, '+').replace(/_/g, '/');\n    const padded = base64.padEnd(\n      base64.length + ((4 - (base64.length % 4)) % 4),\n      '='\n    );\n    const decoded = atob(padded)\n      .split('')\n      .map(char => `%${`00${char.charCodeAt(0).toString(16)}`.slice(-2)}`)\n      .join('');\n    return JSON.parse(decodeURIComponent(decoded));\n  } catch (error) {\n    console.warn('[auth] Unable to decode Google credential payload', error);\n    return null;\n  }\n}\n\nfunction serialiseUser(user) {\n  return {\n    name: user.name || '',\n    givenName: user.givenName || '',\n    familyName: user.familyName || '',\n    email: user.email || '',\n    picture: user.picture || '',\n    credential: user.credential || '',\n    expiresAt: user.expiresAt ?? null,\n  };\n}\n\nfunction loadStoredUser() {\n  try {\n    const raw = window.localStorage.getItem(STORAGE_KEY);\n    return raw ? JSON.parse(raw) : null;\n  } catch (error) {\n    console.warn('[auth] Unable to access localStorage', error);\n    return null;\n  }\n}\n\nfunction safeSetJSON(key, value) {\n  const nextValue = JSON.stringify(value);\n  const currentValue = window.localStorage.getItem(key);\n  if (currentValue === nextValue) return;\n  window.localStorage.setItem(key, nextValue);\n}\n\nfunction storeUser(user) {\n  try {\n    const payload = serialiseUser(user);\n    safeSetJSON(STORAGE_KEY, payload);\n  } catch (error) {\n    console.warn('[auth] Unable to persist user in localStorage', error);\n  }\n}\n\nfunction clearStoredUser() {\n  try {\n    window.localStorage.removeItem(STORAGE_KEY);\n  } catch (error) {\n    console.warn('[auth] Unable to remove user from localStorage', error);\n  }\n}\n\nfunction persistAuthState(state) {\n  try {\n    safeSetJSON(AUTH_STATE_KEY, state);\n  } catch (error) {\n    console.warn('[auth] Unable to persist auth state', error);\n  }\n}\n\nfunction isStoredUserValid(user) {\n  if (!user || typeof user !== 'object') return false;\n  const hasIdentity =\n    Boolean(user.email) || Boolean(user.name) || Boolean(user.givenName);\n  const hasCredential =\n    typeof user.credential === 'string' && user.credential.length > 0;\n  return hasIdentity && hasCredential;\n}\n\nfunction cloneUser(user) {\n  return user ? { ...user } : null;\n}\n\nfunction shallowEqual(a, b) {\n  if (a === b) return true;\n  if (!a || !b) return false;\n  const keysA = Object.keys(a);\n  const keysB = Object.keys(b);\n  if (keysA.length !== keysB.length) return false;\n  return keysA.every(key => a[key] === b[key]);\n}\n\nfunction createSnapshot() {\n  return {\n    isSignedIn: Boolean(currentUser),\n    user: cloneUser(currentUser),\n  };\n}\n\nfunction notifySubscribers(reason) {\n  const snapshot = createSnapshot();\n  subscribers.forEach(listener => {\n    try {\n      listener(snapshot, reason);\n    } catch (error) {\n      console.warn('[auth] Subscriber error', error);\n    }\n  });\n}\n\nfunction setCurrentUser(user, reason) {\n  const next = cloneUser(user);\n  if (shallowEqual(currentUser, next)) return;\n  currentUser = next;\n  notifySubscribers(reason);\n}\n\nfunction ensureStorageListener() {\n  if (hasBoundStorageListener) return;\n  if (typeof window === 'undefined' || !window.addEventListener) return;\n  window.addEventListener('storage', handleStorageEvent);\n  hasBoundStorageListener = true;\n}\n\nfunction ensureHydratedFromStorage() {\n  if (hasHydratedFromStorage) return;\n  if (typeof window === 'undefined') return;\n  hasHydratedFromStorage = true;\n  ensureStorageListener();\n  syncFromStorage({\n    persist: false,\n    applyUi: false,\n    reason: 'hydrated',\n  });\n}\n\nfunction toggleProfileVisibility(isVisible) {\n  if (profileContainer) {\n    profileContainer.hidden = !isVisible;\n  }\n  if (signInContainer) {\n    signInContainer.hidden = isVisible;\n  }\n  if (signOutButton) {\n    signOutButton.hidden = !isVisible;\n  }\n}\n\nfunction showUser(user, options = {}) {\n  const { persist = true, reason = 'signed-in' } = options;\n  const record = serialiseUser(user);\n\n  toggleProfileVisibility(true);\n\n  if (nameElement) {\n    nameElement.textContent = record.name || record.givenName || '';\n  }\n  if (emailElement) {\n    emailElement.textContent = record.email || '';\n  }\n  if (avatarElement) {\n    if (record.picture) {\n      avatarElement.src = record.picture;\n      avatarElement.hidden = false;\n      const altName = record.name || record.givenName || 'Користувач Google';\n      avatarElement.alt = `${altName} — аватар профілю`;\n    } else {\n      avatarElement.removeAttribute('src');\n      avatarElement.hidden = true;\n      avatarElement.alt = 'Google profile avatar';\n    }\n  }\n\n  setCurrentUser(record, reason);\n\n  if (persist) {\n    persistAuthState({\n      status: 'signed-in',\n      user: record,\n      updatedAt: Date.now(),\n    });\n  }\n}\n\nfunction hideUser(options = {}) {\n  const { persist = true, reason = 'signed-out' } = options;\n\n  toggleProfileVisibility(false);\n\n  if (nameElement) nameElement.textContent = '';\n  if (emailElement) emailElement.textContent = '';\n  if (avatarElement) {\n    avatarElement.removeAttribute('src');\n    avatarElement.hidden = true;\n    avatarElement.alt = 'Google profile avatar';\n  }\n\n  setCurrentUser(null, reason);\n\n  if (persist) {\n    persistAuthState({ status: 'signed-out', updatedAt: Date.now() });\n  }\n}\n\nfunction handleCredentialResponse(response) {\n  const credential = response?.credential;\n  const payload = decodeJwtPayload(credential);\n  if (!payload) {\n    return;\n  }\n\n  const user = {\n    name: payload.name || payload.given_name || '',\n    givenName: payload.given_name || '',\n    familyName: payload.family_name || '',\n    email: payload.email || '',\n    picture: payload.picture || '',\n    credential,\n    expiresAt: payload.exp ? payload.exp * 1000 : null,\n  };\n\n  loginUser(user);\n  storeUser(user);\n  showUser(user);\n}\n\nfunction handleSignOut(reason = 'signed-out') {\n  clearStoredUser();\n  hideUser({ reason });\n  try {\n    window.google?.accounts?.id?.disableAutoSelect();\n  } catch (error) {\n    console.warn('[auth] Unable to disable Google auto-select', error);\n  }\n}\n\nfunction syncFromStorage(options = {}) {\n  const { persist = false, applyUi = true, reason = 'synced' } = options;\n  const storedUser = loadStoredUser();\n  const validStoredUser = isStoredUserValid(storedUser) ? storedUser : null;\n  const isExpired = validStoredUser?.expiresAt\n    ? validStoredUser.expiresAt <= Date.now()\n    : false;\n\n  if (validStoredUser && !isExpired) {\n    if (applyUi) {\n      showUser(validStoredUser, {\n        persist,\n        reason,\n      });\n    } else {\n      const record = serialiseUser(validStoredUser);\n      setCurrentUser(record, reason);\n      if (persist) {\n        persistAuthState({\n          status: 'signed-in',\n          user: record,\n          updatedAt: Date.now(),\n        });\n      }\n    }\n  } else {\n    if (isExpired || storedUser) {\n      clearStoredUser();\n    }\n    if (applyUi) {\n      hideUser({ persist, reason });\n    } else {\n      setCurrentUser(null, reason);\n      if (persist) {\n        persistAuthState({\n          status: 'signed-out',\n          updatedAt: Date.now(),\n        });\n      }\n    }\n  }\n}\n\nfunction handleStorageEvent(event) {\n  if (event.storageArea !== window.localStorage) return;\n  if (\n    event.key === STORAGE_KEY ||\n    event.key === AUTH_STATE_KEY ||\n    event.key === null\n  ) {\n    syncFromStorage({ persist: false });\n  }\n}\n\nfunction initGoogleAuth() {\n  if (isInitialised) return;\n  isInitialised = true;\n\n  ensureHydratedFromStorage();\n  window.handleGoogleCredential = handleCredentialResponse;\n\n  if (signOutButton && !signOutButton.dataset.authInitialised) {\n    signOutButton.addEventListener('click', () => handleSignOut());\n    signOutButton.dataset.authInitialised = 'true';\n  }\n\n  syncFromStorage({ persist: false });\n  ensureStorageListener();\n}\n\nfunction subscribe(listener) {\n  if (typeof listener !== 'function') {\n    return () => {};\n  }\n  ensureHydratedFromStorage();\n  subscribers.add(listener);\n  listener(createSnapshot(), currentUser ? 'signed-in' : 'signed-out');\n  return () => {\n    subscribers.delete(listener);\n  };\n}\n\nfunction refreshAuthState() {\n  syncFromStorage({ persist: false });\n}\n\nexport const auth = {\n  init: initGoogleAuth,\n  isInitialised: () => isInitialised,\n  isSignedIn: () => {\n    ensureHydratedFromStorage();\n    return Boolean(currentUser);\n  },\n  getUser: () => {\n    ensureHydratedFromStorage();\n    return cloneUser(currentUser);\n  },\n  getCredential: () => {\n    ensureHydratedFromStorage();\n    return currentUser?.credential ?? null;\n  },\n  signOut: () => handleSignOut(),\n  subscribe,\n  refresh: refreshAuthState,\n  getSnapshot: () => {\n    ensureHydratedFromStorage();\n    return createSnapshot();\n  },\n  isAdmin: user => {\n    if (!user) {\n      ensureHydratedFromStorage();\n    }\n    const data = user || currentUser;\n\n    return admins.includes(data?.email);\n  },\n};\n\nexport { initGoogleAuth };\n\nauth.subscribe(({ isSignedIn, user }) => {\n  console.log(user);\n\n  if (isSignedIn) {\n    if (admins.includes(user.email)) {\n      document.body.classList.add('is-admin');\n    } else {\n      document.body.classList.add('is-user');\n    }\n  } else {\n    document.body.classList.add('is-anonym');\n  }\n});\n","export const customLessonPresets = [\n  {\n    id: 'custom-no1-mggxs7zo',\n    title: 'Урок №1',\n    topicIds: ['verb-to-be-basics', 'greetings-farewells'],\n    createdAt: '2025-10-07T19:12:10.356Z',\n  },\n  {\n    id: 'custom-no2-4db25661',\n    title: 'Урок №2',\n    topicIds: ['personal-pronouns', 'personal-info-basics'],\n    createdAt: '2025-10-07T19:12:11.356Z',\n  },\n  {\n    id: 'custom-no3-b9fd7e6c',\n    title: 'Урок №3',\n    topicIds: ['articles-a-an-the', 'alphabet-spelling'],\n    createdAt: '2025-10-07T19:12:12.356Z',\n  },\n  {\n    id: 'custom-no4-c6f6abec',\n    title: 'Урок №4',\n    topicIds: ['nouns-singular-plural', 'classroom-objects'],\n    createdAt: '2025-10-07T19:12:13.356Z',\n  },\n  {\n    id: 'custom-no5-a3c6ccb2',\n    title: 'Урок №5',\n    topicIds: ['demonstratives-this-that', 'colours-basics'],\n    createdAt: '2025-10-07T19:12:14.356Z',\n  },\n  {\n    id: 'custom-no6-da70b690',\n    title: 'Урок №6',\n    topicIds: ['possessive-pronouns-basics', 'family-relationships'],\n    createdAt: '2025-10-07T19:12:15.356Z',\n  },\n  {\n    id: 'custom-no7-43000f0c',\n    title: 'Урок №7',\n    topicIds: ['there-is-there-are-structures', 'home-rooms-furniture'],\n    createdAt: '2025-10-07T19:12:16.356Z',\n  },\n  {\n    id: 'custom-no8-846a8d9e',\n    title: 'Урок №8',\n    topicIds: ['prepositions-of-place', 'home-rooms-furniture'],\n    createdAt: '2025-10-07T19:12:17.356Z',\n  },\n  {\n    id: 'custom-no9-cf6e6bee',\n    title: 'Урок №9',\n    topicIds: ['prepositions-of-time', 'months-seasons'],\n    createdAt: '2025-10-07T19:12:18.356Z',\n  },\n  {\n    id: 'custom-no10-28500f64',\n    title: 'Урок №10',\n    topicIds: ['cardinal-numbers', 'numbers-0-100'],\n    createdAt: '2025-10-07T19:12:19.356Z',\n  },\n  {\n    id: 'custom-no11-d8d86e31',\n    title: 'Урок №11',\n    topicIds: ['it-is-structures', 'weather-seasons'],\n    createdAt: '2025-10-07T19:12:20.356Z',\n  },\n  {\n    id: 'custom-no12-93e53fe8',\n    title: 'Урок №12',\n    topicIds: ['word-order-sentences', 'appearance-personality'],\n    createdAt: '2025-10-07T19:12:21.356Z',\n  },\n  {\n    id: 'custom-no13-f4bcb910',\n    title: 'Урок №13',\n    topicIds: ['have-have-got', 'body-parts'],\n    createdAt: '2025-10-07T19:12:22.356Z',\n  },\n  {\n    id: 'custom-no14-40fdaa86',\n    title: 'Урок №14',\n    topicIds: ['modal-can-cant', 'sports-activities'],\n    createdAt: '2025-10-07T19:12:23.356Z',\n  },\n  {\n    id: 'custom-no15-ef51a27e',\n    title: 'Урок №15',\n    topicIds: ['like-love-hate-ing', 'hobbies-free-time'],\n    createdAt: '2025-10-07T19:12:24.356Z',\n  },\n  {\n    id: 'custom-no16-e3b3d783',\n    title: 'Урок №16',\n    topicIds: ['imperatives-basics', 'classroom-activities'],\n    createdAt: '2025-10-07T19:12:25.356Z',\n  },\n  {\n    id: 'custom-no17-6337b1c4',\n    title: 'Урок №17',\n    topicIds: ['present-simple-overview', 'daily-actions'],\n    createdAt: '2025-10-07T19:12:26.356Z',\n  },\n  {\n    id: 'custom-no18-b8435532',\n    title: 'Урок №18',\n    topicIds: ['adverbs-of-frequency', 'daily-routine'],\n    createdAt: '2025-10-07T19:12:27.356Z',\n  },\n  {\n    id: 'custom-no19-8d87b15e',\n    title: 'Урок №19',\n    topicIds: ['present-continuous-overview', 'household-actions'],\n    createdAt: '2025-10-07T19:12:28.356Z',\n  },\n  {\n    id: 'custom-no20-06a86866',\n    title: 'Урок №20',\n    topicIds: ['past-simple-to-be', 'leisure-holidays'],\n    createdAt: '2025-10-07T19:12:29.356Z',\n  },\n  {\n    id: 'custom-no21-670eb82c',\n    title: 'Урок №21',\n    topicIds: ['past-simple-regular-irregular', 'travel-basics'],\n    createdAt: '2025-10-07T19:12:30.356Z',\n  },\n  {\n    id: 'custom-no22-2073a55b',\n    title: 'Урок №22',\n    topicIds: ['future-simple-will', 'plans-future-events'],\n    createdAt: '2025-10-07T19:12:31.356Z',\n  },\n  {\n    id: 'custom-no23-21e7300b',\n    title: 'Урок №23',\n    topicIds: ['be-going-to-plans', 'leisure-holidays'],\n    createdAt: '2025-10-07T19:12:32.356Z',\n  },\n  {\n    id: 'custom-no24-29c54cf7',\n    title: 'Урок №24',\n    topicIds: ['prepositions-of-direction', 'directions-orientation'],\n    createdAt: '2025-10-07T19:12:33.356Z',\n  },\n  {\n    id: 'custom-no25-796a6730',\n    title: 'Урок №25',\n    topicIds: ['adjectives-order', 'clothes-footwear'],\n    createdAt: '2025-10-07T19:12:34.356Z',\n  },\n  {\n    id: 'custom-no26-9b5f1ffc',\n    title: 'Урок №26',\n    topicIds: ['adjectives-comparatives', 'city-places'],\n    createdAt: '2025-10-07T19:12:35.356Z',\n  },\n  {\n    id: 'custom-no27-6487572a',\n    title: 'Урок №27',\n    topicIds: ['quantifiers-some-any', 'food-drinks'],\n    createdAt: '2025-10-07T19:12:36.356Z',\n  },\n  {\n    id: 'custom-no28-7f7a2815',\n    title: 'Урок №28',\n    topicIds: ['how-much-how-many', 'shopping-basics'],\n    createdAt: '2025-10-07T19:12:37.356Z',\n  },\n  {\n    id: 'custom-no29-9710e19a',\n    title: 'Урок №29',\n    topicIds: ['countable-uncountable-nouns', 'meals-dining'],\n    createdAt: '2025-10-07T19:12:38.356Z',\n  },\n  {\n    id: 'custom-no30-b72e7840',\n    title: 'Урок №30',\n    topicIds: ['conjunctions-basics', 'health-wellbeing'],\n    createdAt: '2025-10-07T19:12:39.356Z',\n  },\n  {\n    id: 'custom-no31-2b6f7bda',\n    title: 'Урок №31',\n    topicIds: ['simple-sentences', 'city-places'],\n    createdAt: '2025-10-07T19:12:40.356Z',\n  },\n  {\n    id: 'custom-no32-deb561b3',\n    title: 'Урок №32',\n    topicIds: ['compound-sentences', 'transport-basics'],\n    createdAt: '2025-10-07T19:12:41.356Z',\n  },\n  {\n    id: 'custom-no33-9a2f527a',\n    title: 'Урок №33',\n    topicIds: ['comparisons-as-as', 'appearance-personality'],\n    createdAt: '2025-10-07T19:12:42.356Z',\n  },\n  {\n    id: 'custom-no34-5b2c8e22',\n    title: 'Урок №34',\n    topicIds: ['past-simple-regular-irregular', 'leisure-holidays'],\n    createdAt: '2025-10-07T19:12:43.356Z',\n  },\n  {\n    id: 'custom-no35-a6a8ac33',\n    title: 'Урок №35',\n    topicIds: ['present-simple-overview', 'jobs-professions'],\n    createdAt: '2025-10-07T19:12:44.356Z',\n  },\n  {\n    id: 'custom-no36-6a082f08',\n    title: 'Урок №36',\n    topicIds: ['modal-must-mustnt', 'classroom-activities'],\n    createdAt: '2025-10-07T19:12:45.356Z',\n  },\n  {\n    id: 'custom-no37-faa9b7b8',\n    title: 'Урок №37',\n    topicIds: ['gerund-after-verbs', 'hobbies-free-time'],\n    createdAt: '2025-10-07T19:12:46.356Z',\n  },\n  {\n    id: 'custom-no38-5206027c',\n    title: 'Урок №38',\n    topicIds: ['quantity-a-little-a-few', 'food-drinks'],\n    createdAt: '2025-10-07T19:12:47.356Z',\n  },\n  {\n    id: 'custom-no39-6b35cfd3',\n    title: 'Урок №39',\n    topicIds: ['question-tags-basics', 'social-expressions'],\n    createdAt: '2025-10-07T19:12:48.356Z',\n  },\n  {\n    id: 'custom-no40-4927837a',\n    title: 'Урок №40',\n    topicIds: ['prepositions-of-place', 'spatial-phrases-next-to'],\n    createdAt: '2025-10-07T19:12:49.356Z',\n  },\n  {\n    id: 'custom-no41-7ba1db93',\n    title: 'Урок №41',\n    topicIds: ['present-continuous-overview', 'leisure-holidays'],\n    createdAt: '2025-10-07T19:12:50.356Z',\n  },\n  {\n    id: 'custom-no42-29b5bb10',\n    title: 'Урок №42',\n    topicIds: ['future-simple-will', 'plans-future-events'],\n    createdAt: '2025-10-07T19:12:51.356Z',\n  },\n  {\n    id: 'custom-no43-7ecfedc0',\n    title: 'Урок №43',\n    topicIds: ['phone-internet-email'],\n    createdAt: '2025-10-07T19:12:52.356Z',\n  },\n  {\n    id: 'custom-no44-0e8b8ebd',\n    title: 'Урок №44',\n    topicIds: ['languages-communication'],\n    createdAt: '2025-10-07T19:12:53.356Z',\n  },\n  {\n    id: 'custom-no45-310fbeb4',\n    title: 'Урок №45',\n    topicIds: ['household-chores'],\n    createdAt: '2025-10-07T19:12:54.356Z',\n  },\n  {\n    id: 'custom-no46-ccb1de5a',\n    title: 'Урок №46',\n    topicIds: ['home-family-description'],\n    createdAt: '2025-10-07T19:12:55.356Z',\n  },\n  {\n    id: 'custom-no47-d6148758',\n    title: 'Урок №47',\n    topicIds: ['classroom-activities'],\n    createdAt: '2025-10-07T19:12:56.356Z',\n  },\n  {\n    id: 'custom-no48-3e5720c9',\n    title: 'Урок №48',\n    topicIds: ['spatial-phrases-in-front'],\n    createdAt: '2025-10-07T19:12:57.356Z',\n  },\n  {\n    id: 'custom-no49-f759cafd',\n    title: 'Урок №49',\n    topicIds: ['everyday-conversations'],\n    createdAt: '2025-10-07T19:12:58.356Z',\n  },\n  {\n    id: 'custom-no50-23930ae8',\n    title: 'Урок №50',\n    topicIds: ['social-expressions'],\n    createdAt: '2025-10-07T19:12:59.356Z',\n  },\n];\n"],"names":["instance","axios","loginUser","name","givenName","familyName","email","picture","data","admins","STORAGE_KEY","AUTH_STATE_KEY","signInContainer","profileContainer","nameElement","emailElement","avatarElement","signOutButton","currentUser","isInitialised","subscribers","hasHydratedFromStorage","hasBoundStorageListener","decodeJwtPayload","token","parts","base64","padded","decoded","char","error","serialiseUser","user","loadStoredUser","raw","safeSetJSON","key","value","nextValue","storeUser","payload","clearStoredUser","persistAuthState","state","isStoredUserValid","hasIdentity","hasCredential","cloneUser","shallowEqual","a","b","keysA","keysB","createSnapshot","notifySubscribers","reason","snapshot","listener","setCurrentUser","next","ensureStorageListener","handleStorageEvent","ensureHydratedFromStorage","syncFromStorage","toggleProfileVisibility","isVisible","showUser","options","persist","record","altName","hideUser","handleCredentialResponse","response","credential","handleSignOut","_c","_b","_a","applyUi","storedUser","validStoredUser","isExpired","event","initGoogleAuth","subscribe","refreshAuthState","auth","isSignedIn","customLessonPresets"],"mappings":"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"}