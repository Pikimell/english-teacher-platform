import{i as O,a as Z}from"./custom-lesson-presets-CTCipuxz.js";const W={},Oe=async p=>{const u=JSON.stringify(p),m=W[u];if(m)return m;const e=await O.post("/homework/list",p);return W[u]=e.data,e.data},me=async p=>(await O.post("/homework",p)).data;function Ce(p,u){const e=p.items.find(I=>I._id===u.taskId).answers,E=e.findIndex(I=>I.name==u.name);E>=0?e[E]=u:e.push(u);const v={taskId:u.taskId,answers:e};return U(v)}function ve(p,u){if(u.type==="radio")return Ce(p,u);const e=p.items.find(I=>I._id===u.taskId).answers,E=e.findIndex(I=>I.inputId==u.inputId),v={taskId:u.taskId,answers:e};return E>=0?e[E]=u:e.push(u),U(v)}const De=async p=>{const u=Object.keys(W);let m=W[u[0]];if(m)ve(m,p);else{const e={taskId:p.taskId,answers:[p]};return U(e)}},U=async({taskId:p,...u})=>(await O.patch(`/homework/${p}`,u)).data,Re=async p=>{const u={page:1,limit:100,userEmail:p},m=await O.post("/homework/lessons",u),{data:e}=m;return e.items=e.items.reverse(),e.items},we=async(p=1,u=1e3)=>(await O.get("/user")).data,L={users:null,request:null,active:null};function $e(){return L.users?Promise.resolve(L.users):(L.request||(L.request=we().then(p=>{const u=Array.isArray(p==null?void 0:p.items)?p.items:[];return L.users=u,u}).catch(p=>{throw console.error("Не вдалося завантажити список студентів",p),p}).finally(()=>{L.request=null})),L.request)}function Ee(p){if(!p||typeof p!="object")return"Невідомий студент";const u=p.firstName||p.firstname||p.nameFirst||"",m=p.lastName||p.lastname||p.nameLast||"";return[u,m].map(v=>String(v||"").trim()).filter(Boolean).join(" ")||p.displayName||p.fullName||p.username||p.email||(p.id?`ID ${p.id}`:"")||"Без імені"}function T(){if(!L.active)return;const{panel:p,button:u}=L.active;p.style.display="none",p.dataset.open="false",u.setAttribute("aria-expanded","false"),L.active=null}const H=new Set;let R=!1;function ee(p){const{button:u,panel:m}=p;if(!(!u||!m)){if(!u.isConnected&&!m.isConnected){H.delete(p);return}if(R){u.hidden=!1;return}u.hidden=!0,m.style.display="none",m.dataset.open="false"}}function Se(p,u){const m={button:p,panel:u};return H.add(m),ee(m),()=>{H.delete(m)}}function Ae(p){const u=!!p;R!==u&&(R=u,R||T(),H.forEach(m=>ee(m)))}function ke(p){if(!L.active)return;const{panel:u,button:m}=L.active,e=p.target;u.contains(e)||m.contains(e)||T()}function Le(p){p.key==="Escape"&&T()}document.addEventListener("click",ke);document.addEventListener("keydown",Le);function B(p,u={},...m){const e=document.createElement(p);for(const[E,v]of Object.entries(u||{}))E==="class"?e.className=v:E==="html"?e.innerHTML=v:E.startsWith("on")&&typeof v=="function"?e.addEventListener(E.slice(2),v):e.setAttribute(E,v);for(const E of m)E!=null&&e.appendChild(typeof E=="string"?document.createTextNode(E):E);return e}const M={triggerLabel:"Надіслати",triggerClassName:"practice-share-trigger for-admin js-share-homework-btn",triggerStyle:"border:none;background:#2563eb;color:#fff;padding:4px 10px;border-radius:999px;font-size:12px;line-height:1;cursor:pointer;box-shadow:0 4px 12px rgba(37,99,235,0.24);",panelClassName:"practice-share-panel",panelStyle:"position:absolute;top:38px;right:0;min-width:240px;max-width:280px;border:1px solid #e2e8f0;border-radius:12px;background:#fff;box-shadow:0 18px 40px rgba(15,23,42,0.18);padding:8px;z-index:30;display:none;",emptyMessage:"Список студентів порожній",loadingMessage:"Завантаження…",errorMessage:"Не вдалося завантажити студентів. Спробуйте ще раз.",formatStudentName:Ee,fetchStudents:$e,getContext:null,onShare:()=>{},renderDetails:p=>p!=null&&p.email?B("span",{class:"muted",style:"font-size:12px;color:#475569;"},p.email):null};function Ie(p={}){const u={...M,...p};return u.fetchStudents=typeof p.fetchStudents=="function"?p.fetchStudents:M.fetchStudents,u.formatStudentName=typeof p.formatStudentName=="function"?p.formatStudentName:M.formatStudentName,u.renderDetails=typeof p.renderDetails=="function"?p.renderDetails:M.renderDetails,u.onShare=typeof p.onShare=="function"?p.onShare:M.onShare,u.getContext=typeof p.getContext=="function"?p.getContext:()=>p.context,u}function _e(p,u,m){if(p.innerHTML="",!u.length){p.appendChild(B("div",{class:"muted",style:"font-size:13px;text-align:center;padding:12px 8px;"},m.emptyMessage));return}const e=B("ul",{style:"list-style:none;margin:0;padding:0;max-height:220px;overflow:auto;"}),E=typeof m.getContext=="function"?m.getContext:M.getContext;u.forEach(v=>{const I=B("button",{type:"button",style:"width:100%;background:transparent;border:none;text-align:left;padding:8px 10px;border-radius:8px;cursor:pointer;display:flex;flex-direction:column;gap:2px;",onmouseenter:()=>{I.style.backgroundColor="#f1f5f9"},onmouseleave:()=>{I.style.backgroundColor="transparent"},onclick:()=>{const z=typeof E=="function"?E(v):void 0;try{const q=m.onShare({student:v,context:z});if(q&&typeof q.then=="function"){I.disabled=!0,Promise.resolve(q).then(j=>{j!==!1&&T()}).catch(j=>{console.error("Помилка під час надсилання завдання",j),T()}).finally(()=>{I.disabled=!1});return}q!==!1&&T()}catch(q){console.error("Помилка під час надсилання завдання",q),T()}}},B("span",{style:"font-size:14px;font-weight:600;color:#0f172a;"},m.formatStudentName(v)),m.renderDetails?m.renderDetails(v):null),k=B("li",{style:"margin:0;padding:0;"},I);e.appendChild(k)}),p.appendChild(e)}function Be(p){return B("div",{class:p.panelClassName,role:"dialog","aria-label":"Надсилання завдання студенту",style:p.panelStyle,"data-open":"false"})}function Te(p,u,m){if(u.dataset.open==="true"){T();return}L.active&&L.active.panel!==u&&T(),u.dataset.open="true",u.style.display="block",p.setAttribute("aria-expanded","true"),u.innerHTML="",u.appendChild(B("div",{class:"muted",style:"font-size:13px;padding:12px 8px;text-align:center;"},m.loadingMessage)),L.active={panel:u,button:p},Promise.resolve(m.fetchStudents()).then(E=>{_e(u,Array.isArray(E)?E:[],m)}).catch(()=>{u.innerHTML="",u.appendChild(B("div",{style:"color:#ef4444;font-size:13px;text-align:center;padding:12px 8px;"},m.errorMessage))})}function qe(p,u){const m=B("button",{type:"button",class:u.triggerClassName,title:"Надіслати студенту","aria-haspopup":"dialog","aria-expanded":"false",style:u.triggerStyle,onclick:e=>{e.preventDefault(),Te(m,p,u)}},u.triggerLabel);return m}function Ne(p={}){const u=Ie(p),m=Be(u),e=qe(m,u),E=Se(e,m);return{button:e,panel:m,unregister:E}}function Pe(p){return!!(L.active&&L.active.panel===p)}const Me={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ze=function(){const p=typeof import.meta<"u"&&Me&&"/"||"/";function u(n){const t=p.endsWith("/")?p:`${p}/`,s=String(n||"");return/^[a-z]+:/i.test(s)||s.startsWith(t)?s:`${t}${s.replace(/^\/+/,"")}`}function m(){try{const t=new URL(window.location.href).pathname.split("/");let s=t.pop();(!s||!/\.html?$/i.test(s))&&(s="index.html");const f=s.replace(/\.html?$/i,".json");return t.push("practice",f),t.join("/")}catch{return null}}function e(n,t={},...s){const f=document.createElement(n);for(const[c,i]of Object.entries(t||{}))c==="class"?f.className=i:c==="html"?f.innerHTML=i:c.startsWith("on")&&typeof i=="function"?f.addEventListener(c.slice(2),i):f.setAttribute(c,i);for(const c of s)c!=null&&f.appendChild(typeof c=="string"?document.createTextNode(c):c);return f}function E(n){const t=n.slice();for(let s=t.length-1;s>0;s--){const f=Math.floor(Math.random()*(s+1));[t[s],t[f]]=[t[f],t[s]]}return t}function v(n){return String(n||"").trim().toLowerCase().replace(/\s+/g," ")}let I=0;function k(n="practice-input"){return I+=1,`${String(n||"practice-input").trim().replace(/[^a-z0-9_-]+/gi,"-").replace(/^-+|-+$/g,"")||"practice-input"}-${I}`}Z.subscribe(({user:n})=>{Ae(Z.isAdmin(n))});function z(n){const t=e("div",{class:"hint-wrap",style:"margin-top:6px;"}),s=e("button",{type:"button",class:"hint-toggle","aria-label":"Показати підказку",title:"Підказка",style:"border:none;background:transparent;color:#94a3b8;cursor:pointer;padding:0;font-size:14px;line-height:1;"},"?"),f=e("div",{class:"hint-box muted",style:"display:none;margin-top:6px;color:#475569;"},`Підказка: ${n}`);return s.addEventListener("click",()=>{const c=f.style.display==="none";f.style.display=c?"block":"none",s.setAttribute("aria-expanded",c?"true":"false")}),t.appendChild(s),t.appendChild(f),t}function q(n,t){n.appendChild(e("h3",{},t.prompt||"Choose the correct option"));const s=[];(t.items||[]).forEach((i,r)=>{const o=`${t.id||"mcq"}-${r}`,h=Array.isArray(i.answer)&&i.answer.length>1,a=e("div",{class:"mcq-item",style:"margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"},e("div",{class:"q",style:"margin-bottom:8px;font-weight:600;"},i.q));(i.choices||[]).forEach((d,l)=>{const g=k(`${o}-${l}`),b=e("label",{for:g,style:"display:flex;align-items:center;gap:8px;margin:4px 0;"},e("input",{type:h?"checkbox":"radio",name:o,id:g,value:String(l)}),e("span",{},d));a.appendChild(b)}),i.explanation&&a.appendChild(e("div",{class:"exp muted",style:"display:none;margin-top:6px;color:#475569;"},i.explanation)),s.push({block:a,item:i,name:o}),n.appendChild(a)});const f=e("div",{class:"result",style:"margin-top:8px;font-weight:600;"}),c=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");c.addEventListener("click",()=>{let i=0;s.forEach(({block:r,item:o,name:h})=>{const a=Array.isArray(o.answer)?o.answer.map(String):[String(o.answer)],l=Array.from(r.querySelectorAll(`input[name='${h}']`)).filter(x=>x.checked).map(x=>x.value).sort(),g=a.slice().sort(),b=l.length===g.length&&l.every((x,C)=>x===g[C]);r.style.borderColor=b?"#10b981":"#ef4444";const w=r.querySelector(".exp");w&&(w.style.display=b?"none":"block"),b&&i++}),f.textContent=`Результат: ${i}/${s.length}`}),n.appendChild(c),n.appendChild(f)}function j(n,t){n.appendChild(e("h3",{},t.prompt||"Fill the gaps"));const s=[];(t.items||[]).forEach((i,r)=>{const o=e("div",{style:"margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"}),h=String(i.q||"").split(/___/),a=k(`${t.id||"gap"}-${r}`),d=e("input",{type:"text",id:a,style:"padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});h.length>1?(o.appendChild(e("span",{},h[0])),o.appendChild(d),o.appendChild(e("span",{},h.slice(1).join("___")))):(o.appendChild(e("div",{style:"margin-bottom:6px;font-weight:600;"},i.q)),o.appendChild(d)),i.hint&&o.appendChild(z(i.hint)),s.push({row:o,input:d,answers:(i.answer||[]).map(l=>v(l))}),n.appendChild(o)});const f=e("div",{style:"margin-top:8px;font-weight:600;"}),c=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");c.addEventListener("click",()=>{let i=0;s.forEach(({row:r,input:o,answers:h})=>{const a=v(o.value),d=h.includes(a);r.style.borderColor=d?"#10b981":"#ef4444",d&&i++}),f.textContent=`Результат: ${i}/${s.length}`}),n.appendChild(c),n.appendChild(f)}function F(n,t){n.appendChild(e("h3",{},t.prompt||"Match pairs"));const s=t.pairs||[],f=E(s.map(o=>o.right)),c=[];s.forEach((o,h)=>{const a=k(`${t.id||"match"}-${h}`),d=e("select",{id:a,style:"padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"},e("option",{value:""},"— обери —"),...f.map(g=>e("option",{value:g},g))),l=e("div",{style:"display:flex;align-items:center;gap:10px;margin:8px 0;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"},e("label",{for:a,style:"min-width:160px;font-weight:600;"},o.left),d);c.push({row:l,select:d,right:o.right}),n.appendChild(l)});const i=e("div",{style:"margin-top:8px;font-weight:600;"}),r=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");r.addEventListener("click",()=>{let o=0;c.forEach(({row:h,select:a,right:d})=>{const l=a.value===d;h.style.borderColor=l?"#10b981":"#ef4444",l&&o++}),i.textContent=`Результат: ${o}/${c.length}`}),n.appendChild(r),n.appendChild(i)}function te(n,t){n.appendChild(e("h3",{},t.prompt||"Прочитайте текст та дайте відповіді"));const s=t.context||{},f=String(s.format||"narrative").toLowerCase(),c=Array.isArray(s.body)?s.body:[],i=e("div",{style:"margin:12px 0;padding:14px;border:1px solid #cbd5e1;border-radius:10px;background:#f8fafc;"});s.title&&i.appendChild(e("h4",{style:"margin:0 0 8px;font-size:18px;"},s.title)),f==="dialog"?c.forEach(d=>{if(!d)return;const l=typeof d=="object"&&d.speaker?`${d.speaker}:`:"",g=typeof d=="object"&&"line"in d?d.line:typeof d=="string"?d:"";i.appendChild(e("p",{style:"margin:4px 0;display:flex;gap:6px;align-items:flex-start;line-height:1.5;"},l?e("strong",{},l):null,e("span",{},g)))}):c.forEach((d,l)=>{const g=typeof d=="string"?d:d&&d.text?d.text:"";g&&i.appendChild(e("p",{style:l?"margin:8px 0 0;":"margin:0;"},g))}),n.appendChild(i);const r=Array.isArray(t.questions)?t.questions:[];if(!r.length)return;const o=[];r.forEach((d,l)=>{const g=e("div",{style:"margin-bottom:8px;font-weight:600;"},d.q||`Питання ${l+1}`),b=e("div",{style:"margin-bottom:12px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"},g),w=Array.isArray(d.answer)?d.answer.map(String):d.answer!=null?[String(d.answer)]:[];if(Array.isArray(d.choices)&&d.choices.length){const x=`${t.id||"context"}-${l}`,C=w.length>1,$=w.every(y=>/^\d+$/.test(y));d.choices.forEach((y,S)=>{const A=k(`${x}-${S}`);b.appendChild(e("label",{for:A,style:"display:flex;align-items:center;gap:8px;margin:4px 0;"},e("input",{type:C?"checkbox":"radio",name:x,id:A,value:String(S)}),e("span",{},y)))}),o.push({block:b,type:"choices",allowMulti:C,getPicked:()=>{const S=Array.from(b.querySelectorAll(`input[name='${x}']`)).filter(A=>A.checked).map(A=>A.value);return $?S:S.map(A=>v(d.choices[Number(A)]||""))},expected:$?w:w.map(y=>v(y))})}else{const x=k(`${t.id||"context-label"}-${l}`);g.setAttribute("id",x);const C=k(`${t.id||"context-text"}-${l}`),$=e("textarea",{id:C,rows:2,style:"width:100%;max-width:640px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});$.setAttribute("aria-labelledby",x),b.appendChild($),o.push({block:b,type:"text",input:$,expected:w.map(y=>v(y))})}d.explanation&&b.appendChild(e("div",{class:"muted",style:"display:none;margin-top:6px;color:#475569;"},d.explanation)),n.appendChild(b)});const h=e("div",{style:"margin-top:8px;font-weight:600;"}),a=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");a.addEventListener("click",()=>{let d=0;o.forEach(l=>{let g=!1;if(l.type==="choices"){const w=l.getPicked().sort(),x=l.expected.slice().sort();g=w.length===x.length&&w.every((C,$)=>C===x[$])}else{const w=v(l.input.value);g=l.expected.length?l.expected.includes(w):!!w}l.block.style.borderColor=g?"#10b981":"#ef4444";const b=l.block.querySelector(".muted");b&&(b.style.display=g?"none":"block"),g&&d++}),h.textContent=`Результат: ${d}/${o.length}`}),n.appendChild(a),n.appendChild(h)}function D(n,t,s,f={}){const{showRemove:c=!0}=f,i=s||(t&&t.id?String(t.id):`task-${Math.random().toString(16).slice(2,8)}`),r=e("section",{style:"position:relative;margin:18px 0 26px;","data-task-id":t&&t.id?String(t.id):"","data-task-key":i}),o=e("div",{style:"position:absolute;top:6px;right:6px;display:flex;gap:6px;align-items:center;z-index:5;"}),{button:h,panel:a,unregister:d}=Ne({context:t,onShare:({student:b,context:w})=>{const x=window.location.search.slice(8),C=document.querySelector("h1"),$=C?C.textContent:"",y={lessonId:x,userEmail:b.email,lessonName:$,homeworkType:"task",homeworkData:JSON.stringify(w)};return me(y)}});if(o.appendChild(h),c){const b=e("button",{type:"button",title:"Видалити завдання","aria-label":"Видалити завдання",class:"for-admin",style:"border:none;background:transparent;color:#94a3b8;cursor:pointer;padding:2px;line-height:1;font-size:14px;opacity:0.6;",onmouseenter:()=>b.style.opacity="1",onmouseleave:()=>b.style.opacity="0.6",onclick:()=>{Pe(a)&&T(),document.dispatchEvent(new CustomEvent("practice:taskRemoved",{detail:{key:i,task:t}})),d(),r.remove()}},"✕");o.appendChild(b)}r.appendChild(o),r.appendChild(a),t.title&&r.appendChild(e("h3",{},t.title));const l=t&&t.type;switch(String(l||"").trim().toLowerCase()){case"mcq":q(r,t);break;case"gap":j(r,t);break;case"match":F(r,t);break;case"context":te(r,t);break;case"transform":re(r,t);break;case"error":oe(r,t);break;case"order":ie(r,t);break;case"short":ae(r,t);break;case"roleplay":de(r,t);break;case"dialogue-gap":pe(r,t);break;case"dialogue-order":le(r,t);break;case"truefalse":ce(r,t);break;case"definition-match":{const b={...t,prompt:t.prompt||"Поєднай слово з визначенням"};F(r,b);break}case"synonym-clue":fe(r,t);break;case"scramble":ue(r,t);break;case"wordpairs":{const b={...t,prompt:t.prompt||"Поєднай форму в однині та множині"};F(r,b);break}case"odd-one-out":he(r,t);break;case"open":se(r,t);break;case"writing":xe(r,t);break;default:r.appendChild(e("div",{class:"muted"},`Невідомий тип завдання: ${l}`))}return n.appendChild(r),r}function J(n,t={}){const s=Q();if(!s||!n)return;const f=s.querySelector("#practice-body")||s,c=t.showRemove!==!1;D(f,n,t.key,{showRemove:c})}function G(n,t,s={}){if(!n)return null;const f=Array.isArray(t)?t.filter(Boolean):[],{title:c,level:i,description:r,keyPrefix:o="inline",showEmptyNote:h=!1,showRemove:a=!1}=s;if(!f.length){if(h){const l=e("p",{class:"muted practice-inline__empty"},"Практика для цієї теми поки відсутня.");n.appendChild(l)}return null}const d=e("section",{class:"practice-inline"});if(c||i||r){const l=e("header",{class:"practice-inline__header"});c&&l.appendChild(e("h3",{class:"practice-inline__title"},c)),i&&l.appendChild(e("span",{class:"practice-inline__badge"},i)),r&&l.appendChild(e("p",{class:"practice-inline__description muted"},r)),d.appendChild(l)}return f.forEach((l,g)=>{const b=`${o}-${g}`;D(d,l,b,{showRemove:a})}),n.appendChild(d),document.dispatchEvent(new CustomEvent("practice:inlineRendered",{detail:{tasks:f,container:n,options:s}})),d}function V(n,t={}){if(!n)return null;const s=document.createDocumentFragment(),f=t.showRemove!==!1;return D(s,n,t.key,{showRemove:f})}async function K(n){if(!n)return null;const t=u(n);try{const s=await fetch(t,{cache:"no-store"});return s.ok?await s.json():null}catch{return null}}async function ne(){const n=document.getElementById("practice-data");if(n)try{return JSON.parse(n.textContent)}catch{return null}const t=window.lessonContext||{},s=new Set;if(t.id&&s.add(`data/practice/${t.id}.json`),t.htmlPath){const c=String(t.htmlPath).replace(/^\.\/?/,"").replace(/\.html?$/i,"");if(c){s.add(`data/practice/${c}.json`);const i=c.split("/"),r=i[i.length-1];r&&s.add(`data/practice/${r}.json`)}}for(const c of s){const i=await K(c);if(i)return i}const f=m();return f?await K(f):null}function re(n,t){n.appendChild(e("h3",{},t.prompt||"Transform the sentence"));const s=[];(t.items||[]).forEach((i,r)=>{const o=e("div",{style:"margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"});o.appendChild(e("div",{style:"margin-bottom:6px;font-weight:600;"},i.q));const h=k(`${t.id||"transform"}-${r}`),a=e("input",{type:"text",id:h,style:"width:100%;max-width:640px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});o.appendChild(a),i.hint&&o.appendChild(z(i.hint)),s.push({row:o,input:a,answers:(i.answer||[]).map(d=>v(d))}),n.appendChild(o)});const f=e("div",{style:"margin-top:8px;font-weight:600;"}),c=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");c.addEventListener("click",()=>{let i=0;s.forEach(({row:r,input:o,answers:h})=>{const a=h.includes(v(o.value));r.style.borderColor=a?"#10b981":"#ef4444",a&&i++}),f.textContent=`Результат: ${i}/${s.length}`}),n.appendChild(c),n.appendChild(f)}function oe(n,t){n.appendChild(e("h3",{},t.prompt||"Find and correct the error"));const s=[];(t.items||[]).forEach((i,r)=>{const o=e("div",{style:"margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"});o.appendChild(e("div",{style:"margin-bottom:6px;font-weight:600;"},i.q));const h=k(`${t.id||"error"}-${r}`),a=e("input",{type:"text",id:h,style:"width:100%;max-width:640px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});o.appendChild(a),i.hint&&o.appendChild(z(i.hint)),s.push({row:o,input:a,answers:(i.answer||[]).map(d=>v(d))}),n.appendChild(o)});const f=e("div",{style:"margin-top:8px;font-weight:600;"}),c=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");c.addEventListener("click",()=>{let i=0;s.forEach(({row:r,input:o,answers:h})=>{const a=h.includes(v(o.value));r.style.borderColor=a?"#10b981":"#ef4444",a&&i++}),f.textContent=`Результат: ${i}/${s.length}`}),n.appendChild(c),n.appendChild(f)}function ie(n,t){n.appendChild(e("h3",{},t.prompt||"Put the words in order"));const s=[];(t.items||[]).forEach((i,r)=>{const o=v(Array.isArray(i.answer)?i.answer.join(" "):i.answer),h=E((i.tokens||[]).slice()),a=e("div",{style:"margin:10px 0;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"}),d=e("div",{style:"display:flex;flex-wrap:wrap;gap:6px;margin-bottom:6px;"}),l=e("div",{style:"display:flex;flex-wrap:wrap;gap:6px;min-height:36px;padding:6px;border:1px dashed #cbd5e1;border-radius:8px;background:#f8fafc;"}),g=new Set;function b(C,$){const y=e("button",{type:"button",style:"padding:4px 8px;border:1px solid #cbd5e1;border-radius:6px;background:#fff;cursor:pointer;"},C);return y.addEventListener("click",()=>{g.has($)||(g.add($),y.style.opacity=.5,l.appendChild(e("span",{class:"chip",style:"padding:4px 8px;border:1px solid #cbd5e1;border-radius:6px;background:#fff;"},C)))}),y}h.forEach((C,$)=>d.appendChild(b(C,`${r}-${$}`)));const w=e("div",{style:"margin-top:6px;display:flex;gap:8px;"}),x=e("button",{type:"button",class:"btn"},"Скинути");x.addEventListener("click",()=>{g.clear(),l.innerHTML="",Array.from(d.children).forEach(C=>C.style.opacity=1),a.style.borderColor="#e5e7eb"}),w.appendChild(x),a.appendChild(e("div",{style:"margin-bottom:6px;font-weight:600;"},i.q||"")),a.appendChild(d),a.appendChild(l),a.appendChild(w),s.push({row:a,outWrap:l,correctStr:o}),n.appendChild(a)});const f=e("div",{style:"margin-top:8px;font-weight:600;"}),c=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");c.addEventListener("click",()=>{let i=0;s.forEach(({row:r,outWrap:o,correctStr:h})=>{const d=v(Array.from(o.querySelectorAll(".chip")).map(l=>l.textContent).join(" "))===h;r.style.borderColor=d?"#10b981":"#ef4444",d&&i++}),f.textContent=`Результат: ${i}/${s.length}`}),n.appendChild(c),n.appendChild(f)}function ae(n,t){n.appendChild(e("h3",{},t.prompt||"Short answer"));const s=[];(t.items||[]).forEach((i,r)=>{const o=e("div",{style:"margin-bottom:10px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"}),h=e("div",{style:"margin-bottom:6px;font-weight:600;"},i.q);o.appendChild(h);const a=k(`${t.id||"short-label"}-${r}`);h.setAttribute("id",a);const d=k(`${t.id||"short-text"}-${r}`),l=e("textarea",{id:d,rows:3,style:"width:100%;max-width:720px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});l.setAttribute("aria-labelledby",a),o.appendChild(l),s.push({row:o,input:l,keywords:(i.keywords||[]).map(g=>v(g))}),n.appendChild(o)});const f=e("div",{style:"margin-top:8px;font-weight:600;"}),c=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Перевірити");c.addEventListener("click",()=>{let i=0,r=0;s.forEach(({row:o,input:h,keywords:a})=>{const d=v(h.value),l=a.filter(b=>d.includes(b)).length;i+=l,r+=a.length,o.style.borderColor=l===a.length?"#10b981":l>0?"#f59e0b":"#ef4444";const g=o.querySelector(".short-info")||e("div",{class:"short-info",style:"margin-top:6px;color:#475569;"});g.textContent=`Збіги ключових слів: ${l}/${a.length}`,o.contains(g)||o.appendChild(g)}),f.textContent=`Загальний збіг ключових слів: ${i}/${r}`}),n.appendChild(c),n.appendChild(f)}function se(n,t){n.appendChild(e("h3",{},t.prompt||"Відповіді у вільній формі"));const s=Array.isArray(t&&t.items)?t.items.filter(Boolean):[];if(s.length){const c=e("div",{style:"display:flex;flex-direction:column;gap:12px;margin-top:12px;"});s.forEach((i,r)=>{const o=e("div",{style:"padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"}),h=i&&(i.situation||i.prompt||i.q)||`Ситуація ${r+1}`;o.appendChild(e("div",{style:"margin:0 0 6px;font-weight:600;color:#0f172a;"},h));const a=i&&Array.isArray(i.example_answers)?i.example_answers.filter(Boolean):[];if(a.length){o.appendChild(e("div",{class:"muted",style:"margin:0 0 6px;color:#64748b;"},"Приклад відповіді:"));const d=e("div",{style:"display:flex;flex-wrap:wrap;gap:8px;"});a.forEach(l=>{d.appendChild(e("span",{style:"display:inline-flex;align-items:center;padding:4px 10px;border-radius:9999px;background:#e2e8f0;color:#0f172a;font-size:14px;"},l))}),o.appendChild(d)}c.appendChild(o)}),n.appendChild(c)}const f=t&&t.scoring&&Array.isArray(t.scoring.criteria)?t.scoring.criteria.filter(Boolean):[];if(f.length){const c=e("div",{style:"margin-top:16px;padding:14px;border:1px dashed #cbd5e1;border-radius:10px;background:#f8fafc;"});c.appendChild(e("h4",{style:"margin:0 0 8px;font-size:16px;font-weight:600;color:#0f172a;"},"Критерії оцінювання"));const i=e("ul",{style:"margin:0;padding-left:18px;color:#475569;"});f.forEach(r=>{i.appendChild(e("li",{style:"margin:4px 0;"},r))}),c.appendChild(i),n.appendChild(c)}}function de(n,t){n.appendChild(e("h3",{},t.prompt||"Role-play scenario"));const s=t&&typeof t.scenario=="object"?t.scenario:{},f=e("div",{style:"margin:12px 0;padding:14px;border:1px solid #cbd5e1;border-radius:10px;background:#f8fafc;"});let c=!1;s.setting&&(f.appendChild(e("p",{style:"margin:0 0 6px;font-weight:600;"},`Локація: ${s.setting}`)),c=!0),s.summary&&(f.appendChild(e("p",{style:"margin:0;color:#334155;"},s.summary)),c=!0),c&&n.appendChild(f);const i=Array.isArray(s.roles)?s.roles:[];if(i.length){const h=e("div",{style:"display:grid;gap:12px;margin-top:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));"});i.forEach((a,d)=>{const l=a&&a.name||`Student ${d+1}`,g=e("div",{style:"padding:14px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;box-shadow:0 1px 0 rgba(148, 163, 184, 0.2);"},e("div",{style:"font-weight:600;margin-bottom:6px;"},l));a&&a.goal&&g.appendChild(e("p",{style:"margin:0 0 6px;color:#0f172a;"},`Мета: ${a.goal}`));const w=(a&&Array.isArray(a.details)?a.details:typeof(a==null?void 0:a.details)=="string"?a.details.split(/[;,\n]/):[]).map(x=>String(x||"").trim()).filter(Boolean);if(w.length===1)g.appendChild(e("p",{style:"margin:0;color:#475569;"},w[0]));else if(w.length>1){const x=e("ul",{style:"margin:0;padding-left:18px;color:#475569;"});w.forEach(C=>{x.appendChild(e("li",{style:"margin:2px 0;"},C))}),g.appendChild(x)}h.appendChild(g)}),n.appendChild(h)}const r=Array.isArray(s.steps)?s.steps:[];if(r.length){const h=e("div",{style:"margin-top:16px;padding:14px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"});h.appendChild(e("h4",{style:"margin:0 0 6px;font-size:16px;font-weight:600;color:#0f172a;"},"Покроковий план діалогу"));const a=e("ol",{style:"margin:0 0 0 18px;padding:0;color:#475569;"});r.forEach(d=>{d&&a.appendChild(e("li",{style:"margin:4px 0;"},d))}),h.appendChild(a),n.appendChild(h)}const o=Array.isArray(t&&t.phrases)?t.phrases:[];if(o.length){n.appendChild(e("h4",{style:"margin:18px 0 8px;font-size:16px;font-weight:600;color:#0f172a;"},"Корисні фрази для діалогу"));const h=e("div",{style:"display:flex;flex-direction:column;gap:8px;"});o.forEach((a,d)=>{const l=typeof a=="string"?a:a&&(a.phrase||a.text||a.value||""),g=a&&typeof a=="object"&&(a.translation||a.note||a.ua||a.uk)||"";if(!l)return;const b=k(`phrase-${d}`);h.appendChild(e("label",{for:b,style:"display:flex;gap:10px;align-items:flex-start;padding:10px 12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"},e("input",{id:b,type:"checkbox",style:"margin-top:4px;"}),e("div",{},e("span",{style:"font-weight:600;color:#0f172a;"},l),g?e("span",{class:"muted",style:"display:block;margin-top:4px;color:#475569;"},g):null)))}),n.appendChild(h)}}function pe(n,t){n.appendChild(e("h3",{},t.prompt||"Заповніть пропуски у діалозі"));const s=Array.isArray(t==null?void 0:t.answers)?t.answers.map(y=>v(y)):[],f=[];let c=null;function i(y){c&&c!==y&&(c.style.boxShadow="none"),y&&c!==y?(y.style.boxShadow="0 0 0 2px rgba(37, 99, 235, 0.35)",c=y):(y&&(y.style.boxShadow="none"),c=null)}function r(y){y&&(y.dataset.value="",y.textContent="___",y.style.borderColor="#cbd5e1",y.style.background="#fff",y.style.boxShadow="none")}const o=e("div",{style:"display:flex;flex-wrap:wrap;gap:8px;margin:12px 0;padding:10px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;"}),h=Array.isArray(t==null?void 0:t.words)?t.words:[],a=new Set,d=[];h.forEach(y=>{const S=String(y||"").trim();if(!S)return;const A=v(S);a.has(A)||(a.add(A),d.push(S))}),d.forEach(y=>{const S=e("button",{type:"button",class:"btn",style:"padding:6px 10px;border:1px solid #94a3b8;border-radius:999px;background:#fff;color:#0f172a;cursor:pointer;font-size:14px;line-height:1;",onclick:()=>{const A=c||f.find(N=>!N.dataset.value);A&&(A.dataset.value=y,A.textContent=y,A.style.borderColor="#2563eb",A.style.background="#eef2ff",i(null))}},y);S.dataset.word=y,o.appendChild(S)}),o.children.length&&n.appendChild(o);const l=e("div",{style:"display:flex;flex-direction:column;gap:10px;"}),g=Array.isArray(t==null?void 0:t.dialogue)?t.dialogue:[];let b=0;g.forEach(y=>{if(!y)return;const S=y.speaker||y.role||"",A=y.line||y.text||"",N=e("div",{style:"padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;display:flex;gap:10px;align-items:flex-start;"},S?e("strong",{style:"min-width:90px;"},`${S}:`):null),P=e("div",{style:"display:flex;flex-wrap:wrap;gap:6px;align-items:center;"}),X=String(A||"").split(/___/);X.forEach((Y,ye)=>{if(Y&&P.appendChild(e("span",{},Y)),ye<X.length-1){const be=s[b]||"",_=e("button",{type:"button",style:"min-width:52px;padding:4px 10px;border:1px solid #cbd5e1;border-radius:8px;background:#fff;color:#0f172a;cursor:pointer;",onclick:()=>{if(_.dataset.value){r(_),i(_);return}i(c===_?null:_)},ondblclick:()=>{r(_),i(null)}},"___");_.dataset.expected=be,_.dataset.index=String(b),f.push(_),b+=1,P.appendChild(_)}}),N.appendChild(P),l.appendChild(N)}),n.appendChild(l);const w=e("div",{style:"margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;"}),x=e("button",{type:"button",class:"btn primary"},"Перевірити"),C=e("button",{type:"button",class:"btn"},"Скинути"),$=e("div",{style:"font-weight:600;color:#0f172a;"});x.addEventListener("click",()=>{let y=0;f.forEach(S=>{const A=S.dataset.expected||"",N=v(S.dataset.value||S.textContent||""),P=A?N===A:!!N;S.style.borderColor=P?"#10b981":"#ef4444",S.style.background=P?"#ecfdf5":"#fee2e2",P&&(y+=1)}),f.length?$.textContent=`Результат: ${y}/${f.length}`:$.textContent=""}),C.addEventListener("click",()=>{f.forEach(y=>r(y)),$.textContent="",i(null)}),w.appendChild(x),w.appendChild(C),w.appendChild($),n.appendChild(w)}function le(n,t){n.appendChild(e("h3",{},t.prompt||"Упорядкуйте діалог"));const s=Array.isArray(t==null?void 0:t.lines)?t.lines.map(x=>({speaker:(x==null?void 0:x.speaker)||(x==null?void 0:x.role)||"",text:(x==null?void 0:x.line)||(x==null?void 0:x.text)||""})):[],f=Array.isArray(t==null?void 0:t.solution)?t.solution.map(x=>Number.parseInt(x,10)):s.map((x,C)=>C),c=e("div",{style:"display:flex;flex-direction:column;gap:8px;margin-top:10px;padding:10px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;"}),i=e("div",{style:"margin-top:14px;padding:12px;border:1px dashed #cbd5e1;border-radius:10px;min-height:80px;display:flex;flex-direction:column;gap:8px;"}),r=new Set;function o({speaker:x,text:C}){return(x?`${x}: ${C}`:C).trim()}function h(x){if(!x)return;const C=Number.parseInt(x.dataset.index||"-1",10),$=x.dataset.buttonId;if($){const y=c.querySelector(`[data-id="${$}"]`);y&&(y.disabled=!1,y.style.opacity="1")}r.delete(C),x.remove()}function a(x,C,$){const y=e("div",{class:"dialogue-chip",style:"padding:10px;border:1px solid #94a3b8;border-radius:10px;background:#fff;display:flex;justify-content:space-between;align-items:center;gap:12px;cursor:pointer;",onclick:S=>{S.stopPropagation(),h(y)}},e("span",{},C),e("span",{style:"color:#94a3b8;font-size:12px;"},"×"));y.dataset.index=String(x),y.dataset.buttonId=$,i.appendChild(y)}E(s.map((x,C)=>C)).forEach(x=>{const C=s[x],$=o(C),y=`line-${x}-${Math.random().toString(36).slice(2,6)}`,S=e("button",{type:"button",class:"btn",style:"text-align:left;padding:10px;border:1px solid #cbd5e1;border-radius:10px;background:#fff;color:#0f172a;cursor:pointer;",onclick:()=>{r.has(x)||(r.add(x),S.disabled=!0,S.style.opacity="0.5",a(x,$,y))},"data-id":y},$);c.appendChild(S)}),n.appendChild(c),n.appendChild(i);const l=e("div",{style:"margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;"}),g=e("button",{type:"button",class:"btn primary"},"Перевірити"),b=e("button",{type:"button",class:"btn"},"Скинути"),w=e("div",{style:"font-weight:600;color:#0f172a;"});g.addEventListener("click",()=>{const x=Array.from(i.children).map(y=>Number.parseInt(y.dataset.index||"-1",10)),C=f.slice(),$=x.length===C.length&&x.every((y,S)=>y===C[S]);i.style.borderColor=$?"#10b981":"#ef4444",w.textContent=$?"Діалог впорядковано правильно!":`Поточний порядок: ${x.length}/${C.length} реплік. Перевірте послідовність.`}),b.addEventListener("click",()=>{Array.from(i.children).forEach(C=>h(C)),c.querySelectorAll("button").forEach(C=>{C.disabled=!1,C.style.opacity="1"}),r.clear(),i.style.borderColor="#cbd5e1",w.textContent=""}),l.appendChild(g),l.appendChild(b),l.appendChild(w),n.appendChild(l)}function ce(n,t){n.appendChild(e("h3",{},t.prompt||"Обери True або False"));const s=[];if((Array.isArray(t==null?void 0:t.items)?t.items:[]).forEach((o,h)=>{if(!o||!o.statement)return;const a=e("div",{style:"margin:8px 0;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"},e("p",{style:"margin:0 0 8px;font-weight:600;"},o.statement)),d=`${t.id||"tf"}-${h}`,l=!!o.answer,g=k(`${d}-true`),b=e("label",{for:g,style:"display:inline-flex;align-items:center;gap:6px;margin-right:16px;"},e("input",{type:"radio",name:d,value:"true",id:g}),"True"),w=k(`${d}-false`),x=e("label",{for:w,style:"display:inline-flex;align-items:center;gap:6px;"},e("input",{type:"radio",name:d,value:"false",id:w}),"False"),C=e("div",{style:"display:flex;align-items:center;"});C.appendChild(b),C.appendChild(x),a.appendChild(C),s.push({row:a,name:d,expected:l}),n.appendChild(a)}),!s.length)return;const c=e("div",{style:"margin-top:14px;display:flex;gap:10px;align-items:center;flex-wrap:wrap;"}),i=e("button",{type:"button",class:"btn primary"},"Перевірити"),r=e("div",{style:"font-weight:600;color:#0f172a;"});i.addEventListener("click",()=>{let o=0;s.forEach(({row:h,name:a,expected:d})=>{const l=h.querySelector(`input[name="${a}"]:checked`),g=l?l.value===String(d):!1;h.style.borderColor=g?"#10b981":"#ef4444",g&&(o+=1)}),r.textContent=`Результат: ${o}/${s.length}`}),c.appendChild(i),c.appendChild(r),n.appendChild(c)}function fe(n,t){n.appendChild(e("h3",{},t.prompt||"Доберіть слово за описом"));const s=Array.isArray(t==null?void 0:t.wordBank)?t.wordBank:[];if(s.length){const o=e("div",{style:"margin:8px 0 12px;padding:10px;border:1px solid #e2e8f0;border-radius:10px;background:#f8fafc;display:flex;flex-wrap:wrap;gap:8px;"});s.forEach(h=>{const a=String(h||"").trim();a&&o.appendChild(e("span",{style:"padding:6px 10px;border:1px solid #94a3b8;border-radius:999px;background:#fff;font-size:14px;"},a))}),n.appendChild(o)}const f=[];if((Array.isArray(t==null?void 0:t.items)?t.items:[]).forEach((o,h)=>{if(!o||!o.clue)return;const a=e("div",{style:"margin-bottom:10px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"});a.appendChild(e("p",{style:"margin:0 0 6px;font-weight:600;"},o.clue));const d=k(`${t.id||"synonym"}-${h}`),l=e("input",{type:"text",id:d,style:"width:100%;max-width:320px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});a.appendChild(l);const g=Array.isArray(o==null?void 0:o.answers)?o.answers.map(b=>v(b)):Array.isArray(o==null?void 0:o.answer)?o.answer.map(b=>v(b)):o!=null&&o.answer?[v(o.answer)]:[];f.push({row:a,input:l,answers:g}),n.appendChild(a)}),!f.length)return;const i=e("div",{style:"font-weight:600;color:#0f172a;"}),r=e("button",{type:"button",class:"btn primary"},"Перевірити");r.addEventListener("click",()=>{let o=0;f.forEach(({row:h,input:a,answers:d})=>{const l=v(a.value),g=d.length?d.includes(l):!!l;h.style.borderColor=g?"#10b981":"#ef4444",g&&(o+=1)}),i.textContent=`Результат: ${o}/${f.length}`}),n.appendChild(r),n.appendChild(i)}function ue(n,t){n.appendChild(e("h3",{},t.prompt||"Розшифруйте слова"));const s=[];if((Array.isArray(t==null?void 0:t.items)?t.items:[]).forEach((r,o)=>{if(!r||!r.scrambled)return;const h=e("div",{style:"margin-bottom:10px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"});h.appendChild(e("div",{style:"margin-bottom:6px;font-weight:600;"},r.scrambled));const a=k(`${t.id||"scramble"}-${o}`),d=e("input",{type:"text",id:a,style:"width:100%;max-width:260px;padding:6px 8px;border:1px solid #cbd5e1;border-radius:6px;"});h.appendChild(d);const l=Array.isArray(r==null?void 0:r.answers)?r.answers.map(g=>v(g)):Array.isArray(r==null?void 0:r.answer)?r.answer.map(g=>v(g)):r!=null&&r.answer?[v(r.answer)]:[];s.push({row:h,input:d,answers:l}),n.appendChild(h)}),!s.length)return;const c=e("button",{type:"button",class:"btn primary"},"Перевірити"),i=e("div",{style:"margin-top:6px;font-weight:600;color:#0f172a;"});c.addEventListener("click",()=>{let r=0;s.forEach(({row:o,input:h,answers:a})=>{const d=v(h.value),l=a.length?a.includes(d):!!d;o.style.borderColor=l?"#10b981":"#ef4444",l&&(r+=1)}),i.textContent=`Результат: ${r}/${s.length}`}),n.appendChild(c),n.appendChild(i)}function he(n,t){n.appendChild(e("h3",{},t.prompt||"Знайди зайве слово"));const s=[];if((Array.isArray(t==null?void 0:t.items)?t.items:[]).forEach((r,o)=>{const h=Array.isArray(r==null?void 0:r.options)?r.options:[];if(!h.length)return;const a=e("div",{style:"margin-bottom:10px;padding:12px;border:1px solid #e5e7eb;border-radius:10px;background:#fff;"});a.appendChild(e("div",{style:"margin-bottom:6px;font-weight:600;"},`Набір ${o+1}`));const d=`${t.id||"odd"}-${o}`;h.forEach((b,w)=>{const x=k(`${d}-${w}`);a.appendChild(e("label",{for:x,style:"display:flex;align-items:center;gap:6px;margin:4px 0;"},e("input",{type:"radio",name:d,value:String(w),id:x}),b))});const l=String((r==null?void 0:r.explanation)||"").trim();if(l){const b=e("div",{class:"muted",style:"display:none;margin-top:6px;color:#475569;"});b.textContent=`Пояснення: ${l}`,a.appendChild(b)}const g=v((r==null?void 0:r.answer)||"");s.push({row:a,groupName:d,answerIndex:g}),n.appendChild(a)}),!s.length)return;const c=e("button",{type:"button",class:"btn primary"},"Перевірити"),i=e("div",{style:"margin-top:6px;font-weight:600;color:#0f172a;"});c.addEventListener("click",()=>{let r=0;s.forEach(({row:o,groupName:h,answerIndex:a})=>{const d=o.querySelector(`input[name="${h}"]:checked`),l=v(d?d.value:""),g=a?l===a:!!l;o.style.borderColor=g?"#10b981":"#ef4444";const b=o.querySelector(".muted");b&&(b.style.display=g?"none":"block"),g&&(r+=1)}),i.textContent=`Результат: ${r}/${s.length}`}),n.appendChild(c),n.appendChild(i)}function xe(n,t){n.appendChild(e("h3",{},t.prompt||"Writing/Speaking prompt")),t.description&&n.appendChild(e("p",{class:"muted"},t.description));const s=e("div",{style:"margin-top:8px;"});(t.checklist||[]).forEach((i,r)=>{const o=k(`${t.id||"check"}-${r}`),h=e("label",{for:o,style:"display:flex;align-items:center;gap:8px;margin:6px 0;"},e("input",{id:o,type:"checkbox"}),e("span",{},i));s.appendChild(h)}),n.appendChild(s);const f=e("button",{type:"button",class:"btn primary",style:"margin-top:8px;"},"Позначити як перевірено"),c=e("div",{class:"muted",style:"margin-top:6px;"});f.addEventListener("click",()=>{c.textContent="Готово! Перевір список і за бажанням відправ наставнику."}),n.appendChild(f),n.appendChild(c)}function Q(){let n=document.getElementById("practice");if(!n&&/\/grammar\//.test(location.pathname)){const t=e("div",{class:"container"});t.appendChild(e("hr",{class:"sep"})),n=e("section",{id:"practice"}),t.appendChild(n),document.body.appendChild(t)}return n}function ge(){const n=Q();if(!n)return;let t=n.querySelector("#practice-body");if(t||(t=e("div",{id:"practice-body"}),n.appendChild(t)),(window.lessonContext||{}).isCustomLesson){const f=n.querySelector("[data-practice-placeholder]");f&&(f.textContent="Практика для кожної теми розміщена одразу після теорії. Тут можете згенерувати додаткові завдання."),t&&(t.innerHTML='<p class="muted">Згенеруйте додаткові вправи або додайте власні завдання.</p>'),document.dispatchEvent(new CustomEvent("practice:dataLoaded",{detail:null})),document.dispatchEvent(new CustomEvent("practice:rendered",{detail:{ok:!1,reason:"custom-lesson"}}));return}ne().then(f=>{if(!f){document.dispatchEvent(new CustomEvent("practice:dataLoaded",{detail:null})),t.innerHTML='<p class="muted">Практика поки відсутня.</p>',document.dispatchEvent(new CustomEvent("practice:rendered",{detail:{ok:!1}}));return}t.innerHTML="";const c=e("div",{},e("h2",{},"Practice ",e("span",{class:"badge"},f.level||"B1")),f.title?e("p",{class:"muted"},f.title):null);t.appendChild(c);const i=(f.tasks||[]).map((r,o)=>({key:r&&r.id?String(r.id):`base-${o}`,task:r}));document.dispatchEvent(new CustomEvent("practice:dataLoaded",{detail:{title:f.title,level:f.level,entries:i}})),i.forEach(({task:r,key:o})=>D(t,r,o)),document.dispatchEvent(new CustomEvent("practice:rendered",{detail:{ok:!0}}))})}return document.addEventListener("DOMContentLoaded",ge),window.practice=window.practice||{},Object.assign(window.practice,{appendTask:J,renderTaskList:G,createTaskElement:V}),{appendTask:J,renderTaskList:G,createTaskElement:V}}(),We=ze.createTaskElement;document.addEventListener("click",p=>{const u=p.target.closest(".text-block");if(u){const m=u.innerHTML;navigator.clipboard.writeText(`<div class="text-block">${m}</div>`),console.log("Скопійовано")}});export{me as a,T as b,Ne as c,De as d,Oe as e,We as f,Re as g,Pe as i,Ae as s};
//# sourceMappingURL=practice-s10vzVof.js.map
