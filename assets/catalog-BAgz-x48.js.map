{"version":3,"file":"catalog-BAgz-x48.js","sources":["../../src/features/layout/dom-refs.js","../../src/features/layout/header-actions.js","../../src/features/catalog/catalog.js"],"sourcesContent":["export const refs = {\n  headerActions: {\n    createBtn: document.querySelector('.js-create-lesson-btn'),\n    homework: document.querySelector('.js-homework-btn'),\n  },\n  homework: {\n    container: document.querySelector('.js-homework-content'),\n  },\n};\n","import { auth } from '@features/auth/auth.js';\nimport { refs } from '@features/layout/dom-refs.js';\n\nauth.subscribe(({ isSignedIn, user }) => {\n  if (!refs.headerActions.createBtn || !refs.headerActions.createBtn) {\n    return;\n  }\n\n  if (!isSignedIn) {\n    refs.headerActions.createBtn.hidden = true;\n    refs.headerActions.homework.hidden = true;\n    return;\n  }\n\n  const isAdmin = auth.isAdmin(user);\n\n  if (isAdmin) {\n    refs.headerActions.createBtn.hidden = false;\n    refs.headerActions.homework.hidden = true;\n  } else {\n    refs.headerActions.createBtn.hidden = true;\n    refs.headerActions.homework.hidden = false;\n  }\n});\n","import { lessons, lessonCategories } from '@data/lessons.js';\nimport { customLessonPresets } from '@data/custom-lesson-presets.js';\nimport {\n  loadCustomLessons,\n  subscribeToStorage,\n} from '@features/custom-lessons/custom-lessons-store.js';\nimport { auth } from '@features/auth/auth.js';\nimport '@features/layout/header-actions.js';\n\nconst state = {\n  search: '',\n  category: 'all',\n  level: 'all',\n};\n\nconst searchInput = document.querySelector('[data-filter=\"search\"]');\nconst levelSelect = document.querySelector('[data-filter=\"level\"]');\nconst categoryButtons = Array.from(\n  document.querySelectorAll('[data-category]')\n);\nconst lessonsSection = document.querySelector('[data-lessons-section]');\nconst lessonsGrid = document.querySelector('[data-lessons-grid]');\nconst lessonsEmpty = document.querySelector('[data-lessons-empty]');\nconst stats = {\n  total: document.querySelector('[data-stat-total]'),\n  grammar: document.querySelector('[data-stat-grammar]'),\n  lexical: document.querySelector('[data-stat-lexical]'),\n};\n\nauth.init();\n\nfunction normaliseValue(value) {\n  return value.trim().toLowerCase();\n}\n\nfunction escapeHtml(value) {\n  return String(value ?? '')\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction updateCategoryButtons() {\n  categoryButtons.forEach(button => {\n    const isActive = button.dataset.category === state.category;\n    const isAll = button.dataset.category === 'all';\n    const active = isAll ? state.category === 'all' : isActive;\n    button.classList.toggle('chip--filled', active);\n    button.setAttribute('aria-pressed', String(active));\n  });\n}\n\nfunction createCardTemplate(lesson) {\n  const categoryLabel =\n    lessonCategories[lesson.category]?.label ?? lesson.category;\n  const link = `lesson.html?topic=${encodeURIComponent(\n    lesson.id\n  )}&category=${encodeURIComponent(lesson.category)}&level=${encodeURIComponent(\n    lesson.level\n  )}&title=${encodeURIComponent(lesson.title)}&file=${encodeURIComponent(\n    lesson.htmlPath\n  )}`;\n  const tags = Array.isArray(lesson.tags) ? lesson.tags : [];\n\n  return `\n    <article class=\"lesson-card\" data-lesson-id=\"${lesson.id}\" data-category=\"${\n    lesson.category\n  }\" data-level=\"${lesson.level}\">\n      <a class=\"lesson-card__link\" href=\"${link}\">\n        <div class=\"lesson-card__meta\">\n          <span class=\"lesson-card__category\">${categoryLabel}</span>\n          <span class=\"lesson-card__level\" aria-label=\"Рівень\">${\n            lesson.level\n          }</span>\n        </div>\n        <h3 class=\"lesson-card__title\">${lesson.title}</h3>\n        <p class=\"lesson-card__description\">${lesson.description}</p>\n        ${\n          tags.length\n            ? `<ul class=\"lesson-card__tags\">${tags\n                .map(tag => `<li>${tag}</li>`)\n                .join('')}</ul>`\n            : ''\n        }\n        <span class=\"lesson-card__cta\">Перейти до матеріалу</span>\n      </a>\n    </article>\n  `;\n}\n\nfunction summariseCustomLesson(lesson) {\n  const selectedTopics = (lesson.topicIds || [])\n    .map(id => lessons.find(item => item.id === id))\n    .filter(Boolean);\n\n  const levels = Array.from(\n    new Set(selectedTopics.map(item => item.level))\n  ).sort();\n  const grammarCount = selectedTopics.filter(\n    item => item.category === 'grammar'\n  ).length;\n  const lexicalCount = selectedTopics.filter(\n    item => item.category === 'lexical'\n  ).length;\n\n  return {\n    topics: selectedTopics,\n    levels,\n    grammarCount,\n    lexicalCount,\n  };\n}\n\nfunction createCustomLessonCard(lesson, meta = summariseCustomLesson(lesson)) {\n  const description =\n    lesson.description ||\n    meta.topics\n      .map(item => item.title)\n      .slice(0, 3)\n      .join(', ');\n  const levelLabel =\n    lesson.level ||\n    (meta.levels.length ? meta.levels.join(', ') : 'мікси рівнів');\n  const metaParts = [];\n  if (levelLabel) metaParts.push(`Рівні: ${escapeHtml(levelLabel)}`);\n  if (meta.grammarCount) metaParts.push(`Граматика: ${meta.grammarCount}`);\n  if (meta.lexicalCount) metaParts.push(`Лексика: ${meta.lexicalCount}`);\n\n  return `\n    <article class=\"lesson-card lesson-card--custom\" data-custom-lesson-id=\"${\n      lesson.id\n    }\" data-custom-source=\"${lesson.source || 'local'}\">\n      <a class=\"lesson-card__link\" href=\"lesson.html?custom=${encodeURIComponent(\n        lesson.id\n      )}\">\n        \n       <h3 class=\"lesson-card__title\">${escapeHtml(lesson.title)}</h3>\n        ${\n          metaParts.length\n            ? `<p class=\"lesson-card__meta\">${metaParts.join(' · ')}</p>`\n            : ''\n        }\n        <p class=\"lesson-card__description\">${escapeHtml(\n          description || 'Урок містить кілька тем.'\n        )}</p>\n        \n        <span class=\"lesson-card__cta\">Відкрити комбінований урок</span>\n      </a>\n    </article>\n  `;\n}\n\nfunction collectPresetLessons() {\n  if (!Array.isArray(customLessonPresets)) return [];\n  return customLessonPresets\n    .filter(item => item && typeof item === 'object' && item.id)\n    .map((item, index) => ({\n      ...item,\n      topicIds: Array.isArray(item.topicIds) ? [...item.topicIds] : [],\n      source: 'preset',\n      sortIndex: index,\n    }));\n}\n\nfunction collectLocalCustomLessons() {\n  return loadCustomLessons()\n    .filter(item => item && typeof item === 'object' && item.id)\n    .map((item, index) => ({\n      ...item,\n      topicIds: Array.isArray(item.topicIds) ? [...item.topicIds] : [],\n      source: 'local',\n      sortIndex: 1000 + index,\n    }));\n}\n\nfunction getAllCustomLessons() {\n  const byId = new Map();\n  collectPresetLessons().forEach(lesson => {\n    if (!byId.has(lesson.id)) {\n      byId.set(lesson.id, lesson);\n    }\n  });\n  collectLocalCustomLessons().forEach(lesson => {\n    byId.set(lesson.id, lesson);\n  });\n  return Array.from(byId.values());\n}\n\nfunction collectCombinedLessons() {\n  const toTime = value => {\n    const timestamp = value ? new Date(value).getTime() : 0;\n    return Number.isFinite(timestamp) ? timestamp : 0;\n  };\n\n  const customSource = getAllCustomLessons()\n    .slice()\n    .sort((a, b) => {\n      const timeDiff = toTime(b.createdAt) - toTime(a.createdAt);\n      if (timeDiff !== 0) return timeDiff;\n      return (a.sortIndex || 0) - (b.sortIndex || 0);\n    });\n\n  const customItems = customSource.map(lesson => {\n    const meta = summariseCustomLesson(lesson);\n    return {\n      type: 'custom',\n      lesson,\n      meta,\n    };\n  });\n\n  const catalogItems = lessons.map(lesson => ({\n    type: 'catalog',\n    lesson,\n  }));\n\n  return [...customItems, ...catalogItems];\n}\n\nfunction lessonMatchesCategory(item) {\n  if (state.category === 'all') return true;\n  if (item.type === 'catalog') {\n    return item.lesson.category === state.category;\n  }\n  return false;\n}\n\nfunction lessonMatchesLevel(item) {\n  if (state.level === 'all') return true;\n  if (item.type === 'catalog') {\n    return item.lesson.level === state.level;\n  }\n\n  const lessonLevel = item.lesson.level;\n  if (lessonLevel) return lessonLevel === state.level;\n\n  const derivedLevels = item.meta?.levels ?? [];\n  return derivedLevels.includes(state.level);\n}\n\nfunction collectCustomSearchTokens(lesson, meta) {\n  const topics = meta?.topics ?? [];\n  const topicTokens = topics.flatMap(topic =>\n    [topic.title, topic.description, ...(topic.tags || [])].filter(Boolean)\n  );\n  return [\n    lesson.title,\n    lesson.description,\n    ...(lesson.tags || []),\n    lesson.level,\n    ...topicTokens,\n  ]\n    .filter(Boolean)\n    .map(value => normaliseValue(String(value)));\n}\n\nfunction lessonMatchesSearch(item, searchTerm) {\n  if (!searchTerm) return true;\n\n  if (item.type === 'catalog') {\n    const haystack = [\n      item.lesson.title,\n      item.lesson.description,\n      ...(item.lesson.tags ?? []),\n    ]\n      .filter(Boolean)\n      .map(value => normaliseValue(String(value)));\n    return haystack.some(value => value.includes(searchTerm));\n  }\n\n  const customTokens = collectCustomSearchTokens(item.lesson, item.meta);\n  return customTokens.some(value => value.includes(searchTerm));\n}\n\nfunction filterLessons() {\n  const combined = collectCombinedLessons();\n  const searchTerm = normaliseValue(state.search);\n  return combined.filter(item => {\n    if (!lessonMatchesCategory(item)) return false;\n    if (!lessonMatchesLevel(item)) return false;\n    return lessonMatchesSearch(item, searchTerm);\n  });\n}\n\nfunction renderLessons() {\n  if (!lessonsGrid || !lessonsEmpty) return;\n\n  const items = filterLessons();\n\n  if (!items.length) {\n    lessonsGrid.innerHTML = '';\n    lessonsEmpty.hidden = false;\n    if (lessonsSection) lessonsSection.dataset.hasResults = 'false';\n    return;\n  }\n\n  const markup = items\n    .map(item =>\n      item.type === 'custom'\n        ? createCustomLessonCard(item.lesson, item.meta)\n        : createCardTemplate(item.lesson)\n    )\n    .join('');\n\n  lessonsGrid.innerHTML = markup;\n  lessonsEmpty.hidden = true;\n  if (lessonsSection) lessonsSection.dataset.hasResults = 'true';\n}\n\nfunction setStats() {\n  if (stats.total) stats.total.textContent = String(lessons.length);\n  if (stats.grammar)\n    stats.grammar.textContent = String(\n      lessons.filter(lesson => lesson.category === 'grammar').length\n    );\n  if (stats.lexical)\n    stats.lexical.textContent = String(\n      lessons.filter(lesson => lesson.category === 'lexical').length\n    );\n}\n\nfunction handleSearch(event) {\n  state.search = event.target.value;\n  renderLessons();\n}\n\nfunction handleLevelChange(event) {\n  state.level = event.target.value;\n  renderLessons();\n}\n\nfunction handleCategoryClick(event) {\n  const category = event.currentTarget.dataset.category;\n  if (!category) return;\n\n  state.category = category;\n  updateCategoryButtons();\n  renderLessons();\n}\n\nfunction setCurrentYear() {\n  const currentYearElement = document.querySelector(\n    '[data-component=\"copyright-year\"]'\n  );\n  if (!currentYearElement) return;\n  currentYearElement.textContent = String(new Date().getFullYear());\n}\n\nfunction init() {\n  setStats();\n  updateCategoryButtons();\n  renderLessons();\n  setCurrentYear();\n\n  if (searchInput) {\n    searchInput.addEventListener('input', handleSearch);\n  }\n\n  if (levelSelect) {\n    levelSelect.addEventListener('change', handleLevelChange);\n  }\n\n  categoryButtons.forEach(button => {\n    button.addEventListener('click', handleCategoryClick);\n  });\n\n  subscribeToStorage(() => {\n    renderLessons();\n  });\n}\n\ninit();\n"],"names":["refs","auth","isSignedIn","user","state","searchInput","levelSelect","categoryButtons","lessonsSection","lessonsGrid","lessonsEmpty","stats","normaliseValue","value","escapeHtml","updateCategoryButtons","button","isActive","active","createCardTemplate","lesson","categoryLabel","_a","lessonCategories","link","tags","tag","summariseCustomLesson","selectedTopics","id","lessons","item","levels","grammarCount","lexicalCount","createCustomLessonCard","meta","description","levelLabel","metaParts","collectPresetLessons","customLessonPresets","index","collectLocalCustomLessons","loadCustomLessons","getAllCustomLessons","byId","collectCombinedLessons","toTime","timestamp","customItems","a","b","timeDiff","catalogItems","lessonMatchesCategory","lessonMatchesLevel","lessonLevel","collectCustomSearchTokens","topicTokens","topic","lessonMatchesSearch","searchTerm","filterLessons","combined","renderLessons","items","markup","setStats","handleSearch","event","handleLevelChange","handleCategoryClick","category","setCurrentYear","currentYearElement","init","subscribeToStorage"],"mappings":"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"}