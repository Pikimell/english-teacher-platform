import"./assets/main-1VYSZ_bt.js";import{a as g}from"./assets/catalog-Cky5BklY.js";import{g as C}from"./assets/homework-DBTzO_AD.js";import"./assets/custom-lessons-store-BKMVZjuV.js";import"./assets/custom-lesson-presets-OYBmjNse.js";import"./assets/vendor-CWxt7QI6.js";const o=document.querySelector("[data-homework-status]"),f=document.querySelector("[data-homework-list]");if(o&&f){let c=function(t){o.textContent=t||"",o.hidden=!t},n=function(){f.innerHTML=""},p=function(t){if(!t||typeof t!="object")return null;if(typeof t.url=="string"&&t.url)return t.url;if(typeof t.link=="string"&&t.link)return t.link;const e=new URLSearchParams,r=t.lessonId||t.topicId||t.id||null,a=t.htmlPath||t.lessonPath||null,u=t.category||t.lessonCategory||null,m=t.level||t.lessonLevel||null,i=t.title||t.lessonTitle||t.name||null;return r&&e.set("topic",r),u&&e.set("category",u),m&&e.set("level",m),i&&e.set("title",i),a&&e.set("file",a),e.has("topic")?`lesson.html?${e.toString()}`:null},h=function(t){const e=(t==null?void 0:t.dueDate)||(t==null?void 0:t.deadline)||(t==null?void 0:t.due_at)||(t==null?void 0:t.dueAt)||null;if(!e)return null;const r=new Date(e);if(Number.isNaN(r.getTime()))return null;try{return new Intl.DateTimeFormat("uk-UA",{dateStyle:"medium"}).format(r)}catch{return r.toLocaleDateString("uk-UA")}},l=function(t){const e=document.createElement("article");e.className="homework-card",e.setAttribute("role","listitem");const r=document.createElement("h3");r.className="homework-card__title",r.textContent=(t==null?void 0:t.title)||(t==null?void 0:t.name)||(t==null?void 0:t.lessonTitle)||"Урок без назви",e.appendChild(r);const a=h(t);if(a){const i=document.createElement("p");i.className="homework-card__meta",i.textContent=`Строк: ${a}`,e.appendChild(i)}const u=(t==null?void 0:t.description)||(t==null?void 0:t.lessonDescription)||(t==null?void 0:t.summary)||"";if(u){const i=document.createElement("p");i.className="homework-card__description",i.textContent=u,e.appendChild(i)}const m=p(t);if(m){const i=document.createElement("a");i.className="homework-card__link",i.href=m,i.textContent="Відкрити урок",e.appendChild(i)}return e},y=function(t){if(n(),!Array.isArray(t)||!t.length){c("Домашніх робіт поки немає.");return}c("");const e=document.createDocumentFragment();t.forEach(r=>{e.appendChild(l(r))}),f.appendChild(e)},d=0;async function k(t){if(!t||!t.email){c("Увійдіть, щоб переглянути призначені домашні роботи."),n();return}const e=++d;c("Завантаження домашніх робіт…"),n();try{const r=await C(t.email);if(e!==d)return;const a=Array.isArray(r==null?void 0:r.items)?r.items:Array.isArray(r)?r:[];y(a)}catch(r){if(e!==d)return;console.error("Не вдалося завантажити домашні роботи",r),c("Не вдалося завантажити домашні роботи. Спробуйте пізніше."),n()}}g.subscribe(t=>{if(!t.isSignedIn){c("Увійдіть, щоб переглянути призначені домашні роботи."),n();return}k(t.user)})}
//# sourceMappingURL=homework.js.map
