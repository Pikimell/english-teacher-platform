import"./assets/main-EI6bIbGC.js";import"./assets/catalog-CtanK4uG.js";import{a as p}from"./assets/custom-lesson-presets-B4NuEc3i.js";import{g as w,b as C}from"./assets/homework-CexZFWns.js";import"./assets/custom-lessons-store-BKMVZjuV.js";import"./assets/vendor-CWxt7QI6.js";const l=document.querySelector("[data-homework-status]"),f=document.querySelector("[data-homework-list]");if(l&&f){let c=function(t){l.textContent=t||"",l.hidden=!t},n=function(){f.innerHTML=""},m=function(t){if(!t||typeof t!="object")return null;if(typeof t.url=="string"&&t.url)return t.url;if(typeof t.link=="string"&&t.link)return t.link;const e=new URLSearchParams,r=t.lessonId||t.topicId||t.id||null,a=t.htmlPath||t.lessonPath||null,o=t.category||t.lessonCategory||null,d=t.level||t.lessonLevel||null,i=t.title||t.lessonTitle||t.name||null;return r&&e.set("topic",r),o&&e.set("category",o),d&&e.set("level",d),i&&e.set("title",i),a&&e.set("file",a),e.has("topic")?`lesson.html?${e.toString()}`:null},h=function(t){const e=(t==null?void 0:t.dueDate)||(t==null?void 0:t.deadline)||(t==null?void 0:t.due_at)||(t==null?void 0:t.dueAt)||null;if(!e)return null;const r=new Date(e);if(Number.isNaN(r.getTime()))return null;try{return new Intl.DateTimeFormat("uk-UA",{dateStyle:"medium"}).format(r)}catch{return r.toLocaleDateString("uk-UA")}},g=function(t){const e=document.createElement("article");e.className="homework-card",e.setAttribute("role","listitem"),e.dataset.id=t==null?void 0:t.lessonId;const r=document.createElement("h3");r.className="homework-card__title",r.textContent=t==null?void 0:t.lessonName,e.appendChild(r);const a=h(t);if(a){const i=document.createElement("p");i.className="homework-card__meta",i.textContent=`Строк: ${a}`,e.appendChild(i)}const o=(t==null?void 0:t.description)||(t==null?void 0:t.lessonDescription)||(t==null?void 0:t.summary)||"";if(o){const i=document.createElement("p");i.className="homework-card__description",i.textContent=o,e.appendChild(i)}if(m(t)){const i=document.createElement("button");i.className="homework-card__link",i.textContent="відкрити",e.appendChild(i),e.addEventListener("click",()=>{L(t==null?void 0:t.lessonId)})}return e},k=function(t){if(console.log(t),!Array.isArray(t)||!t.length){c("Домашніх робіт поки немає.");return}c("");const e=document.createDocumentFragment();t.forEach(r=>{e.appendChild(g(r))}),f.appendChild(e)},u=0;async function y(t){if(!t||!t.email){c("Увійдіть, щоб переглянути призначені домашні роботи."),n();return}const e=++u;c("Завантаження домашніх робіт…"),n();try{const r=await w(t.email);if(e!==u)return;const a=r;console.log(a),k(a)}catch(r){if(console.log(r),e!==u)return;console.error("Не вдалося завантажити домашні роботи",r),c("Не вдалося завантажити домашні роботи. Спробуйте пізніше."),n()}}p.subscribe(t=>{if(!t.isSignedIn){c("Увійдіть, щоб переглянути призначені домашні роботи."),n();return}y(t.user)})}async function L(u){const n=p.getUser().email,m=await C({userEmail:n,lessonId:u,limit:1e3});console.log(m)}
//# sourceMappingURL=homework.js.map
