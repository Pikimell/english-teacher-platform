import"./assets/main-1VYSZ_bt.js";import{i as A,a as g}from"./assets/main-CbyGX8Wu.js";import"./assets/custom-lessons-store-BKMVZjuV.js";import"./assets/custom-lesson-presets-BlE7b2P4.js";import"./assets/vendor-CWxt7QI6.js";const w=async u=>{const c={};u&&(c.userEmail=u,c.email=u);const m=await A.get("/homework/lessons",{params:c}),{data:a}=m;return Array.isArray(a)?a:Array.isArray(a==null?void 0:a.items)?a.items:Array.isArray(a==null?void 0:a.lessons)?a.lessons:[]},f=document.querySelector("[data-homework-status]"),p=document.querySelector("[data-homework-list]");if(f&&p){let c=function(t){f.textContent=t||"",f.hidden=!t},m=function(){p.innerHTML=""},a=function(t){if(!t||typeof t!="object")return null;if(typeof t.url=="string"&&t.url)return t.url;if(typeof t.link=="string"&&t.link)return t.link;const r=new URLSearchParams,e=t.lessonId||t.topicId||t.id||null,n=t.htmlPath||t.lessonPath||null,d=t.category||t.lessonCategory||null,o=t.level||t.lessonLevel||null,i=t.title||t.lessonTitle||t.name||null;return e&&r.set("topic",e),d&&r.set("category",d),o&&r.set("level",o),i&&r.set("title",i),n&&r.set("file",n),r.has("topic")?`lesson.html?${r.toString()}`:null},h=function(t){const r=(t==null?void 0:t.dueDate)||(t==null?void 0:t.deadline)||(t==null?void 0:t.due_at)||(t==null?void 0:t.dueAt)||null;if(!r)return null;const e=new Date(r);if(Number.isNaN(e.getTime()))return null;try{return new Intl.DateTimeFormat("uk-UA",{dateStyle:"medium"}).format(e)}catch{return e.toLocaleDateString("uk-UA")}},l=function(t){const r=document.createElement("article");r.className="homework-card",r.setAttribute("role","listitem");const e=document.createElement("h3");e.className="homework-card__title",e.textContent=(t==null?void 0:t.title)||(t==null?void 0:t.name)||(t==null?void 0:t.lessonTitle)||"Урок без назви",r.appendChild(e);const n=h(t);if(n){const i=document.createElement("p");i.className="homework-card__meta",i.textContent=`Строк: ${n}`,r.appendChild(i)}const d=(t==null?void 0:t.description)||(t==null?void 0:t.lessonDescription)||(t==null?void 0:t.summary)||"";if(d){const i=document.createElement("p");i.className="homework-card__description",i.textContent=d,r.appendChild(i)}const o=a(t);if(o){const i=document.createElement("a");i.className="homework-card__link",i.href=o,i.textContent="Відкрити урок",r.appendChild(i)}return r},y=function(t){if(m(),!Array.isArray(t)||!t.length){c("Домашніх робіт поки немає.");return}c("");const r=document.createDocumentFragment();t.forEach(e=>{r.appendChild(l(e))}),p.appendChild(r)},u=0;async function k(t){if(!t||!t.email){c("Увійдіть, щоб переглянути призначені домашні роботи."),m();return}const r=++u;c("Завантаження домашніх робіт…"),m();try{const e=await w(t.email);if(r!==u)return;const n=Array.isArray(e==null?void 0:e.items)?e.items:Array.isArray(e)?e:[];y(n)}catch(e){if(r!==u)return;console.error("Не вдалося завантажити домашні роботи",e),c("Не вдалося завантажити домашні роботи. Спробуйте пізніше."),m()}}g.subscribe(t=>{if(!t.isSignedIn){c("Увійдіть, щоб переглянути призначені домашні роботи."),m();return}k(t.user)})}
//# sourceMappingURL=homework.js.map
