{"version":3,"file":"placement-test.js","sources":["../src/data/placement-test.js","../src/scripts/placement-test.js"],"sourcesContent":["export const placementLevels = [];\n\nexport const placementQuestions = [];\n","import { placementLevels, placementQuestions } from '../data/placement-test.js';\n\nconst form = document.querySelector('[data-component=\"placement-form\"]');\nconst questionContainer = document.querySelector('[data-component=\"questions\"]');\nconst resultsSection = document.querySelector('[data-component=\"results\"]');\nconst chartContainer = document.querySelector('[data-component=\"results-chart\"]');\nconst summaryList = document.querySelector('[data-component=\"results-summary\"]');\nconst summaryText = document.querySelector('[data-component=\"results-text\"]');\n\nfunction createAnswerTemplate(question, answer) {\n  const inputId = `${question.id}-${answer.id}`;\n  return `\n    <label class=\"placement-question__option\" for=\"${inputId}\">\n      <input type=\"radio\" id=\"${inputId}\" name=\"${question.id}\" value=\"${answer.id}\" aria-labelledby=\"${inputId}-label\" />\n      <span id=\"${inputId}-label\">${answer.text}</span>\n    </label>\n  `;\n}\n\nfunction createQuestionTemplate(question, index) {\n  const answerMarkup = question.answers.map((answer) => createAnswerTemplate(question, answer)).join('');\n\n  return `\n    <fieldset class=\"placement-question\">\n      <legend class=\"placement-question__title\">\n        <span class=\"placement-question__number\">${String(index + 1).padStart(2, '0')}</span>\n        <div class=\"placement-question__meta\">\n          <span class=\"placement-question__prompt\">${question.prompt}</span>\n        </div>\n      </legend>\n      <div class=\"placement-question__options\" role=\"radiogroup\" aria-label=\"Відповіді на запитання ${index + 1}\">\n        ${answerMarkup}\n      </div>\n    </fieldset>\n  `;\n}\n\nfunction renderQuestions() {\n  const markup = placementQuestions.map((question, index) => createQuestionTemplate(question, index)).join('');\n  questionContainer.innerHTML = markup;\n}\n\nfunction calculateResults(formData) {\n  const initial = placementLevels.reduce((acc, level) => {\n    acc[level.id] = { id: level.id, label: level.label, correct: 0, total: 0 };\n    return acc;\n  }, {});\n\n  placementQuestions.forEach((question) => {\n    const selected = formData.get(question.id);\n    const correctAnswer = question.answers.find((answer) => answer.isCorrect);\n    const levelStats = initial[question.level];\n    if (!levelStats) return;\n    levelStats.total += 1;\n    if (selected && correctAnswer && selected === correctAnswer.id) {\n      levelStats.correct += 1;\n    }\n  });\n\n  return initial;\n}\n\nfunction renderChart(results) {\n  const markup = placementLevels\n    .map((level) => {\n      const levelStats = results[level.id];\n      const ratio = levelStats.total ? levelStats.correct / levelStats.total : 0;\n      const percentage = Math.round(ratio * 100);\n      const widthPercent = levelStats.total ? percentage : 0;\n      return `\n        <div class=\"placement-chart__row\">\n          <div class=\"placement-chart__label\">${level.id}</div>\n          <div class=\"placement-chart__bar\" aria-hidden=\"true\">\n            <div class=\"placement-chart__fill\" style=\"width: ${widthPercent}%\"></div>\n          </div>\n          <div class=\"placement-chart__value\">${levelStats.correct}/${levelStats.total}</div>\n          <span class=\"visually-hidden\">${level.label}: ${levelStats.correct} з ${levelStats.total} (${percentage}% правильних)</span>\n        </div>\n      `;\n    })\n    .join('');\n\n  chartContainer.innerHTML = markup;\n}\n\nfunction renderSummary(results) {\n  const items = placementLevels\n    .map((level) => {\n      const levelStats = results[level.id];\n      const ratio = levelStats.total ? Math.round((levelStats.correct / levelStats.total) * 100) : 0;\n      return `\n        <li class=\"placement-summary__item\">\n          <strong>${level.label}:</strong> ${levelStats.correct}/${levelStats.total} правильних (${ratio}%)\n        </li>\n      `;\n    })\n    .join('');\n\n  summaryList.innerHTML = items;\n}\n\nfunction renderResults(results) {\n  const stats = Object.values(results);\n  const totalCorrect = stats.reduce((sum, item) => sum + item.correct, 0);\n  const totalQuestions = stats.reduce((sum, item) => sum + item.total, 0);\n  const bestLevel = stats.reduce((acc, item) => {\n    if (item.total === 0) return acc;\n    const ratio = item.correct / item.total;\n    if (!acc || ratio > acc.ratio) {\n      return { id: item.id, label: item.label, ratio };\n    }\n    return acc;\n  }, null);\n\n  summaryText.textContent = bestLevel\n    ? `Загальний результат: ${totalCorrect}/${totalQuestions}. Найвища точність — на рівні ${bestLevel.label}.`\n    : `Загальний результат: ${totalCorrect}/${totalQuestions}.`;\n\n  renderChart(results);\n  renderSummary(results);\n  resultsSection.hidden = false;\n  resultsSection.scrollIntoView({ behavior: 'smooth' });\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(form);\n  const results = calculateResults(formData);\n  renderResults(results);\n}\n\nfunction handleReset() {\n  resultsSection.hidden = true;\n  chartContainer.innerHTML = '';\n  summaryList.innerHTML = '';\n  summaryText.textContent = '';\n}\n\nfunction setCurrentYear() {\n  const currentYearElement = document.querySelector('[data-component=\"copyright-year\"]');\n  if (!currentYearElement) return;\n  currentYearElement.textContent = String(new Date().getFullYear());\n}\n\nfunction init() {\n  setCurrentYear();\n  if (!form || !questionContainer) return;\n  renderQuestions();\n  form.addEventListener('submit', handleSubmit);\n  form.addEventListener('reset', handleReset);\n}\n\ninit();\n"],"names":["placementLevels","placementQuestions","form","questionContainer","resultsSection","chartContainer","summaryList","summaryText","createAnswerTemplate","question","answer","inputId","createQuestionTemplate","index","answerMarkup","renderQuestions","markup","calculateResults","formData","initial","acc","level","selected","correctAnswer","levelStats","renderChart","results","ratio","percentage","widthPercent","renderSummary","items","renderResults","stats","totalCorrect","sum","item","totalQuestions","bestLevel","handleSubmit","event","handleReset","setCurrentYear","currentYearElement","init"],"mappings":"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"}