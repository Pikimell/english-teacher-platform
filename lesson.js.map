{"version":3,"file":"lesson.js","sources":["../src/data/communication-words.js","../src/features/lesson/send-lesson.js","../src/data/wordwall.js","../src/features/helpers/speaker.js","../src/features/lesson/lesson.js","../src/api/chatGpt.js","../src/features/lesson/practice-generator.js"],"sourcesContent":["export const communicationWords = {\n  'greetings-farewells': [\n    {\n      word: 'Hello',\n      translation: 'ÐŸÑ€Ð¸Ð²Ñ–Ñ‚',\n      example: 'Hello, nice to meet you!',\n    },\n    {\n      word: 'Hi',\n      translation: 'ÐŸÑ€Ð¸Ð²Ñ–Ñ‚ (Ð½ÐµÑ„Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾)',\n      example: 'Hi, are you ready for class?',\n    },\n    {\n      word: 'Good morning',\n      translation: 'Ð”Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ñ€Ð°Ð½ÐºÑƒ',\n      example: 'Good morning, Mrs Smith.',\n    },\n    {\n      word: 'Good afternoon',\n      translation: 'Ð”Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð´Ð½Ñ',\n      example: 'Good afternoon, everyone.',\n    },\n    {\n      word: 'Good evening',\n      translation: 'Ð”Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð²ÐµÑ‡Ð¾Ñ€Ð°',\n      example: 'Good evening, how was your day?',\n    },\n    {\n      word: 'Nice to meet you',\n      translation: 'ÐŸÑ€Ð¸Ñ”Ð¼Ð½Ð¾ Ð¿Ð¾Ð·Ð½Ð°Ð¹Ð¾Ð¼Ð¸Ñ‚Ð¸ÑÑ',\n      example: \"Nice to meet you, I'm Tom.\",\n    },\n    {\n      word: 'How are you?',\n      translation: 'Ð¯Ðº ÑÐ¿Ñ€Ð°Ð²Ð¸?',\n      example: 'Hi, Anna! How are you?',\n    },\n    {\n      word: \"I'm fine, thanks\",\n      translation: 'Ð£ Ð¼ÐµÐ½Ðµ Ð²ÑÐµ Ð´Ð¾Ð±Ñ€Ðµ, Ð´ÑÐºÑƒÑŽ',\n      example: \"I'm fine, thanks. And you?\",\n    },\n    {\n      word: 'See you later',\n      translation: 'ÐŸÐ¾Ð±Ð°Ñ‡Ð¸Ð¼Ð¾ÑÑŒ Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐµ',\n      example: 'I have to go now. See you later!',\n    },\n    {\n      word: 'See you soon',\n      translation: 'Ð”Ð¾ ÑÐºÐ¾Ñ€Ð¾Ñ— Ð·ÑƒÑÑ‚Ñ€Ñ–Ñ‡Ñ–',\n      example: 'Thanks for your help. See you soon.',\n    },\n    {\n      word: 'Goodbye',\n      translation: 'Ð”Ð¾ Ð¿Ð¾Ð±Ð°Ñ‡ÐµÐ½Ð½Ñ',\n      example: 'Goodbye, have a nice evening!',\n    },\n    {\n      word: 'Bye',\n      translation: 'Ð‘ÑƒÐ²Ð°Ð¹',\n      example: 'Bye, talk to you tomorrow!',\n    },\n    {\n      word: 'Take care',\n      translation: 'Ð‘ÐµÑ€ÐµÐ¶Ð¸ ÑÐµÐ±Ðµ',\n      example: \"I'm heading home now. Take care!\",\n    },\n    {\n      word: 'Have a nice day',\n      translation: 'Ð“Ð°Ñ€Ð½Ð¾Ð³Ð¾ Ð´Ð½Ñ',\n      example: 'Thanks for coming. Have a nice day!',\n    },\n    {\n      word: 'Good night',\n      translation: 'ÐÐ°Ð´Ð¾Ð±Ñ€Ð°Ð½Ñ–Ñ‡',\n      example: \"It's late. Good night!\",\n    },\n  ],\n  'personal-info-basics': [\n    {\n      word: 'first name',\n      translation: \"Ñ–Ð¼'Ñ\",\n      example: 'My first name is Olha.',\n    },\n    {\n      word: 'last name',\n      translation: 'Ð¿Ñ€Ñ–Ð·Ð²Ð¸Ñ‰Ðµ',\n      example: 'Her last name is Petrenko.',\n    },\n    {\n      word: 'full name',\n      translation: \"Ð¿Ð¾Ð²Ð½Ðµ Ñ–Ð¼'Ñ\",\n      example: 'Please write your full name here.',\n    },\n    {\n      word: 'nickname',\n      translation: 'Ð¿Ñ€Ñ–Ð·Ð²Ð¸ÑÑŒÐºÐ¾ / Ð½Ñ–ÐºÐ½ÐµÐ¹Ð¼',\n      example: \"His friends call him Max; it's his nickname.\",\n    },\n    {\n      word: 'age',\n      translation: 'Ð²Ñ–Ðº',\n      example: 'My age is twenty.',\n    },\n    {\n      word: 'I am ... years old',\n      translation: 'Ð¼ÐµÐ½Ñ– ... Ñ€Ð¾ÐºÑ–Ð²',\n      example: 'I am twenty years old.',\n    },\n    {\n      word: 'years old',\n      translation: 'Ñ€Ð¾ÐºÑ–Ð² (Ð²Ñ–Ðº)',\n      example: \"I'm eleven years old.\",\n    },\n    {\n      word: 'country',\n      translation: 'ÐºÑ€Ð°Ñ—Ð½Ð°',\n      example: 'My country is Ukraine.',\n    },\n    {\n      word: 'city',\n      translation: 'Ð¼Ñ–ÑÑ‚Ð¾',\n      example: 'I live in the city of Lviv.',\n    },\n    {\n      word: 'hometown',\n      translation: 'Ñ€Ñ–Ð´Ð½Ðµ Ð¼Ñ–ÑÑ‚Ð¾',\n      example: 'My hometown is Poltava.',\n    },\n    {\n      word: 'place of birth',\n      translation: 'Ð¼Ñ–ÑÑ†Ðµ Ð½Ð°Ñ€Ð¾Ð´Ð¶ÐµÐ½Ð½Ñ',\n      example: 'My place of birth is Kharkiv.',\n    },\n    {\n      word: 'address',\n      translation: 'Ð°Ð´Ñ€ÐµÑÐ°',\n      example: 'My address is 12 Green Street.',\n    },\n    {\n      word: 'nationality',\n      translation: 'Ð½Ð°Ñ†Ñ–Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ–ÑÑ‚ÑŒ',\n      example: 'She is Italian by nationality.',\n    },\n    {\n      word: 'native language',\n      translation: 'Ñ€Ñ–Ð´Ð½Ð° Ð¼Ð¾Ð²Ð°',\n      example: 'Ukrainian is my native language.',\n    },\n    {\n      word: 'foreign language',\n      translation: 'Ñ–Ð½Ð¾Ð·ÐµÐ¼Ð½Ð° Ð¼Ð¾Ð²Ð°',\n      example: 'English is my first foreign language.',\n    },\n    {\n      word: 'from',\n      translation: 'Ð· / Ñ€Ð¾Ð´Ð¾Ð¼ Ñ–Ð·',\n      example: 'I am from Ukraine.',\n    },\n    {\n      word: 'live in',\n      translation: 'Ð¶Ð¸Ñ‚Ð¸ Ð²',\n      example: 'I live in Kyiv.',\n    },\n    {\n      word: 'live with',\n      translation: 'Ð¶Ð¸Ñ‚Ð¸ Ð·',\n      example: 'I live with my parents.',\n    },\n    {\n      word: 'date of birth',\n      translation: 'Ð´Ð°Ñ‚Ð° Ð½Ð°Ñ€Ð¾Ð´Ð¶ÐµÐ½Ð½Ñ',\n      example: 'My date of birth is May 12, 2005.',\n    },\n    {\n      word: 'job / occupation',\n      translation: 'Ñ€Ð¾Ð±Ð¾Ñ‚Ð° / Ð¿Ñ€Ð¾Ñ„ÐµÑÑ–Ñ',\n      example: 'My job is a student.',\n    },\n    {\n      word: 'student',\n      translation: 'ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚ / ÑƒÑ‡ÐµÐ½ÑŒ',\n      example: \"I'm a student at the local school.\",\n    },\n    {\n      word: 'teacher',\n      translation: 'Ð²Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒ / Ð²Ð¸ÐºÐ»Ð°Ð´Ð°Ñ‡',\n      example: 'My teacher is from Canada.',\n    },\n    {\n      word: 'grade',\n      translation: 'ÐºÐ»Ð°Ñ (Ñƒ ÑˆÐºÐ¾Ð»Ñ–)',\n      example: \"I'm in Grade 6.\",\n    },\n    {\n      word: 'single',\n      translation: 'Ð½ÐµÐ¾Ð´Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ð¹ / Ð½ÐµÐ¾Ð´Ñ€ÑƒÐ¶ÐµÐ½Ð°',\n      example: 'He is single at the moment.',\n    },\n    {\n      word: 'married',\n      translation: 'Ð¾Ð´Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ð¹ / Ð·Ð°Ð¼Ñ–Ð¶Ð½Ñ',\n      example: 'My parents are married.',\n    },\n    {\n      word: 'male',\n      translation: 'Ñ‡Ð¾Ð»Ð¾Ð²Ñ–Ñ‡Ð° ÑÑ‚Ð°Ñ‚ÑŒ',\n      example: 'He is male.',\n    },\n    {\n      word: 'female',\n      translation: 'Ð¶Ñ–Ð½Ð¾Ñ‡Ð° ÑÑ‚Ð°Ñ‚ÑŒ',\n      example: 'She is female.',\n    },\n    {\n      word: 'speak',\n      translation: 'Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ (Ð¼Ð¾Ð²Ð¾ÑŽ)',\n      example: 'I speak Ukrainian and English.',\n    },\n    {\n      word: 'introduce yourself',\n      translation: 'Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ñ‚Ð¸ÑÑŒ',\n      example: 'Let me introduce myself.',\n    },\n  ],\n  'classroom-objects': [\n    {\n      word: 'pen',\n      translation: 'Ñ€ÑƒÑ‡ÐºÐ°',\n      transcription: 'pen',\n      example: 'I write with a blue pen.',\n    },\n    {\n      word: 'pencil',\n      translation: 'Ð¾Ð»Ñ–Ð²ÐµÑ†ÑŒ',\n      transcription: 'Ëˆpensl',\n      example: 'This pencil is very sharp.',\n    },\n    {\n      word: 'notebook',\n      translation: 'Ð·Ð¾ÑˆÐ¸Ñ‚',\n      transcription: 'ËˆnÉ™ÊŠtbÊŠk',\n      example: 'I have a new notebook for English.',\n    },\n    {\n      word: 'eraser',\n      translation: 'Ð³ÑƒÐ¼ÐºÐ°',\n      transcription: 'ÉªËˆreÉªzÉ™',\n      example: 'Use an eraser to correct mistakes.',\n    },\n    {\n      word: 'ruler',\n      translation: 'Ð»Ñ–Ð½Ñ–Ð¹ÐºÐ°',\n      transcription: 'ËˆruËlÉ™',\n      example: 'The ruler is on the desk.',\n    },\n    {\n      word: 'desk',\n      translation: 'Ð¿Ð°Ñ€Ñ‚Ð°, Ñ€Ð¾Ð±Ð¾Ñ‡Ð¸Ð¹ ÑÑ‚Ñ–Ð»',\n      transcription: 'desk',\n      example: 'My desk is next to the window.',\n    },\n    {\n      word: 'chair',\n      translation: 'ÑÑ‚Ñ–Ð»ÐµÑ†ÑŒ',\n      transcription: 'tÊƒeÉ™',\n      example: 'There is a chair in front of the desk.',\n    },\n    {\n      word: 'computer',\n      translation: 'ÐºÐ¾Ð¼Ð¿â€™ÑŽÑ‚ÐµÑ€',\n      transcription: 'kÉ™mËˆpjuËtÉ™',\n      example: 'I work on the computer every day.',\n    },\n    {\n      word: 'keyboard',\n      translation: 'ÐºÐ»Ð°Ð²Ñ–Ð°Ñ‚ÑƒÑ€Ð°',\n      transcription: 'ËˆkiËbÉ”Ëd',\n      example: 'Type your name on the keyboard.',\n    },\n    {\n      word: 'mouse',\n      translation: 'Ð¼Ð¸ÑˆÐºÐ° (ÐºÐ¾Ð¼Ð¿â€™ÑŽÑ‚ÐµÑ€Ð½Ð°)',\n      transcription: 'maÊŠs',\n      example: 'Click the mouse to open the file.',\n    },\n    {\n      word: 'book',\n      translation: 'ÐºÐ½Ð¸Ð³Ð°',\n      transcription: 'bÊŠk',\n      example: 'Open your book at page ten.',\n    },\n    {\n      word: 'paper',\n      translation: 'Ð¿Ð°Ð¿Ñ–Ñ€',\n      transcription: 'ËˆpeÉªpÉ™',\n      example: 'I need a piece of paper.',\n    },\n    {\n      word: 'folder',\n      translation: 'Ð¿Ð°Ð¿ÐºÐ°',\n      transcription: 'ËˆfÉ™ÊŠldÉ™',\n      example: 'Put your documents in the folder.',\n    },\n    {\n      word: 'document',\n      translation: 'Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚',\n      transcription: 'ËˆdÉ’kjÊŠmÉ™nt',\n      example: 'I printed the document for the meeting.',\n    },\n    {\n      word: 'printer',\n      translation: 'Ð¿Ñ€Ð¸Ð½Ñ‚ÐµÑ€',\n      transcription: 'ËˆprÉªntÉ™',\n      example: 'The printer is not working today.',\n    },\n    {\n      word: 'board',\n      translation: 'Ð´Ð¾ÑˆÐºÐ°',\n      transcription: 'bÉ”Ëd',\n      example: 'The teacher writes on the board.',\n    },\n    {\n      word: 'marker',\n      translation: 'Ð¼Ð°Ñ€ÐºÐµÑ€',\n      transcription: 'ËˆmÉ‘ËkÉ™',\n      example: 'Use a black marker, please.',\n    },\n    {\n      word: 'bag',\n      translation: 'ÑÑƒÐ¼ÐºÐ°, Ñ€ÑŽÐºÐ·Ð°Ðº',\n      transcription: 'bÃ¦É¡',\n      example: 'My school bag is very heavy.',\n    },\n    {\n      word: 'calendar',\n      translation: 'ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€',\n      transcription: 'ËˆkÃ¦lÉªndÉ™',\n      example: 'The calendar is on the wall.',\n    },\n    {\n      word: 'lamp',\n      translation: 'Ð»Ð°Ð¼Ð¿Ð°',\n      transcription: 'lÃ¦mp',\n      example: 'The lamp is on the desk.',\n    },\n    {\n      word: 'stapler',\n      translation: 'ÑÑ‚ÐµÐ¿Ð»ÐµÑ€',\n      transcription: 'ËˆsteÉªplÉ™',\n      example: 'Can I use your stapler?',\n    },\n    {\n      word: 'paper clip',\n      translation: 'ÑÐºÑ€Ñ–Ð¿ÐºÐ°',\n      transcription: 'ËˆpeÉªpÉ™ klÉªp',\n      example: 'There are some paper clips in the drawer.',\n    },\n    {\n      word: 'envelope',\n      translation: 'ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚',\n      transcription: 'ËˆenvÉ™lÉ™ÊŠp',\n      example: 'Put the letter in an envelope.',\n    },\n    {\n      word: 'whiteboard',\n      translation: 'Ð±Ñ–Ð»Ð° Ð´Ð¾ÑˆÐºÐ°',\n      transcription: 'ËˆwaÉªtbÉ”Ëd',\n      example: 'The whiteboard is clean now.',\n    },\n    {\n      word: 'clock',\n      translation: 'Ð³Ð¾Ð´Ð¸Ð½Ð½Ð¸Ðº',\n      transcription: 'klÉ’k',\n      example: 'There is a clock on the wall.',\n    },\n  ],\n  'colours-basics': [\n    {\n      word: 'black',\n      translation: 'Ñ‡Ð¾Ñ€Ð½Ð¸Ð¹',\n      transcription: 'blÃ¦k',\n      example: 'I prefer a black theme in the app.',\n    },\n    {\n      word: 'white',\n      translation: 'Ð±Ñ–Ð»Ð¸Ð¹',\n      transcription: 'waÉªt',\n      example: 'The logo looks clean on a white background.',\n    },\n    {\n      word: 'grey',\n      translation: 'ÑÑ–Ñ€Ð¸Ð¹',\n      transcription: 'É¡reÉª',\n      example: 'Use a light grey for the captions.',\n    },\n    {\n      word: 'gray',\n      translation: 'ÑÑ–Ñ€Ð¸Ð¹ (Ð°Ð¼ÐµÑ€.)',\n      transcription: 'É¡reÉª',\n      example: 'The walls are painted gray.',\n    },\n    {\n      word: 'red',\n      translation: 'Ñ‡ÐµÑ€Ð²Ð¾Ð½Ð¸Ð¹',\n      transcription: 'red',\n      example: 'Red buttons usually signal an alert.',\n    },\n    {\n      word: 'blue',\n      translation: 'ÑÐ¸Ð½Ñ–Ð¹',\n      transcription: 'bluË',\n      example: 'Our brand uses a dark blue palette.',\n    },\n    {\n      word: 'green',\n      translation: 'Ð·ÐµÐ»ÐµÐ½Ð¸Ð¹',\n      transcription: 'É¡riËn',\n      example: 'Green indicates success or confirmation.',\n    },\n    {\n      word: 'yellow',\n      translation: 'Ð¶Ð¾Ð²Ñ‚Ð¸Ð¹',\n      transcription: 'Ëˆjel.oÊŠ',\n      example: 'Add a yellow highlight for emphasis.',\n    },\n    {\n      word: 'orange',\n      translation: 'Ð¿Ð¾Ð¼Ð°Ñ€Ð°Ð½Ñ‡ÐµÐ²Ð¸Ð¹',\n      transcription: 'ËˆÉ’r.ÉªndÊ’',\n      example: 'Orange can draw attention to a CTA.',\n    },\n    {\n      word: 'purple',\n      translation: 'Ñ„Ñ–Ð¾Ð»ÐµÑ‚Ð¾Ð²Ð¸Ð¹',\n      transcription: 'ËˆpÉœË.pÉ™l',\n      example: 'We tested a purple accent on the header.',\n    },\n    {\n      word: 'pink',\n      translation: 'Ñ€Ð¾Ð¶ÐµÐ²Ð¸Ð¹',\n      transcription: 'pÉªÅ‹k',\n      example: 'This chart uses pink for the second series.',\n    },\n    {\n      word: 'brown',\n      translation: 'ÐºÐ¾Ñ€Ð¸Ñ‡Ð½ÐµÐ²Ð¸Ð¹',\n      transcription: 'braÊŠn',\n      example: 'We switched to a warm brown for the furniture.',\n    },\n    {\n      word: 'beige',\n      translation: 'Ð±ÐµÐ¶ÐµÐ²Ð¸Ð¹',\n      transcription: 'beÉªÊ’',\n      example: 'Beige walls make the room calmer.',\n    },\n    {\n      word: 'light',\n      translation: 'ÑÐ²Ñ–Ñ‚Ð»Ð¸Ð¹',\n      transcription: 'laÉªt',\n      example: 'Use a light green header.',\n    },\n    {\n      word: 'dark',\n      translation: 'Ñ‚ÐµÐ¼Ð½Ð¸Ð¹',\n      transcription: 'dÉ‘Ëk',\n      example: 'A dark blue footer looks more balanced.',\n    },\n    {\n      word: 'pale',\n      translation: 'Ð±Ð»Ñ–Ð´Ð¸Ð¹',\n      transcription: 'peÉªl',\n      example: 'Pale pink is used for the background.',\n    },\n    {\n      word: 'pastel',\n      translation: 'Ð¿Ð°ÑÑ‚ÐµÐ»ÑŒÐ½Ð¸Ð¹',\n      transcription: 'ËˆpÃ¦s.tÉ™l',\n      example: 'I like pastel colours for minimalistic design.',\n    },\n    {\n      word: 'bright',\n      translation: 'ÑÑÐºÑ€Ð°Ð²Ð¸Ð¹',\n      transcription: 'braÉªt',\n      example: 'Bright yellow icons catch the eye.',\n    },\n    {\n      word: 'vivid',\n      translation: 'Ð½Ð°ÑÐ¸Ñ‡ÐµÐ½Ð¸Ð¹',\n      transcription: 'ËˆvÉªv.Éªd',\n      example: 'Use a vivid red to emphasize urgency.',\n    },\n    {\n      word: 'deep',\n      translation: 'Ð³Ð»Ð¸Ð±Ð¾ÐºÐ¸Ð¹ (Ð¿Ñ€Ð¾ ÐºÐ¾Ð»Ñ–Ñ€)',\n      transcription: 'diËp',\n      example: 'I prefer a deep purple accent.',\n    },\n    {\n      word: 'rich',\n      translation: 'Ð±Ð°Ð³Ð°Ñ‚Ð¸Ð¹, Ð½Ð°ÑÐ¸Ñ‡ÐµÐ½Ð¸Ð¹',\n      transcription: 'rÉªtÊƒ',\n      example: 'The brand uses a rich green tone.',\n    },\n    {\n      word: 'neutral',\n      translation: 'Ð½ÐµÐ¹Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¸Ð¹',\n      transcription: 'ËˆnjuË.trÉ™l',\n      example: 'Neutral grey works well for typography.',\n    },\n    {\n      word: 'muted',\n      translation: 'Ð¿Ñ€Ð¸Ð³Ð»ÑƒÑˆÐµÐ½Ð¸Ð¹',\n      transcription: 'ËˆmjuË.tÉªd',\n      example: 'Use a muted orange instead of a bright one.',\n    },\n    {\n      word: 'warm',\n      translation: 'Ñ‚ÐµÐ¿Ð»Ð¸Ð¹ (Ð²Ñ–Ð´Ñ‚Ñ–Ð½Ð¾Ðº)',\n      transcription: 'wÉ”Ëm',\n      example: 'Warm beige creates a cozy atmosphere.',\n    },\n    {\n      word: 'cool',\n      translation: 'Ñ…Ð¾Ð»Ð¾Ð´Ð½Ð¸Ð¹ (Ð²Ñ–Ð´Ñ‚Ñ–Ð½Ð¾Ðº)',\n      transcription: 'kuËl',\n      example: 'Cool blue feels more professional.',\n    },\n    {\n      word: 'contrast',\n      translation: 'ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÑÑ‚',\n      transcription: 'ËˆkÉ’n.trÉ‘Ëst',\n      example: 'Increase the contrast for better readability.',\n    },\n    {\n      word: 'shade',\n      translation: 'Ð²Ñ–Ð´Ñ‚Ñ–Ð½Ð¾Ðº',\n      transcription: 'ÊƒeÉªd',\n      example: 'Choose a lighter shade of green.',\n    },\n    {\n      word: 'tone',\n      translation: 'Ñ‚Ð¾Ð½',\n      transcription: 'tÉ™ÊŠn',\n      example: 'The tone of blue is too dark.',\n    },\n    {\n      word: 'palette',\n      translation: 'Ð¿Ð°Ð»Ñ–Ñ‚Ñ€Ð°',\n      transcription: 'ËˆpÃ¦l.É™t',\n      example: 'Our new brand palette includes three main colours.',\n    },\n  ],\n  'family-relationships': [\n    {\n      word: 'mother',\n      translation: 'Ð¼Ð°Ñ‚Ð¸',\n      transcription: 'ËˆmÊŒÃ°É™r',\n      example: 'My mother is a doctor.',\n    },\n    {\n      word: 'mom',\n      translation: 'Ð¼Ð°Ð¼Ð°',\n      transcription: 'mÉ’m',\n      example: 'My mom is a doctor.',\n    },\n    {\n      word: 'father',\n      translation: 'Ð±Ð°Ñ‚ÑŒÐºÐ¾',\n      transcription: 'ËˆfÉ‘ËÃ°É™r',\n      example: 'My father works in IT.',\n    },\n    {\n      word: 'dad',\n      translation: 'Ñ‚Ð°Ñ‚Ð¾',\n      transcription: 'dÃ¦d',\n      example: 'My dad works in IT.',\n    },\n    {\n      word: 'parents',\n      translation: 'Ð±Ð°Ñ‚ÑŒÐºÐ¸',\n      transcription: 'ËˆpeÉ™rÉ™nts',\n      example: 'My parents live abroad.',\n    },\n    {\n      word: 'son',\n      translation: 'ÑÐ¸Ð½',\n      transcription: 'sÊŒn',\n      example: 'She has a teenage son.',\n    },\n    {\n      word: 'daughter',\n      translation: 'Ð´Ð¾Ñ‡ÐºÐ°',\n      transcription: 'ËˆdÉ”ËtÉ™r',\n      example: 'Her daughter studies medicine.',\n    },\n    {\n      word: 'brother',\n      translation: 'Ð±Ñ€Ð°Ñ‚',\n      transcription: 'ËˆbrÊŒÃ°É™r',\n      example: 'I have an older brother.',\n    },\n    {\n      word: 'sister',\n      translation: 'ÑÐµÑÑ‚Ñ€Ð°',\n      transcription: 'ËˆsÉªstÉ™r',\n      example: 'I have an older sister.',\n    },\n    {\n      word: 'husband',\n      translation: 'Ñ‡Ð¾Ð»Ð¾Ð²Ñ–Ðº',\n      transcription: 'ËˆhÊŒzbÉ™nd',\n      example: 'Her husband travels a lot.',\n    },\n    {\n      word: 'wife',\n      translation: 'Ð´Ñ€ÑƒÐ¶Ð¸Ð½Ð°',\n      transcription: 'waÉªf',\n      example: 'My wife works from home.',\n    },\n    {\n      word: 'child',\n      translation: 'Ð´Ð¸Ñ‚Ð¸Ð½Ð°',\n      transcription: 'tÊƒaÉªld',\n      example: 'Their child is very polite.',\n    },\n    {\n      word: 'children',\n      translation: 'Ð´Ñ–Ñ‚Ð¸',\n      transcription: 'ËˆtÊƒÉªldrÉ™n',\n      example: 'They have two children.',\n    },\n    {\n      word: 'grandmother',\n      translation: 'Ð±Ð°Ð±ÑƒÑÑ',\n      transcription: 'ËˆÉ¡rÃ¦nËŒmÊŒÃ°É™r',\n      example: 'My grandmother is 80.',\n    },\n    {\n      word: 'grandfather',\n      translation: 'Ð´Ñ–Ð´ÑƒÑÑŒ',\n      transcription: 'ËˆÉ¡rÃ¦ndËŒfÉ‘ËÃ°É™r',\n      example: 'My grandfather tells great stories.',\n    },\n    {\n      word: 'grandparents',\n      translation: 'Ð´Ñ–Ð´ÑƒÑÑŒ Ñ– Ð±Ð°Ð±ÑƒÑÑ',\n      transcription: 'ËˆÉ¡rÃ¦nËŒpeÉ™rÉ™nts',\n      example: 'We visit our grandparents on weekends.',\n    },\n    {\n      word: 'aunt',\n      translation: 'Ñ‚Ñ–Ñ‚ÐºÐ°',\n      transcription: 'É‘Ënt',\n      example: 'My aunt lives in London.',\n    },\n    {\n      word: 'uncle',\n      translation: 'Ð´ÑÐ´ÑŒÐºÐ¾',\n      transcription: 'ËˆÊŒÅ‹kÉ™l',\n      example: 'My uncle lives in Canada.',\n    },\n    {\n      word: 'cousin',\n      translation: 'Ð´Ð²Ð¾ÑŽÑ€Ñ–Ð´Ð½Ð¸Ð¹ Ð±Ñ€Ð°Ñ‚ / ÑÐµÑÑ‚Ñ€Ð°',\n      transcription: 'ËˆkÊŒzÉ™n',\n      example: 'My cousin works as a designer.',\n    },\n    {\n      word: 'niece',\n      translation: 'Ð¿Ð»ÐµÐ¼Ñ–Ð½Ð½Ð¸Ñ†Ñ',\n      transcription: 'niËs',\n      example: 'My niece is six years old.',\n    },\n    {\n      word: 'nephew',\n      translation: 'Ð¿Ð»ÐµÐ¼Ñ–Ð½Ð½Ð¸Ðº',\n      transcription: 'ËˆnefjuË',\n      example: 'He spends weekends with his nephew.',\n    },\n    {\n      word: 'in-laws',\n      translation: 'Ñ€Ð¾Ð´Ð¸Ñ‡Ñ– Ð· Ð±Ð¾ÐºÑƒ Ñ‡Ð¾Ð»Ð¾Ð²Ñ–ÐºÐ°/Ð´Ñ€ÑƒÐ¶Ð¸Ð½Ð¸',\n      transcription: 'ËˆÉªn.lÉ”Ëz',\n      example: 'I get along well with my in-laws.',\n    },\n    {\n      word: 'mother-in-law',\n      translation: 'ÑÐ²ÐµÐºÑ€ÑƒÑ…Ð° / Ñ‚ÐµÑ‰Ð°',\n      transcription: 'ËˆmÊŒÃ°É™r Éªn lÉ”Ë',\n      example: 'Her mother-in-law is very supportive.',\n    },\n    {\n      word: 'father-in-law',\n      translation: 'ÑÐ²ÐµÐºÐ¾Ñ€ / Ñ‚ÐµÑÑ‚ÑŒ',\n      transcription: 'ËˆfÉ‘ËÃ°É™r Éªn lÉ”Ë',\n      example: 'My father-in-law is a kind man.',\n    },\n    {\n      word: 'brother-in-law',\n      translation: 'Ð´Ñ–Ð²ÐµÑ€ / ÑˆÐ²Ð°Ò‘Ñ€Ð¾',\n      transcription: 'ËˆbrÊŒÃ°É™r Éªn lÉ”Ë',\n      example: 'My brother-in-law is an architect.',\n    },\n    {\n      word: 'sister-in-law',\n      translation: 'Ð·Ð¾Ð²Ð¸Ñ†Ñ / Ð½ÐµÐ²Ñ–ÑÑ‚ÐºÐ°',\n      transcription: 'ËˆsÉªstÉ™r Éªn lÉ”Ë',\n      example: 'My sister-in-law is a lawyer.',\n    },\n    {\n      word: 'stepmother',\n      translation: 'Ð¼Ð°Ñ‡ÑƒÑ…Ð°',\n      transcription: 'ËˆstepËŒmÊŒÃ°É™r',\n      example: 'He was raised by his stepmother.',\n    },\n    {\n      word: 'stepfather',\n      translation: 'Ð²Ñ–Ñ‚Ñ‡Ð¸Ð¼',\n      transcription: 'ËˆstepËŒfÉ‘ËÃ°É™r',\n      example: 'He was raised by his stepfather.',\n    },\n    {\n      word: 'stepsister',\n      translation: 'Ð·Ð²ÐµÐ´ÐµÐ½Ð° ÑÐµÑÑ‚Ñ€Ð°',\n      transcription: 'ËˆstepËŒsÉªstÉ™r',\n      example: 'She has a younger stepsister.',\n    },\n    {\n      word: 'stepbrother',\n      translation: 'Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ð¹ Ð±Ñ€Ð°Ñ‚',\n      transcription: 'ËˆstepËŒbrÊŒÃ°É™r',\n      example: 'He has a stepbrother in another city.',\n    },\n    {\n      word: 'single',\n      translation: 'Ð½ÐµÐ¾Ð´Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ð¹ / Ð½ÐµÐ·Ð°Ð¼Ñ–Ð¶Ð½Ñ',\n      transcription: 'ËˆsÉªÅ‹É¡É™l',\n      example: 'Iâ€™m single.',\n    },\n    {\n      word: 'in a relationship',\n      translation: 'Ñƒ ÑÑ‚Ð¾ÑÑƒÐ½ÐºÐ°Ñ…',\n      transcription: 'Éªn É™ rÉªËˆleÉªÊƒÉ™nÊƒÉªp',\n      example: 'He is in a relationship.',\n    },\n    {\n      word: 'married',\n      translation: 'Ð¾Ð´Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ð¹ / Ð·Ð°Ð¼Ñ–Ð¶Ð½Ñ',\n      transcription: 'ËˆmÃ¦rid',\n      example: 'She is married with two children.',\n    },\n    {\n      word: 'engaged',\n      translation: 'Ð·Ð°Ñ€ÑƒÑ‡ÐµÐ½Ð¸Ð¹ / Ð·Ð°Ñ€ÑƒÑ‡ÐµÐ½Ð°',\n      transcription: 'ÉªnËˆÉ¡eÉªdÊ’d',\n      example: 'They got engaged last year.',\n    },\n    {\n      word: 'divorced',\n      translation: 'Ñ€Ð¾Ð·Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¹ / Ñ€Ð¾Ð·Ð»ÑƒÑ‡ÐµÐ½Ð°',\n      transcription: 'dÉªËˆvÉ”Ëst',\n      example: 'He is divorced.',\n    },\n    {\n      word: 'widowed',\n      translation: 'Ð²Ð´Ñ–Ð²(ÐµÑ†ÑŒ) / Ð²Ð´Ð¾Ð²Ð°',\n      transcription: 'ËˆwÉªdÉ™ÊŠd',\n      example: 'She was widowed young.',\n    },\n    {\n      word: 'partner',\n      translation: 'Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€ / Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€ÐºÐ°',\n      transcription: 'ËˆpÉ‘ËtnÉ™r',\n      example: 'My partner works remotely.',\n    },\n    {\n      word: 'spouse',\n      translation: 'Ð¿Ð¾Ð´Ñ€ÑƒÐ¶Ð¶Ñ (Ð¾Ñ„Ñ–Ñ†.)',\n      transcription: 'spaÊŠs',\n      example: 'Please include your spouseâ€™s name.',\n    },\n    {\n      word: 'fiancÃ©',\n      translation: 'Ð½Ð°Ñ€ÐµÑ‡ÐµÐ½Ð¸Ð¹',\n      transcription: 'fiËˆÉ’n.seÉª',\n      example: 'Her fiancÃ© lives in Berlin.',\n    },\n    {\n      word: 'fiancÃ©e',\n      translation: 'Ð½Ð°Ñ€ÐµÑ‡ÐµÐ½Ð°',\n      transcription: 'fiËˆÉ’n.seÉª',\n      example: 'His fiancÃ©e is from Spain.',\n    },\n    {\n      word: 'cohabiting',\n      translation: 'ÑÐ¿Ñ–Ð»ÑŒÐ½Ðµ Ð¿Ñ€Ð¾Ð¶Ð¸Ð²Ð°Ð½Ð½Ñ',\n      transcription: 'kÉ™ÊŠËˆhÃ¦bÉªtÉªÅ‹',\n      example: 'They are cohabiting but not married.',\n    },\n    {\n      word: 'close',\n      translation: 'Ð±Ð»Ð¸Ð·ÑŒÐºÐ¸Ð¹',\n      transcription: 'klÉ™ÊŠs',\n      example: 'We have a close family.',\n    },\n    {\n      word: 'supportive',\n      translation: 'Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ð»ÑŒÐ½Ð¸Ð¹',\n      transcription: 'sÉ™ËˆpÉ”ËtÉªv',\n      example: 'She has a very supportive husband.',\n    },\n    {\n      word: 'distant',\n      translation: 'Ð²Ñ–Ð´ÑÑ‚Ð¾Ñ€Ð¾Ð½ÐµÐ½Ð¸Ð¹',\n      transcription: 'ËˆdÉªstÉ™nt',\n      example: 'He has a distant relationship with his father.',\n    },\n    {\n      word: 'complicated',\n      translation: 'ÑÐºÐ»Ð°Ð´Ð½Ð¸Ð¹',\n      transcription: 'ËˆkÉ’mplÉªkeÉªtÉªd',\n      example: 'Their relationship is complicated.',\n    },\n    {\n      word: 'get along with',\n      translation: 'Ð»Ð°Ð´Ð½Ð°Ñ‚Ð¸ Ð· ÐºÐ¸Ð¼Ð¾ÑÑŒ',\n      transcription: 'É¡et É™ËˆlÉ’Å‹ wÉªÃ°',\n      example: 'I get along well with my in-laws.',\n    },\n    {\n      word: 'take care of',\n      translation: 'Ð¿Ñ–ÐºÐ»ÑƒÐ²Ð°Ñ‚Ð¸ÑÑ Ð¿Ñ€Ð¾',\n      transcription: 'teÉªk keÉ™r É’v',\n      example: 'She takes care of her grandparents.',\n    },\n    {\n      word: 'look after',\n      translation: 'Ð´Ð¾Ð³Ð»ÑÐ´Ð°Ñ‚Ð¸',\n      transcription: 'lÊŠk ËˆÉ‘ËftÉ™r',\n      example: 'He looks after his niece on weekends.',\n    },\n    {\n      word: 'raise',\n      translation: 'Ð²Ð¸Ñ…Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸',\n      transcription: 'reÉªz',\n      example: 'They raised three children.',\n    },\n    {\n      word: 'bring up',\n      translation: 'Ð²Ð¸Ñ…Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ (ÑÐ¸Ð½Ð¾Ð½Ñ–Ð¼)',\n      transcription: 'brÉªÅ‹ ÊŒp',\n      example: 'She was brought up by her grandparents.',\n    },\n    {\n      word: 'split up',\n      translation: 'Ñ€Ð¾Ð·Ñ–Ð¹Ñ‚Ð¸ÑÑ',\n      transcription: 'splÉªt ÊŒp',\n      example: 'They split up last year.',\n    },\n    {\n      word: 'break up',\n      translation: 'Ñ€Ð¾Ð·Ð»ÑƒÑ‡Ð¸Ñ‚Ð¸ÑÑ (Ð¿Ñ€Ð¾ Ð¿Ð°Ñ€Ñƒ)',\n      transcription: 'breÉªk ÊŒp',\n      example: 'They broke up after 5 years together.',\n    },\n    {\n      word: 'reconcile',\n      translation: 'Ð¿Ð¾Ð¼Ð¸Ñ€Ð¸Ñ‚Ð¸ÑÑ',\n      transcription: 'Ëˆrek.É™n.saÉªl',\n      example: 'They reconciled after a long talk.',\n    },\n    {\n      word: 'family gathering',\n      translation: 'ÑÑ–Ð¼ÐµÐ¹Ð½Ñ– Ð·Ð±Ð¾Ñ€Ð¸',\n      transcription: 'ËˆfÃ¦mÉªli ËˆÉ¡Ã¦Ã°É™rÉªÅ‹',\n      example: 'We have a family gathering every summer.',\n    },\n    {\n      word: 'family reunion',\n      translation: 'ÑÑ–Ð¼ÐµÐ¹Ð½Ðµ Ð²Ð¾Ð·Ð·â€™Ñ”Ð´Ð½Ð°Ð½Ð½Ñ',\n      transcription: 'ËˆfÃ¦mÉªli riËˆjuËniÉ™n',\n      example: 'The family reunion takes place once a year.',\n    },\n    {\n      word: 'siblings',\n      translation: 'Ð±Ñ€Ð°Ñ‚Ð¸ Ñ– ÑÐµÑÑ‚Ñ€Ð¸',\n      transcription: 'ËˆsÉªblÉªÅ‹z',\n      example: 'Do you have any siblings?',\n    },\n    {\n      word: 'relationship',\n      translation: 'ÑÑ‚Ð¾ÑÑƒÐ½ÐºÐ¸',\n      transcription: 'rÉªËˆleÉªÊƒÉ™nÊƒÉªp',\n      example: 'He is in a relationship.',\n    },\n    {\n      word: 'children',\n      translation: 'Ð´Ñ–Ñ‚Ð¸',\n      transcription: 'ËˆtÊƒÉªldrÉ™n',\n      example: 'Do you have children?',\n    },\n    {\n      word: 'family',\n      translation: 'Ñ€Ð¾Ð´Ð¸Ð½Ð°',\n      transcription: 'ËˆfÃ¦mÉªli',\n      example: 'Does your family live nearby?',\n    },\n  ],\n  'home-rooms-furniture': [\n    {\n      word: 'living room',\n      translation: 'Ð²Ñ–Ñ‚Ð°Ð»ÑŒÐ½Ñ',\n      transcription: 'ËˆlÉªvÉªÅ‹ ruËm',\n      example: 'We relax in the living room after work.',\n    },\n    {\n      word: 'bedroom',\n      translation: 'ÑÐ¿Ð°Ð»ÑŒÐ½Ñ',\n      transcription: 'ËˆbedruËm',\n      example: 'The bedroom has a big wardrobe.',\n    },\n    {\n      word: 'kitchen',\n      translation: 'ÐºÑƒÑ…Ð½Ñ',\n      transcription: 'ËˆkÉªtÊƒÉ™n',\n      example: 'The kitchen is small but functional.',\n    },\n    {\n      word: 'bathroom',\n      translation: 'Ð²Ð°Ð½Ð½Ð° ÐºÑ–Ð¼Ð½Ð°Ñ‚Ð°',\n      transcription: 'ËˆbÉ‘ËÎ¸ruËm',\n      example: 'The bathroom has a shower, not a bath.',\n    },\n    {\n      word: 'hallway',\n      translation: 'Ð¿ÐµÑ€ÐµÐ´Ð¿Ð¾ÐºÑ–Ð¹',\n      transcription: 'ËˆhÉ”ËlweÉª',\n      example: 'The hallway is narrow.',\n    },\n    {\n      word: 'corridor',\n      translation: 'ÐºÐ¾Ñ€Ð¸Ð´Ð¾Ñ€',\n      transcription: 'ËˆkÉ’rÉªdÉ”Ër',\n      example: 'Thereâ€™s a long corridor in the apartment.',\n    },\n    {\n      word: 'balcony',\n      translation: 'Ð±Ð°Ð»ÐºÐ¾Ð½',\n      transcription: 'ËˆbÃ¦lkÉ™ni',\n      example: 'Thereâ€™s a small balcony with a view.',\n    },\n    {\n      word: 'home office',\n      translation: 'Ð´Ð¾Ð¼Ð°ÑˆÐ½Ñ–Ð¹ Ð¾Ñ„Ñ–Ñ',\n      transcription: 'hÉ™ÊŠm ËˆÉ’fÉªs',\n      example: 'I work from a small home office.',\n    },\n    {\n      word: 'study',\n      translation: 'ÐºÐ°Ð±Ñ–Ð½ÐµÑ‚',\n      transcription: 'ËˆstÊŒdi',\n      example: 'He spends most of his time in the study.',\n    },\n    {\n      word: 'storage room',\n      translation: 'ÐºÐ¾Ð¼Ð¾Ñ€Ð°',\n      transcription: 'ËˆstÉ”ËrÉªdÊ’ ruËm',\n      example: 'We keep tools in the storage room.',\n    },\n\n    // --- FURNITURE ---\n    {\n      word: 'sofa',\n      translation: 'Ð´Ð¸Ð²Ð°Ð½',\n      transcription: 'ËˆsÉ™ÊŠfÉ™',\n      example: 'The sofa is very comfortable.',\n    },\n    {\n      word: 'couch',\n      translation: 'Ð´Ð¸Ð²Ð°Ð½ (Ð°Ð¼ÐµÑ€.)',\n      transcription: 'kaÊŠtÊƒ',\n      example: 'We bought a new couch for the living room.',\n    },\n    {\n      word: 'armchair',\n      translation: 'ÐºÑ€Ñ–ÑÐ»Ð¾',\n      transcription: 'ËˆÉ‘ËmtÊƒeÉ™r',\n      example: 'I read in the armchair by the window.',\n    },\n    {\n      word: 'coffee table',\n      translation: 'Ð¶ÑƒÑ€Ð½Ð°Ð»ÑŒÐ½Ð¸Ð¹ ÑÑ‚Ð¾Ð»Ð¸Ðº',\n      transcription: 'ËˆkÉ’fi ËˆteÉªbÉ™l',\n      example: 'Put the magazines on the coffee table.',\n    },\n    {\n      word: 'bed',\n      translation: 'Ð»Ñ–Ð¶ÐºÐ¾',\n      transcription: 'bed',\n      example: 'The bed is king-size.',\n    },\n    {\n      word: 'wardrobe',\n      translation: 'ÑˆÐ°Ñ„Ð° Ð´Ð»Ñ Ð¾Ð´ÑÐ³Ñƒ',\n      transcription: 'ËˆwÉ”ËdrÉ™ÊŠb',\n      example: 'My clothes are in the wardrobe.',\n    },\n    {\n      word: 'closet',\n      translation: 'ÐºÐ»Ð°Ð´Ð¾Ð²ÐºÐ° / Ð³Ð°Ñ€Ð´ÐµÑ€Ð¾Ð±Ð½Ð°',\n      transcription: 'ËˆklÉ’zÉªt',\n      example: 'Thereâ€™s a closet next to the bathroom.',\n    },\n    {\n      word: 'dresser',\n      translation: 'ÐºÐ¾Ð¼Ð¾Ð´',\n      transcription: 'ËˆdresÉ™r',\n      example: 'The keys are in the top drawer of the dresser.',\n    },\n    {\n      word: 'chest of drawers',\n      translation: 'ÐºÐ¾Ð¼Ð¾Ð´ (Ð±Ñ€Ð¸Ñ‚.)',\n      transcription: 'tÊƒest É™v drÉ”Ëz',\n      example: 'She bought a new chest of drawers for the bedroom.',\n    },\n    {\n      word: 'desk',\n      translation: 'Ð¿Ð¸ÑÑŒÐ¼Ð¾Ð²Ð¸Ð¹ ÑÑ‚Ñ–Ð»',\n      transcription: 'desk',\n      example: 'I keep my laptop on the desk.',\n    },\n    {\n      word: 'chair',\n      translation: 'ÑÑ‚Ñ–Ð»ÐµÑ†ÑŒ',\n      transcription: 'tÊƒeÉ™r',\n      example: 'This chair supports my back well.',\n    },\n    {\n      word: 'bookshelf',\n      translation: 'ÐºÐ½Ð¸Ð¶ÐºÐ¾Ð²Ð° Ð¿Ð¾Ð»Ð¸Ñ†Ñ',\n      transcription: 'ËˆbÊŠkÊƒelf',\n      example: 'The bookshelf is full of novels.',\n    },\n    {\n      word: 'bookcase',\n      translation: 'ÐºÐ½Ð¸Ð¶ÐºÐ¾Ð²Ð° ÑˆÐ°Ñ„Ð°',\n      transcription: 'ËˆbÊŠkkeÉªs',\n      example: 'The bookcase is near the window.',\n    },\n    {\n      word: 'nightstand',\n      translation: 'Ð¿Ñ€Ð¸Ð»Ñ–Ð¶ÐºÐ¾Ð²Ð° Ñ‚ÑƒÐ¼Ð±Ð°',\n      transcription: 'ËˆnaÉªt.stÃ¦nd',\n      example: 'Thereâ€™s a lamp on the nightstand.',\n    },\n    {\n      word: 'dining table',\n      translation: 'Ð¾Ð±Ñ–Ð´Ð½Ñ–Ð¹ ÑÑ‚Ñ–Ð»',\n      transcription: 'ËˆdaÉªnÉªÅ‹ ËˆteÉªbÉ™l',\n      example: 'We eat at the dining table.',\n    },\n    {\n      word: 'kitchen cabinets',\n      translation: 'ÐºÑƒÑ…Ð¾Ð½Ð½Ñ– ÑˆÐ°Ñ„ÐºÐ¸',\n      transcription: 'ËˆkÉªtÊƒÉ™n ËˆkÃ¦bÉªnÉªts',\n      example: 'The kitchen cabinets are new.',\n    },\n\n    // --- APPLIANCES & OBJECTS ---\n    {\n      word: 'fridge',\n      translation: 'Ñ…Ð¾Ð»Ð¾Ð´Ð¸Ð»ÑŒÐ½Ð¸Ðº',\n      transcription: 'frÉªdÊ’',\n      example: 'The fridge is almost empty.',\n    },\n    {\n      word: 'refrigerator',\n      translation: 'Ñ…Ð¾Ð»Ð¾Ð´Ð¸Ð»ÑŒÐ½Ð¸Ðº (Ð¿Ð¾Ð²Ð½Ð° Ñ„Ð¾Ñ€Ð¼Ð°)',\n      transcription: 'rÉªËˆfrÉªdÊ’É™reÉªtÉ™r',\n      example: 'Thereâ€™s milk in the refrigerator.',\n    },\n    {\n      word: 'stove',\n      translation: 'Ð¿Ð»Ð¸Ñ‚Ð°',\n      transcription: 'stÉ™ÊŠv',\n      example: 'The stove is electric.',\n    },\n    {\n      word: 'cooker',\n      translation: 'Ð¿Ð»Ð¸Ñ‚Ð° (Ð±Ñ€Ð¸Ñ‚.)',\n      transcription: 'ËˆkÊŠkÉ™r',\n      example: 'We bought a new gas cooker.',\n    },\n    {\n      word: 'oven',\n      translation: 'Ð´ÑƒÑ…Ð¾Ð²ÐºÐ°',\n      transcription: 'ËˆÊŒvÉ™n',\n      example: 'The oven heats up fast.',\n    },\n    {\n      word: 'microwave',\n      translation: 'Ð¼Ñ–ÐºÑ€Ð¾Ñ…Ð²Ð¸Ð»ÑŒÐ¾Ð²ÐºÐ°',\n      transcription: 'ËˆmaÉªkrÉ™weÉªv',\n      example: 'We use the microwave to reheat food.',\n    },\n    {\n      word: 'washing machine',\n      translation: 'Ð¿Ñ€Ð°Ð»ÑŒÐ½Ð° Ð¼Ð°ÑˆÐ¸Ð½Ð°',\n      transcription: 'ËˆwÉ’ÊƒÉªÅ‹ mÉ™ËŒÊƒiËn',\n      example: 'The washing machine is running.',\n    },\n    {\n      word: 'dishwasher',\n      translation: 'Ð¿Ð¾ÑÑƒÐ´Ð¾Ð¼Ð¸Ð¹ÐºÐ°',\n      transcription: 'ËˆdÉªÊƒËŒwÉ’ÊƒÉ™r',\n      example: 'The dishwasher saves time.',\n    },\n    {\n      word: 'kettle',\n      translation: 'ÐµÐ»ÐµÐºÑ‚Ñ€Ð¾Ñ‡Ð°Ð¹Ð½Ð¸Ðº',\n      transcription: 'ËˆketÉ™l',\n      example: 'Boil water in the kettle, please.',\n    },\n    {\n      word: 'toaster',\n      translation: 'Ñ‚Ð¾ÑÑ‚ÐµÑ€',\n      transcription: 'ËˆtÉ™ÊŠstÉ™r',\n      example: 'The toaster makes great breakfast.',\n    },\n    {\n      word: 'air conditioner',\n      translation: 'ÐºÐ¾Ð½Ð´Ð¸Ñ†Ñ–Ð¾Ð½ÐµÑ€',\n      transcription: 'ËˆeÉ™ kÉ™nËŒdÉªÊƒÉ™nÉ™r',\n      example: 'The air conditioner is set to 23Â°C.',\n    },\n    {\n      word: 'heater',\n      translation: 'Ð¾Ð±Ñ–Ð³Ñ€Ñ–Ð²Ð°Ñ‡',\n      transcription: 'ËˆhiËtÉ™r',\n      example: 'We use a heater in winter.',\n    },\n    {\n      word: 'lamp',\n      translation: 'Ð»Ð°Ð¼Ð¿Ð°',\n      transcription: 'lÃ¦mp',\n      example: 'The lamp gives warm light.',\n    },\n    {\n      word: 'floor lamp',\n      translation: 'Ñ‚Ð¾Ñ€ÑˆÐµÑ€',\n      transcription: 'flÉ”Ë lÃ¦mp',\n      example: 'The floor lamp gives warm light.',\n    },\n    {\n      word: 'rug',\n      translation: 'ÐºÐ¸Ð»Ð¸Ð¼Ð¾Ðº',\n      transcription: 'rÊŒÉ¡',\n      example: 'Thereâ€™s a rug under the coffee table.',\n    },\n    {\n      word: 'carpet',\n      translation: 'ÐºÐ¸Ð»Ð¸Ð¼',\n      transcription: 'ËˆkÉ‘ËpÉªt',\n      example: 'The carpet covers the entire floor.',\n    },\n    {\n      word: 'curtains',\n      translation: 'ÑˆÑ‚Ð¾Ñ€Ð¸',\n      transcription: 'ËˆkÉœËtÉ™nz',\n      example: 'We installed new curtains.',\n    },\n    {\n      word: 'blinds',\n      translation: 'Ð¶Ð°Ð»ÑŽÐ·Ñ–',\n      transcription: 'blaÉªndz',\n      example: 'We installed new blinds.',\n    },\n    {\n      word: 'mirror',\n      translation: 'Ð´Ð·ÐµÑ€ÐºÐ°Ð»Ð¾',\n      transcription: 'ËˆmÉªrÉ™r',\n      example: 'The mirror is on the wall.',\n    },\n    {\n      word: 'shelf',\n      translation: 'Ð¿Ð¾Ð»Ð¸Ñ†Ñ',\n      transcription: 'Êƒelf',\n      example: 'Thereâ€™s a shelf above the desk.',\n    },\n    {\n      word: 'bin',\n      translation: 'ÑÐ¼Ñ–Ñ‚Ð½Ð¸Ðº',\n      transcription: 'bÉªn',\n      example: 'The bin is under the sink.',\n    },\n    {\n      word: 'trash can',\n      translation: 'ÑÐ¼Ñ–Ñ‚Ñ‚Ñ”Ð²Ðµ Ð²Ñ–Ð´Ñ€Ð¾ (Ð°Ð¼ÐµÑ€.)',\n      transcription: 'trÃ¦Êƒ kÃ¦n',\n      example: 'Please empty the trash can.',\n    },\n\n    // --- ACTIONS ---\n    {\n      word: 'do the dishes',\n      translation: 'Ð¼Ð¸Ñ‚Ð¸ Ð¿Ð¾ÑÑƒÐ´',\n      transcription: 'duË Ã°É™ ËˆdÉªÊƒÉªz',\n      example: 'Iâ€™ll do the dishes after dinner.',\n    },\n    {\n      word: 'do the laundry',\n      translation: 'Ð¿Ñ€Ð°Ñ‚Ð¸ Ð±Ñ–Ð»Ð¸Ð·Ð½Ñƒ',\n      transcription: 'duË Ã°É™ ËˆlÉ”Ëndri',\n      example: 'We do the laundry on weekends.',\n    },\n    {\n      word: 'vacuum',\n      translation: 'Ð¿Ð¸Ð»Ð¾ÑÐ¾ÑÐ¸Ñ‚Ð¸',\n      transcription: 'ËˆvÃ¦kjuËm',\n      example: 'I need to vacuum the living room.',\n    },\n    {\n      word: 'take out the trash',\n      translation: 'Ð²Ð¸Ð½ÐµÑÑ‚Ð¸ ÑÐ¼Ñ–Ñ‚Ñ‚Ñ',\n      transcription: 'teÉªk aÊŠt Ã°É™ trÃ¦Êƒ',\n      example: 'Please take out the trash tonight.',\n    },\n    {\n      word: 'wipe the table',\n      translation: 'Ð²Ð¸Ñ‚ÐµÑ€Ñ‚Ð¸ ÑÑ‚Ñ–Ð»',\n      transcription: 'waÉªp Ã°É™ ËˆteÉªbÉ™l',\n      example: 'Wipe the table after cooking.',\n    },\n    {\n      word: 'make the bed',\n      translation: 'Ð·Ð°ÑÑ‚ÐµÐ»Ð¸Ñ‚Ð¸ Ð»Ñ–Ð¶ÐºÐ¾',\n      transcription: 'meÉªk Ã°É™ bed',\n      example: 'I always make the bed in the morning.',\n    },\n    {\n      word: 'water the plants',\n      translation: 'Ð¿Ð¾Ð»Ð¸Ð²Ð°Ñ‚Ð¸ Ñ€Ð¾ÑÐ»Ð¸Ð½Ð¸',\n      transcription: 'ËˆwÉ”ËtÉ™r Ã°É™ plÉ‘Ënts',\n      example: 'Donâ€™t forget to water the plants.',\n    },\n  ],\n};\n","import { auth } from '@features/auth/auth.js';\nimport {\n  createShareControl,\n  isSharePanelActive,\n  closeActiveSharePanel,\n  setShareAvailability,\n} from '@features/helpers/share-panel.js';\nimport { addHomework } from '@api/homework.js';\n\nconst shareRegistry = new Map();\nlet hasSubscribedToAuth = false;\n\nfunction ensureShareAvailabilitySubscription() {\n  if (hasSubscribedToAuth) return;\n  hasSubscribedToAuth = true;\n  auth.subscribe(({ user }) => {\n    setShareAvailability(auth.isAdmin(user));\n  });\n}\n\nfunction ensureRelativePosition(element) {\n  if (!element) return;\n  const current = window.getComputedStyle(element).position;\n  if (current === 'static' || !current) {\n    element.style.position = 'relative';\n  }\n}\n\nfunction ensureShareControlsWrapper(target) {\n  const existing = target.querySelector('.lesson-topic__share-controls');\n  if (existing) return existing;\n  const controls = document.createElement('div');\n  controls.className = 'lesson-topic__share-controls';\n  controls.style.position = 'absolute';\n  controls.style.top = '0';\n  controls.style.right = '0';\n  controls.style.display = 'flex';\n  controls.style.gap = '6px';\n  controls.style.alignItems = 'center';\n  controls.style.zIndex = '10';\n  target.appendChild(controls);\n  return controls;\n}\n\nfunction attachShareToTopic(topic) {\n  if (!topic || shareRegistry.has(topic)) return;\n  const header = topic.querySelector('.lesson-topic__header') ?? topic;\n\n  ensureRelativePosition(header);\n  const controls = ensureShareControlsWrapper(header);\n\n  const {\n    button: shareButton,\n    panel: sharePanel,\n    unregister,\n  } = createShareControl({\n    context: topic,\n    triggerClassName:\n      'lesson-topic__share-trigger for-admin js-share-topic-btn',\n    triggerStyle:\n      'border:none;background:#2563eb;color:#fff;padding:4px 12px;border-radius:999px;font-size:12px;line-height:1;cursor:pointer;box-shadow:0 4px 12px rgba(37,99,235,0.24);',\n    onShare: ({ student, context }) => {\n      const container = document.createElement('div'); //lesson-topic__share-controls //practice-share-panel\n      container.innerHTML = context.outerHTML;\n\n      const lessonId = window.location.search.slice(8);\n      const heading = document.querySelector('h1');\n      const lessonName = heading ? heading.textContent : '';\n\n      const el1 = container.querySelector('.lesson-topic__share-controls');\n      const el2 = container.querySelector('.practice-share-panel');\n\n      el1.remove();\n      el2.remove();\n\n      const homework = {\n        lessonId,\n        userEmail: student.email,\n        lessonName,\n        homeworkType: 'theory',\n        homeworkData: container.innerHTML,\n      };\n\n      return addHomework(homework);\n    },\n  });\n\n  sharePanel.style.right = '0';\n  sharePanel.style.top = '38px';\n\n  controls.appendChild(shareButton);\n  header.appendChild(sharePanel);\n\n  shareRegistry.set(topic, {\n    unregister,\n    panel: sharePanel,\n  });\n}\n\nfunction cleanupDetachedTopics() {\n  shareRegistry.forEach((entry, topic) => {\n    if (topic.isConnected) return;\n    if (entry.panel && isSharePanelActive(entry.panel)) {\n      closeActiveSharePanel();\n    }\n    entry.unregister?.();\n    shareRegistry.delete(topic);\n  });\n}\n\nexport const renderTopicSender = () => {\n  ensureShareAvailabilitySubscription();\n  cleanupDetachedTopics();\n  const topics = document.querySelectorAll('.lesson-topic');\n  topics.forEach(topic => attachShareToTopic(topic));\n};\n","const DEFAULT_THEME_ID = 55;\nconst DEFAULT_TEMPLATE_ID = 5;\nconst DEFAULT_FONT_STACK_ID = 0;\n\nexport const lessonWordwalls = {\n  'custom-no1-mggxs7zo': [\n    {\n      id: 'abf91e0d2ea04f8cabb896481369bcdf',\n      themeId: '42',\n      templateId: '70',\n      fontStackId: DEFAULT_FONT_STACK_ID,\n      title: 'Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð°',\n    },\n    // {\n    //   id: 'db94624e1c8042ce98760f467377e1ae',\n    //   themeId: '42',\n    //   templateId: '70',\n    //   fontStackId: DEFAULT_FONT_STACK_ID,\n    //   title: 'Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð° Ð´Ð»Ñ Ð¾ÑÐ¾Ð±Ð¾Ð²Ð¸Ñ… Ð·Ð°Ð¹Ð¼ÐµÐ½Ð½Ð¸ÐºÑ–Ð²',\n    // },\n  ],\n  'custom-no2-4db25661': [\n    {\n      id: '110f5ab8bba8415eadefd09fb52c4e87',\n      themeId: '65',\n      templateId: '30',\n      fontStackId: '12',\n      title: 'Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð° Ð´Ð»Ñ Ð¾ÑÐ¾Ð±Ð¾Ð²Ð¸Ñ… Ð·Ð°Ð¹Ð¼ÐµÐ½Ð½Ð¸ÐºÑ–Ð²',\n      url: 'https://wordwall.net/embed/110f5ab8bba8415eadefd09fb52c4e87?themeId=65&templateId=30&fontStackId=12',\n    },\n  ],\n  'custom-no3-b9fd7e6c': [\n    {\n      id: '110f5ab8bba8415eadefd09fb52c4e87',\n      themeId: '65',\n      templateId: '30',\n      fontStackId: '12',\n      title: 'Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð° Ð´Ð»Ñ Ð¾ÑÐ¾Ð±Ð¾Ð²Ð¸Ñ… Ð·Ð°Ð¹Ð¼ÐµÐ½Ð½Ð¸ÐºÑ–Ð²',\n      url: 'https://wordwall.net/embed/110f5ab8bba8415eadefd09fb52c4e87?themeId=65&templateId=30&fontStackId=12',\n    },\n  ],\n  'custom-no4-c6f6abec': [\n    {\n      id: '110f5ab8bba8415eadefd09fb52c4e87',\n      themeId: '65',\n      templateId: '30',\n      fontStackId: '12',\n      title: 'Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð° Ð´Ð»Ñ Ð¾ÑÐ¾Ð±Ð¾Ð²Ð¸Ñ… Ð·Ð°Ð¹Ð¼ÐµÐ½Ð½Ð¸ÐºÑ–Ð²',\n      url: 'https://wordwall.net/embed/110f5ab8bba8415eadefd09fb52c4e87?themeId=65&templateId=30&fontStackId=12',\n    },\n  ],\n  'custom-no5-a3c6ccb2': [\n    {\n      id: 'cd69f6a25d164b098c91cb9f50c307ee',\n      themeId: '65',\n      templateId: '30',\n      fontStackId: '12',\n      title: 'Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð° Ð´Ð»Ñ Ð¾ÑÐ¾Ð±Ð¾Ð²Ð¸Ñ… Ð·Ð°Ð¹Ð¼ÐµÐ½Ð½Ð¸ÐºÑ–Ð²',\n      url: 'https://wordwall.net/embed/cd69f6a25d164b098c91cb9f50c307ee?themeId=65&templateId=30&fontStackId=0',\n    },\n  ],\n  'custom-no6-da70b690': [],\n  'custom-no7-43000f0c': [],\n  'custom-no8-846a8d9e': [],\n  'custom-no9-cf6e6bee': [],\n  'custom-no10-28500f64': [],\n  'custom-no11-d8d86e31': [],\n  'custom-no12-93e53fe8': [],\n  'custom-no13-f4bcb910': [],\n  'custom-no14-40fdaa86': [],\n  'custom-no15-ef51a27e': [],\n  'custom-no16-e3b3d783': [],\n  'custom-no17-6337b1c4': [],\n  'custom-no18-b8435532': [],\n  'custom-no19-8d87b15e': [],\n  'custom-no20-06a86866': [],\n  'custom-no21-670eb82c': [],\n  'custom-no22-2073a55b': [],\n  'custom-no23-21e7300b': [],\n  'custom-no24-29c54cf7': [],\n  'custom-no25-796a6730': [],\n  'custom-no26-9b5f1ffc': [],\n  'custom-no27-6487572a': [],\n  'custom-no28-7f7a2815': [],\n  'custom-no29-9710e19a': [],\n  'custom-no30-b72e7840': [],\n  'custom-no31-2b6f7bda': [],\n  'custom-no32-deb561b3': [],\n  'custom-no33-9a2f527a': [],\n  'custom-no34-5b2c8e22': [],\n  'custom-no35-a6a8ac33': [],\n  'custom-no36-6a082f08': [],\n  'custom-no37-faa9b7b8': [],\n  'custom-no38-5206027c': [],\n  'custom-no39-6b35cfd3': [],\n  'custom-no40-4927837a': [],\n  'custom-no41-7ba1db93': [],\n  'custom-no42-29b5bb10': [],\n  'custom-no43-7ecfedc0': [],\n  'custom-no44-0e8b8ebd': [],\n  'custom-no45-310fbeb4': [],\n  'custom-no46-ccb1de5a': [],\n  'custom-no47-d6148758': [],\n  'custom-no48-3e5720c9': [],\n  'custom-no49-f759cafd': [],\n  'custom-no50-23930ae8': [],\n};\n\nfunction buildBaseUrl(config) {\n  if (!config) return null;\n  if (config.url) return String(config.url);\n  if (config.id) {\n    return `https://wordwall.net/embed/${String(config.id).trim()}`;\n  }\n  return null;\n}\n\nexport function buildWordwallUrl(config) {\n  const baseUrl = buildBaseUrl(config);\n  if (!baseUrl) return null;\n  const params = new URLSearchParams();\n  const themeId = config.themeId ?? DEFAULT_THEME_ID;\n  const templateId = config.templateId ?? DEFAULT_TEMPLATE_ID;\n  const fontStackId = config.fontStackId ?? DEFAULT_FONT_STACK_ID;\n\n  if (themeId != null) params.set('themeId', String(themeId));\n  if (templateId != null) params.set('templateId', String(templateId));\n  if (fontStackId != null) params.set('fontStackId', String(fontStackId));\n\n  const query = params.toString();\n  return query ? `${baseUrl}?${query}` : baseUrl;\n}\n\nexport function createWordwallIframe(config) {\n  const src = buildWordwallUrl(config);\n  if (!src) return null;\n\n  const iframe = document.createElement('iframe');\n  iframe.className = 'lesson-wordwall__iframe';\n  iframe.src = src;\n  iframe.width = String(config.width ?? 1000);\n  iframe.height = String(config.height ?? 760);\n  iframe.setAttribute('frameborder', '0');\n  iframe.setAttribute('allowfullscreen', 'true');\n  iframe.setAttribute('loading', 'lazy');\n  iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');\n  if (config.title) {\n    iframe.setAttribute('title', config.title);\n  }\n\n  return iframe;\n}\n\nexport function getWordwallConfigsForLesson(lessonId) {\n  if (!lessonId) return [];\n  const entries = lessonWordwalls[lessonId];\n  if (!Array.isArray(entries)) return [];\n  return entries\n    .map(entry => ({ ...entry }))\n    .filter(entry => Boolean(buildWordwallUrl(entry)));\n}\n\n/* \n<iframe style=\"max-width:100%\" src=\"https://wordwall.net/embed/cd69f6a25d164b098c91cb9f50c307ee?themeId=65&templateId=30&fontStackId=0\" width=\"500\" height=\"380\" frameborder=\"0\" allowfullscreen></iframe>\n<iframe style=\"max-width:100%\" src=\"https://wordwall.net/embed/cd69f6a25d164b098c91cb9f50c307ee?themeId=65&templateId=30&fontStackId=0\" width=\"500\" height=\"380\" frameborder=\"0\" allowfullscreen></iframe>\n<iframe style=\"max-width:100%\" src=\"https://wordwall.net/embed/4ccd2571348045fa98270675605b2dd2?themeId=65&templateId=30&fontStackId=0\" width=\"500\" height=\"380\" frameborder=\"0\" allowfullscreen></iframe>\n*/\n","function getVoicesReady() {\n  return new Promise(resolve => {\n    const voices = speechSynthesis.getVoices();\n    if (voices.length) return resolve(voices);\n    speechSynthesis.onvoiceschanged = () =>\n      resolve(speechSynthesis.getVoices());\n  });\n}\n\nexport async function speakText(\n  text,\n  { lang = 'en-EN', voiceName, rate = 1, pitch = 1, volume = 1 } = {}\n) {\n  await getVoicesReady();\n  const utter = new SpeechSynthesisUtterance(text);\n  const voices = speechSynthesis.getVoices();\n\n  // ÐžÐ±Ñ€Ð°Ñ‚Ð¸ Ð³Ð¾Ð»Ð¾Ñ Ð¿Ñ–Ð´ Ð¼Ð¾Ð²Ñƒ Ð°Ð±Ð¾ Ð·Ð° Ð½Ð°Ð·Ð²Ð¾ÑŽ\n  let voice = voices.find(v =>\n    voiceName\n      ? v.name === voiceName\n      : v.lang.toLowerCase().startsWith(lang.toLowerCase())\n  );\n  if (!voice) voice = voices.find(v => v.lang.startsWith('en')) || voices[0]; // Ñ„Ð¾Ð»Ð±ÐµÐº\n  utter.voice = voice;\n\n  utter.lang = voice?.lang || lang;\n  utter.rate = rate;\n  utter.pitch = pitch;\n  utter.volume = volume;\n\n  speechSynthesis.cancel(); // ÑÐºÐ¸Ð½ÐµÐ¼Ð¾ Ð¿Ð¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ– Ñ‡ÐµÑ€Ð³Ð¸\n  speechSynthesis.speak(utter);\n}\n\nexport function createPlayBtn(text) {\n  const playBtn = document.createElement('span');\n  playBtn.textContent = 'ðŸ”Š';\n  playBtn.addEventListener('click', () => {\n    speakText(text);\n  });\n  playBtn.classList.add('play-speak-btn');\n  return playBtn;\n}\n","import { lessons, lessonCategories } from '@data/lessons.js';\nimport { customLessonPresets } from '@data/custom-lesson-presets.js';\nimport { loadCustomLessons } from '@features/custom-lessons/custom-lessons-store.js';\nimport { communicationWords } from '@data/communication-words.js';\nimport { renderTopicSender } from '@features/lesson/send-lesson';\nimport {\n  createWordwallIframe,\n  getWordwallConfigsForLesson,\n} from '@data/wordwall.js';\nimport { createPlayBtn } from '@features/helpers/speaker';\n\nconst basePath =\n  (typeof import.meta !== 'undefined' &&\n    import.meta.env &&\n    import.meta.env.BASE_URL) ||\n  '/';\n\nfunction resolveAssetPath(path) {\n  const normalizedBase = basePath.endsWith('/') ? basePath : `${basePath}/`;\n  const rawPath = String(path || '');\n  if (rawPath.startsWith(normalizedBase)) return rawPath;\n  return `${normalizedBase}${rawPath.replace(/^\\/+/, '')}`;\n}\n\nconst params = new URLSearchParams(window.location.search);\nconst normaliseCategoryParam = value => value;\nconst topicId = params.get('topic');\nconst customLessonId = params.get('custom');\nconst fallbackTitle = params.get('title');\nconst fallbackCategory = normaliseCategoryParam(params.get('category'));\nconst fallbackLevel = params.get('level');\nconst fallbackFile = params.get('file');\n\nconst lesson = topicId ? lessons.find(item => item.id === topicId) : undefined;\nconst customLesson = (() => {\n  if (!customLessonId) return null;\n  const candidates = [];\n  if (Array.isArray(customLessonPresets)) {\n    customLessonPresets.forEach(preset => {\n      if (!preset || typeof preset !== 'object') return;\n      const topicIds = Array.isArray(preset.topicIds)\n        ? [...preset.topicIds]\n        : [];\n      if (!preset.id || !topicIds.length) return;\n      candidates.push({\n        ...preset,\n        topicIds,\n        source: 'preset',\n      });\n    });\n  }\n  loadCustomLessons()\n    .filter(item => item && typeof item === 'object')\n    .forEach(item => {\n      const topicIds = Array.isArray(item.topicIds) ? [...item.topicIds] : [];\n      if (!item.id || !topicIds.length) return;\n      candidates.push({\n        ...item,\n        topicIds,\n        source: 'local',\n      });\n    });\n  return candidates.find(item => item.id === customLessonId) ?? null;\n})();\n\nconst isCustomLesson = Boolean(customLesson);\n\nconst resolvedTitle = (() => {\n  if (isCustomLesson) return customLesson.title;\n  if (lesson?.title) return lesson.title;\n  return fallbackTitle ? decodeURIComponent(fallbackTitle) : 'ÐœÐ°Ñ‚ÐµÑ€Ñ–Ð°Ð» ÑƒÑ€Ð¾ÐºÑƒ';\n})();\n\nconst resolvedCategory = (() => {\n  if (isCustomLesson) return 'custom';\n  if (lesson?.category) return lesson.category;\n  return fallbackCategory ? decodeURIComponent(fallbackCategory) : '';\n})();\n\nconst resolvedLevel = (() => {\n  if (isCustomLesson) {\n    if (customLesson.level) return customLesson.level;\n    const topics = (customLesson.topicIds || [])\n      .map(id => lessons.find(item => item.id === id))\n      .filter(Boolean);\n    const uniqueLevels = Array.from(\n      new Set(topics.map(item => item.level))\n    ).sort();\n    return uniqueLevels.join(', ');\n  }\n  if (lesson?.level) return lesson.level;\n  return fallbackLevel ? decodeURIComponent(fallbackLevel) : '';\n})();\n\nconst resolvedFile = (() => {\n  if (isCustomLesson) return null;\n  const candidate =\n    lesson?.htmlPath ??\n    (fallbackFile ? decodeURIComponent(fallbackFile) : null);\n  if (!candidate) return null;\n  return candidate.startsWith('lessons/') ? candidate : null;\n})();\n\nwindow.lessonContext = {\n  id: isCustomLesson ? customLesson.id : lesson?.id ?? topicId ?? null,\n  title: resolvedTitle,\n  category: resolvedCategory,\n  level: resolvedLevel,\n  htmlPath: resolvedFile,\n  source: isCustomLesson ? customLesson.source || 'custom' : 'catalog',\n  topicIds: isCustomLesson\n    ? [...(customLesson.topicIds || [])]\n    : lesson?.id\n    ? [lesson.id]\n    : topicId\n    ? [topicId]\n    : [],\n  isCustomLesson,\n};\n\nconst titleElement = document.querySelector('[data-lesson-title]');\nconst categoryElement = document.querySelector('[data-lesson-category]');\nconst levelElement = document.querySelector('[data-lesson-level]');\nconst statusElement = document.querySelector('[data-lesson-status]');\nconst contentElement = document.getElementById('lesson-content');\n\nfunction setCurrentYear() {\n  const yearEl = document.querySelector('[data-component=\"copyright-year\"]');\n  if (!yearEl) return;\n  yearEl.textContent = String(new Date().getFullYear());\n}\n\nfunction renderMeta() {\n  if (titleElement) titleElement.textContent = resolvedTitle;\n  const categoryLabel = (() => {\n    if (isCustomLesson) return 'ÐšÐ¾Ð¼Ð±Ñ–Ð½Ð¾Ð²Ð°Ð½Ð¸Ð¹ ÑƒÑ€Ð¾Ðº';\n    return lessonCategories[resolvedCategory]?.label ?? '';\n  })();\n  const categoryText = categoryLabel || resolvedCategory;\n  if (categoryElement) {\n    categoryElement.textContent = categoryText || '';\n  }\n  if (levelElement) {\n    levelElement.textContent = resolvedLevel ? `Ð Ñ–Ð²ÐµÐ½ÑŒ: ${resolvedLevel}` : '';\n  }\n  const practiceTitleElement = document.getElementById('practice-title');\n  if (practiceTitleElement) {\n    practiceTitleElement.textContent = resolvedTitle;\n  }\n  document.title = `${resolvedTitle} | English Teacher Platform`;\n}\n\nfunction makeTopicAnchorId(rawId) {\n  const sanitized =\n    String(rawId || '')\n      .trim()\n      .toLowerCase()\n      .replace(/[^a-z0-9_-]+/g, '-')\n      .replace(/^-+|-+$/g, '') || 'topic';\n  return `lesson-topic-${sanitized}`;\n}\n\nfunction createSummaryList(topics) {\n  if (!topics.length) return null;\n  const wrapper = document.createElement('section');\n  wrapper.className = 'lesson-custom-summary';\n\n  const heading = document.createElement('h2');\n  heading.textContent = 'Ð¡ÐºÐ»Ð°Ð´ ÑƒÑ€Ð¾ÐºÑƒ';\n  wrapper.appendChild(heading);\n\n  const list = document.createElement('ol');\n  list.className = 'lesson-custom-summary__list';\n\n  topics.forEach((topic, index) => {\n    const item = document.createElement('li');\n    item.className = 'lesson-custom-summary__item';\n    const categoryLabel =\n      lessonCategories[topic.category]?.label ?? topic.category;\n    const anchorId = makeTopicAnchorId(topic.id);\n    const link = document.createElement('a');\n    link.className = 'lesson-custom-summary__link';\n    link.href = `#${anchorId}`;\n    link.dataset.topicAnchor = anchorId;\n\n    const title = document.createElement('strong');\n    title.textContent = `${index + 1}. ${topic.title}`;\n    const meta = document.createElement('span');\n    meta.textContent = `${categoryLabel} Â· ${topic.level}`;\n\n    link.appendChild(title);\n    link.appendChild(meta);\n    link.addEventListener('click', event => {\n      const target = document.getElementById(anchorId);\n      if (!target) return;\n      event.preventDefault();\n      target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      requestAnimationFrame(() => {\n        try {\n          target.focus({ preventScroll: true });\n        } catch (error) {\n          target.focus();\n        }\n      });\n    });\n\n    item.appendChild(link);\n    list.appendChild(item);\n  });\n\n  wrapper.appendChild(list);\n  return wrapper;\n}\n\nasync function fetchPracticeDataForTopic(topic) {\n  if (!topic) return null;\n  const candidates = new Set();\n  if (topic.id) {\n    candidates.add(`data/practice/${topic.id}.json`);\n  }\n\n  if (topic.htmlPath) {\n    const normalized = String(topic.htmlPath)\n      .replace(/^\\.?\\/?/, '')\n      .replace(/\\.html?$/i, '');\n    if (normalized) {\n      candidates.add(`data/practice/${normalized}.json`);\n      const segments = normalized.split('/');\n      const last = segments[segments.length - 1];\n      if (last) {\n        candidates.add(`data/practice/${last}.json`);\n      }\n    }\n  }\n\n  for (const path of candidates) {\n    try {\n      const response = await fetch(resolveAssetPath(path), {\n        cache: 'no-store',\n      });\n      if (!response.ok) continue;\n      const payload = await response.json();\n      if (payload && Array.isArray(payload.tasks) && payload.tasks.length) {\n        return payload;\n      }\n    } catch (error) {\n      console.warn(`ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÑƒ Ð·Ð° ÑˆÐ»ÑÑ…Ð¾Ð¼ ${path}`, error);\n    }\n  }\n\n  return null;\n}\n\nfunction renderEmptyPracticeState(container) {\n  if (!container) return;\n  const note = document.createElement('p');\n  note.className = 'practice-inline__empty muted';\n  note.textContent = 'ÐŸÑ€Ð°ÐºÑ‚Ð¸ÐºÐ° Ð´Ð»Ñ Ñ†Ñ–Ñ”Ñ— Ñ‚ÐµÐ¼Ð¸ Ð¿Ð¾ÐºÐ¸ Ð²Ñ–Ð´ÑÑƒÑ‚Ð½Ñ.';\n  container.appendChild(note);\n}\n\nfunction createWordwallSection(lessonId) {\n  const configs = getWordwallConfigsForLesson(lessonId);\n  if (!configs.length) return null;\n\n  const section = document.createElement('section');\n  section.className = 'lesson-wordwall';\n\n  const heading = document.createElement('h2');\n  heading.className = 'lesson-wordwall__title';\n  heading.textContent = 'Wordwall';\n  section.appendChild(heading);\n\n  const itemsWrapper = document.createElement('div');\n  itemsWrapper.className = 'lesson-wordwall__items';\n  section.appendChild(itemsWrapper);\n\n  let hasEmbeds = false;\n\n  configs.forEach((config, index) => {\n    const iframe = createWordwallIframe({\n      ...config,\n      title: config.title || `Wordwall Ð²Ð¿Ñ€Ð°Ð²Ð° ${index + 1}`,\n    });\n    if (!iframe) return;\n    hasEmbeds = true;\n    itemsWrapper.appendChild(iframe);\n  });\n\n  if (!hasEmbeds) return null;\n\n  return section;\n}\n\nasync function renderCustomLesson() {\n  if (!contentElement) return;\n\n  const topics = (customLesson?.topicIds || [])\n    .map(id => lessons.find(item => item.id === id))\n    .filter(Boolean);\n\n  if (!topics.length) {\n    if (statusElement) {\n      statusElement.textContent =\n        'ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð½Ð°Ð¹Ñ‚Ð¸ Ð²Ð¸Ð±Ñ€Ð°Ð½Ñ– Ñ‚ÐµÐ¼Ð¸. Ð¡Ñ‚Ð²Ð¾Ñ€Ñ–Ñ‚ÑŒ ÑƒÑ€Ð¾Ðº Ð·Ð°Ð½Ð¾Ð²Ð¾.';\n    }\n    return;\n  }\n\n  contentElement.innerHTML = '';\n\n  if (customLesson?.description) {\n    const intro = document.createElement('p');\n    intro.className = 'lesson-custom-description';\n    intro.textContent = customLesson.description;\n    contentElement.appendChild(intro);\n  }\n\n  const categoryOrder = {\n    grammar: 0,\n    lexical: 1,\n  };\n\n  const orderedTopics = topics.slice().sort((a, b) => {\n    const orderA = categoryOrder[a.category] ?? 99;\n    const orderB = categoryOrder[b.category] ?? 99;\n    if (orderA !== orderB) return orderA - orderB;\n    return 0;\n  });\n\n  const summary = createSummaryList(orderedTopics);\n  if (summary) {\n    contentElement.appendChild(summary);\n  }\n\n  const wordwallSection = createWordwallSection(customLesson?.id ?? null);\n  if (wordwallSection) {\n    contentElement.appendChild(wordwallSection);\n  }\n\n  for (const topic of orderedTopics) {\n    const section = document.createElement('section');\n    section.className = 'lesson-topic';\n    section.dataset.topicId = topic.id;\n    const sectionAnchorId = makeTopicAnchorId(topic.id);\n    section.id = sectionAnchorId;\n    section.setAttribute('tabindex', '-1');\n\n    const header = document.createElement('header');\n    header.className = 'lesson-topic__header';\n\n    const title = document.createElement('h3');\n    title.className = 'lesson-topic__title';\n    title.textContent = topic.title;\n    header.appendChild(title);\n\n    const meta = document.createElement('p');\n    meta.className = 'lesson-topic__meta';\n    const categoryLabel =\n      lessonCategories[topic.category]?.label ?? topic.category;\n    meta.textContent = `${categoryLabel} Â· Ð Ñ–Ð²ÐµÐ½ÑŒ ${topic.level}`;\n    header.appendChild(meta);\n\n    section.appendChild(header);\n\n    const body = document.createElement('div');\n    body.className = 'lesson-topic__body';\n    section.appendChild(body);\n\n    contentElement.appendChild(section);\n\n    try {\n      const response = await fetch(resolveAssetPath(topic.htmlPath));\n      if (!response.ok) {\n        throw new Error(`ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ñ„Ð°Ð¹Ð»: ${response.status}`);\n      }\n      const markup = await response.text();\n      body.innerHTML = markup;\n    } catch (error) {\n      body.innerHTML =\n        '<p class=\"lesson-topic__error\">ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ñ–Ð°Ð» Ñ†Ñ–Ñ”Ñ— Ñ‚ÐµÐ¼Ð¸.</p>';\n      console.error(error);\n    }\n\n    const practiceWrapper = document.createElement('div');\n    practiceWrapper.className = 'lesson-topic__practice';\n    section.appendChild(practiceWrapper);\n\n    try {\n      const practiceData = await fetchPracticeDataForTopic(topic);\n      if (\n        practiceData &&\n        Array.isArray(practiceData.tasks) &&\n        practiceData.tasks.length\n      ) {\n        const practiceApi = window.practice || {};\n        const heading = practiceData.title\n          ? `ÐŸÑ€Ð°ÐºÑ‚Ð¸ÐºÐ°: ${practiceData.title}`\n          : `ÐŸÑ€Ð°ÐºÑ‚Ð¸ÐºÐ°: ${topic.title}`;\n        const level = practiceData.level || topic.level || '';\n        if (typeof practiceApi.renderTaskList === 'function') {\n          practiceApi.renderTaskList(practiceWrapper, practiceData.tasks, {\n            title: heading,\n            level,\n            description: practiceData.description,\n            keyPrefix: `${topic.id}-practice`,\n          });\n        } else {\n          renderEmptyPracticeState(practiceWrapper);\n        }\n      } else {\n        renderEmptyPracticeState(practiceWrapper);\n      }\n    } catch (error) {\n      console.error('ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸', error);\n      renderEmptyPracticeState(practiceWrapper);\n    }\n  }\n\n  if (statusElement) {\n    statusElement.remove();\n  }\n\n  await hydrateCommunicationWords(contentElement);\n}\n\nasync function loadLesson() {\n  if (!contentElement) return;\n\n  if (isCustomLesson) {\n    await renderCustomLesson();\n    renderTopicSender();\n    return;\n  }\n\n  if (!resolvedFile) {\n    if (statusElement) {\n      statusElement.textContent =\n        'ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð²Ð¸Ð·Ð½Ð°Ñ‡Ð¸Ñ‚Ð¸ Ñ„Ð°Ð¹Ð» Ð· Ð¼Ð°Ñ‚ÐµÑ€Ñ–Ð°Ð»Ð¾Ð¼. ÐŸÐµÑ€ÐµÐ¹Ð´Ñ–Ñ‚ÑŒ Ð½Ð°Ð·Ð°Ð´ Ñ‚Ð° Ð¾Ð±ÐµÑ€Ñ–Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñƒ Ð·Ñ– ÑÐ¿Ð¸ÑÐºÑƒ.';\n    }\n    return;\n  }\n\n  try {\n    const response = await fetch(resolveAssetPath(resolvedFile));\n    if (!response.ok) {\n      throw new Error(`ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ñ„Ð°Ð¹Ð»: ${response.status}`);\n    }\n    const markup = await response.text();\n    contentElement.innerHTML = '';\n\n    const wordwallSection = createWordwallSection(lesson?.id ?? null);\n    if (wordwallSection) {\n      contentElement.appendChild(wordwallSection);\n    }\n\n    const template = document.createElement('template');\n    template.innerHTML = markup;\n    contentElement.appendChild(template.content);\n    renderTopicSender();\n    await hydrateCommunicationWords(contentElement);\n  } catch (error) {\n    if (statusElement) {\n      statusElement.textContent =\n        'Ð¡Ñ‚Ð°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ° Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ Ð¼Ð°Ñ‚ÐµÑ€Ñ–Ð°Ð»Ñƒ. Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐµ Ð°Ð±Ð¾ Ð¿Ð¾Ð²ÐµÑ€Ð½Ñ–Ñ‚ÑŒÑÑ Ð´Ð¾ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ñƒ.';\n    }\n    console.error(error);\n  }\n}\n\nfunction normaliseCommunicationKey(value) {\n  return String(value || '')\n    .trim()\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n}\n\nconst communicationWordKeyIndex = (() => {\n  const keys = Object.keys(communicationWords || {});\n  return keys.map(key => ({\n    key,\n    normalized: normaliseCommunicationKey(key),\n  }));\n})();\n\nconst communicationWordNormalizedMap = (() => {\n  const map = new Map();\n  communicationWordKeyIndex.forEach(entry => {\n    if (entry.normalized && !map.has(entry.normalized)) {\n      map.set(entry.normalized, entry.key);\n    }\n  });\n  return map;\n})();\n\nfunction findCommunicationWordsKey(rawValue) {\n  if (typeof rawValue !== 'string') return null;\n  const directKey = Object.prototype.hasOwnProperty.call(\n    communicationWords,\n    rawValue\n  )\n    ? rawValue\n    : null;\n  if (directKey) return directKey;\n\n  const normalizedCandidate = normaliseCommunicationKey(rawValue);\n  if (!normalizedCandidate) return null;\n\n  if (communicationWordNormalizedMap.has(normalizedCandidate)) {\n    return communicationWordNormalizedMap.get(normalizedCandidate);\n  }\n\n  const partial = communicationWordKeyIndex.find(entry =>\n    entry.normalized.includes(normalizedCandidate)\n  );\n  if (partial) return partial.key;\n\n  const reversePartial = communicationWordKeyIndex.find(entry =>\n    normalizedCandidate.includes(entry.normalized)\n  );\n  if (reversePartial) return reversePartial.key;\n\n  return null;\n}\n\nfunction resolveCommunicationTopic(container) {\n  if (!container) return null;\n\n  const candidates = [];\n  const appendCandidate = value => {\n    if (!value) return;\n    const candidate = String(value).trim();\n    if (!candidate) return;\n    candidates.push(candidate);\n  };\n\n  const preferredDatasetKeys = [\n    'communicationTopic',\n    'topic',\n    'topicId',\n    'module',\n    'communicationModule',\n  ];\n\n  preferredDatasetKeys.forEach(key => {\n    if (container.dataset?.[key]) {\n      appendCandidate(container.dataset[key]);\n    }\n  });\n\n  const ancestor = container.closest(\n    '[data-communication-topic],[data-topic],[data-topic-id],[data-module],[data-communication-module]'\n  );\n  if (ancestor && ancestor !== container) {\n    preferredDatasetKeys.forEach(key => {\n      if (ancestor.dataset?.[key]) {\n        appendCandidate(ancestor.dataset[key]);\n      }\n    });\n  }\n\n  if (container.id) {\n    appendCandidate(container.id);\n  }\n\n  const context = window.lessonContext || {};\n  appendCandidate(context.id);\n  appendCandidate(context.topicId);\n  if (Array.isArray(context.topicIds)) {\n    context.topicIds.forEach(appendCandidate);\n  }\n\n  const seen = new Set();\n  for (const candidate of candidates) {\n    if (seen.has(candidate)) continue;\n    seen.add(candidate);\n    const matchedKey = findCommunicationWordsKey(candidate);\n    if (matchedKey) return matchedKey;\n  }\n\n  return null;\n}\n\nfunction renderCommunicationTable(container, entries) {\n  if (!container) return;\n  const words = Array.isArray(entries) ? entries : [];\n  if (!words.length) return;\n\n  container.classList.add('communication__table');\n\n  const table = document.createElement('table');\n\n  const thead = document.createElement('thead');\n  const headRow = document.createElement('tr');\n  ['Ð¡Ð»Ð¾Ð²Ð¾', 'Ð¢Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ñ–Ñ', 'ÐŸÐµÑ€ÐµÐºÐ»Ð°Ð´', 'ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´'].forEach(label => {\n    const th = document.createElement('th');\n    th.textContent = label;\n    headRow.appendChild(th);\n  });\n  thead.appendChild(headRow);\n\n  const tbody = document.createElement('tbody');\n  words.forEach(item => {\n    if (!item) return;\n    const row = document.createElement('tr');\n\n    const wordCell = document.createElement('td');\n    wordCell.innerHTML = `<p>${item.word}</p>`;\n    const playBtn = createPlayBtn(item.word);\n    wordCell.append(playBtn);\n\n    wordCell.classList.add('inline-cell');\n    wordCell.addEventListener('click', () => speakText(item.word));\n\n    const transcriptionCell = document.createElement('td');\n    transcriptionCell.textContent = item.transcription || '';\n\n    const translationCell = document.createElement('td');\n    translationCell.textContent = item.translation || '';\n\n    const exampleCell = document.createElement('td');\n    exampleCell.textContent = item.example || item.sentence || '';\n\n    row.appendChild(wordCell);\n    row.appendChild(transcriptionCell);\n    row.appendChild(translationCell);\n    row.appendChild(exampleCell);\n    tbody.appendChild(row);\n  });\n\n  table.appendChild(thead);\n  table.appendChild(tbody);\n\n  container.innerHTML = '';\n  container.appendChild(table);\n}\n\nasync function hydrateCommunicationWords(root) {\n  if (!root) return;\n  const containers = Array.from(\n    root.querySelectorAll('[data-communication-words]')\n  );\n  if (!containers.length) return;\n\n  containers.forEach(container => {\n    const topicKey = resolveCommunicationTopic(container);\n    if (!topicKey) return;\n    const entries = communicationWords[topicKey] || [];\n    if (!entries.length) return;\n    renderCommunicationTable(container, entries);\n  });\n}\n\nfunction init() {\n  setCurrentYear();\n  renderMeta();\n  loadLesson();\n}\n\ninit();\n","// tasksGenerator.js\n\n// ---- HTTP wrapper -----------------------------------------------------------\nexport const getAnswer = async body => {\n  const BASE_URL = 'https://vq1wtq2d2l.execute-api.us-east-2.amazonaws.com/dev';\n  // const BASE_URL = \"http://localhost:3000/dev\";\n  const url = BASE_URL + '/openai';\n\n  const response = await fetch(url, {\n    method: 'POST',\n    body: JSON.stringify(body),\n    headers: { 'Content-Type': 'application/json' },\n  }).then(res => res.json());\n\n  return response; // your endpoint returns a JSON string -> we'll JSON.parse later\n};\n\n// ---- Public API -------------------------------------------------------------\n/**\n * Ð“ÐµÐ½ÐµÑ€ÑƒÑ” Ð¾Ð´Ð¸Ð½ Ð±Ð»Ð¾Ðº Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð¿Ñ–Ð´ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¸Ð¹ typeQuestion (mcq/gap/...)\n * @param {string} topic - Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´: \"Present Simple\"\n * @param {string} typeQuestion - Ð¾Ð´Ð¸Ð½ Ð·: mcq, gap, transform, match, error, order, short, open, writing, roleplay, context, dialogue-gap, dialogue-order, truefalse, definition-match, synonym-clue, scramble, wordpairs, odd-one-out\n * @param {object} opts - { language: 'en', items: 10, seedId: 'ps' } etc.\n * @param {Array<object>} vocabulary - Ð¾Ð¿Ñ†Ñ–Ð¹Ð½Ð¸Ð¹ Ð¼Ð°ÑÐ¸Ð² ÑÐ»Ñ–Ð² Ð´Ð»Ñ Ñ„Ð¾ÐºÑƒÑÑƒÐ²Ð°Ð½Ð½Ñ ({ word, translation, example })\n * @returns {Promise<object>} JSON Ð±Ð»Ð¾ÐºÑƒ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ\n */\nexport const generateTask = async (topic, typeQuestion, opts = {}, vocabulary = []) => {\n  const promptBody = buildBody(topic, typeQuestion, opts, vocabulary);\n  const raw = await getAnswer(promptBody);\n\n  // API Ð·Ð°Ð·Ð²Ð¸Ñ‡Ð°Ð¹ Ð¿Ð¾Ð²ÐµÑ€Ñ‚Ð°Ñ” ÑÑ‚Ñ€Ð¾ÐºÑƒ JSON -> Ð¿Ð°Ñ€ÑÐ¸Ð¼Ð¾.\n  // Ð¯ÐºÑ‰Ð¾ Ð²Ð¶Ðµ Ð¾Ð±'Ñ”ÐºÑ‚ â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾Ð²ÐµÑ€Ð½ÐµÐ¼Ð¾ ÑÐº Ñ”.\n  try {\n    if (typeof raw === 'string') return JSON.parse(raw);\n    return raw;\n  } catch (e) {\n    // ÐÐ° Ð²Ð¸Ð¿Ð°Ð´Ð¾Ðº ÑÐºÑ‰Ð¾ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð²Ð¸Ð²ÐµÐ»Ð° Ñ‰Ð¾ÑÑŒ Ð·Ð°Ð¹Ð²Ðµ â€” ÑÐ¿Ñ€Ð¾Ð±Ð° Ð²Ð¸Ñ‚ÑÐ³Ð½ÑƒÑ‚Ð¸ JSON Ñ‡ÐµÑ€ÐµÐ· regex\n    const jsonMatch =\n      typeof raw === 'string' ? raw.match(/\\{[\\s\\S]*\\}$/) : null;\n    if (jsonMatch) return JSON.parse(jsonMatch[0]);\n    throw new Error('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ñ€Ð¾Ð·Ð¿Ð°Ñ€ÑÐ¸Ñ‚Ð¸ JSON Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ñ– Ð¼Ð¾Ð´ÐµÐ»Ñ–');\n  }\n};\n\n/**\n * Ð“ÐµÐ½ÐµÑ€ÑƒÑ” HTML-Ñ€Ð¾Ð·Ð¼Ñ–Ñ‚ÐºÑƒ Ñ‚ÐµÐ¾Ñ€ÐµÑ‚Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð¼Ð°Ñ‚ÐµÑ€Ñ–Ð°Ð»Ñƒ (Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ– Ð· Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼Ð¸ Ñ‚Ð° Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´Ð°Ð¼Ð¸)\n * @param {string} topic - Ð½Ð°Ð·Ð²Ð° Ñ‚ÐµÐ¼Ð¸ (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´: \"Present Simple\")\n * @param {object} opts - { language: 'uk' | 'en' }\n * @returns {Promise<string>} HTML-Ñ„Ñ€Ð°Ð³Ð¼ÐµÐ½Ñ‚ Ð· <table> Ð±Ð»Ð¾ÐºÐ°Ð¼Ð¸\n */\nexport const generateTheory = async (topic, opts = {}) => {\n  const body = buildTheoryBody(topic, opts);\n  const raw = await getAnswer(body);\n  // ÐžÑ‡Ñ–ÐºÑƒÑ”Ð¼Ð¾ Ñ‡Ð¸ÑÑ‚Ð¸Ð¹ HTML-Ñ„Ñ€Ð°Ð³Ð¼ÐµÐ½Ñ‚ (Ñ€ÑÐ´Ð¾Ðº). Ð¯ÐºÑ‰Ð¾ Ð¾Ð±'Ñ”ÐºÑ‚ â€” Ð´Ñ–ÑÑ‚Ð°Ð½ÐµÐ¼Ð¾ content\n  if (typeof raw === 'string') return raw;\n  if (raw && typeof raw.content === 'string') return raw.content;\n  // Ð¡Ð¿Ñ€Ð¾Ð±Ð° Ð²Ð¸Ð´Ð¾Ð±ÑƒÑ‚Ð¸ HTML Ð¼Ñ–Ð¶ Ð¿ÐµÑ€ÑˆÐ¸Ð¼Ð¸ <table ...> ... (Ð½Ð° Ð²Ð¸Ð¿Ð°Ð´Ð¾Ðº Ð·Ð°Ð¹Ð²Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ñƒ)\n  const m = String(raw || '').match(/<table[\\s\\S]*<\\/table>/i);\n  if (m) return m[0];\n  throw new Error('Ð’Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÑŒ Ð½Ðµ Ð¼Ñ–ÑÑ‚Ð¸Ñ‚ÑŒ HTML');\n};\n\n// ---- Prompt builder ---------------------------------------------------------\nfunction buildBody(topic, typeQuestion, opts = {}, vocabulary = []) {\n  const token = localStorage.getItem('gptToken');\n  if (!token || token?.length < 10) {\n    console.warn('âš ï¸ gptToken Ð²Ñ–Ð´ÑÑƒÑ‚Ð½Ñ–Ð¹ Ñƒ localStorage');\n    const token = prompt('Enter Your GPT Token');\n    localStorage.setItem('gptToken', token);\n  }\n\n  const model = 'gpt-4o-mini';\n  const normalizedType = String(typeQuestion || '')\n    .trim()\n    .toLowerCase();\n\n  const { system, user } = makeMessages(topic, normalizedType, opts);\n  const userWithVocabulary = appendVocabularyToPrompt(user, vocabulary);\n\n  return {\n    token,\n    model,\n    messages: [\n      { role: 'system', content: system },\n      { role: 'user', content: userWithVocabulary },\n    ],\n    temperature: 0.3,\n    max_tokens: 4000,\n  };\n}\n\nfunction buildTheoryBody(topic, opts = {}) {\n  let token = localStorage.getItem('gptToken');\n  if (!token || token?.length < 10) {\n    console.warn('âš ï¸ gptToken Ð²Ñ–Ð´ÑÑƒÑ‚Ð½Ñ–Ð¹ Ñƒ localStorage');\n    token = prompt('Enter Your GPT Token');\n    if (token) localStorage.setItem('gptToken', token);\n  }\n  const model = 'gpt-4o-mini';\n  const lang = (opts.language || 'uk').toLowerCase();\n\n  const system = `You are an ESL (English as a Second Language) content generator.  \nCreate a **detailed study guide in HTML tables** for the following grammar/vocabulary topic:\n\nTOPIC: ${topic}\nLEVEL: A1-C2\nLANGUAGE OF EXPLANATION: English\nACCENT_COLOR: #00837f\n\nREQUIREMENTS:\n1. Output only valid HTML <table> structures (border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:100%\").  \n2. Use clear headers inside tables with <span style=\"color: #00837f\"><strong>â€¦</strong></span>.  \n3. Highlight key grammar points in <strong>bold</strong>.  \n4. Use examples in simple everyday vocabulary, 1â€“2 per point.  \n5. You may generate ANY number of tables depending on how much detail the topic requires.  \n6. Tables should cover different aspects such as:\n   - Forms (affirmative, negative, questions)  \n   - Usage (rules, functions, signal words, time markers)  \n   - Common mistakes (\"Use it right!\")  \n   - Exceptions/irregularities/special cases  \n   - Practical examples or mini-dialogues  \n   - Vocabulary lists (if relevant to the topic)  \n   - Comparison with similar grammar points (if relevant)  \n7. Make the content structured like a mini-textbook chapter:  \n   - Start with a table that introduces the main concept and its basic forms.  \n   - Add extra tables for usage, examples, pitfalls, exceptions, etc.  \n   - End with a summary/revision table.  \n8. Keep everything inside tables, do NOT output free text outside tables.  \n\nGOAL:\nProduce a **ready-to-use study guide** in HTML tables, so that learners can read it as a digital textbook.  \nBe as detailed as possible, but keep the language simple and level-appropriate.  `;\n\n  const user = `Generate the full HTML tables for topic: ${topic}.`;\n\n  return {\n    token,\n    model,\n    messages: [\n      { role: 'system', content: system },\n      { role: 'user', content: user },\n    ],\n    temperature: 0.4,\n    max_tokens: 16384,\n  };\n}\n\n// ---- Templates: system + user by task type ---------------------------------\n\n/**\n * ÐšÐ¾Ð¶ÐµÐ½ Ñ‚Ð¸Ð¿ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ð¼Ð°Ñ”:\n * - ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÑƒ Ñ–Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ñ–ÑŽ (Ñ‰Ð¾ Ð³ÐµÐ½ÐµÑ€ÑƒÑ”Ð¼Ð¾, ÑÐºÑ– Ð¿Ð¾Ð»Ñ)\n * - Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´ (few-shot) Ñƒ system\n * - ÑÑƒÐ²Ð¾Ñ€Ñ– Ð²Ð¸Ð¼Ð¾Ð³Ð¸: Ð»Ð¸ÑˆÐµ JSON, ÑƒÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°, Ð±ÐµÐ· ÐºÑ€Ð°Ð¿Ð¾Ðº Ñƒ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÑÑ… Ð´Ðµ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ñ‚Ð¾Ñ‰Ð¾\n */\nfunction makeMessages(topic, type, opts) {\n  const lang = opts.language || 'en';\n  const itemsCount = Number.isInteger(opts.items)\n    ? opts.items\n    : defaultItemsByType[type] || 10;\n  const seedId = opts.seedId || shortSeed(topic);\n\n  const commonRules = `\nYOU ARE an ESL task generator.\nGOAL: create ONE task block of type \"${type}\" on the topic \"${topic}\".\nOUTPUT ONLY VALID JSON. Keep the language level around A1â€“A2.\nAll prompts, questions, answers, hints, and labels must be written in ENGLISH.\nEncoding â€” UTF-8. No explanations, no prefixes, no code fences.\nEnsure internal consistency so answers match the task logic.\n`;\n\n  const templates = {\n    mcq: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"mcq-${seedId}-1\",\n  \"type\": \"mcq\",\n  \"prompt\": \"Choose the correct option.\",\n  \"items\": [\n    {\n      \"q\": \"<short question with one missing form>\",\n      \"choices\": [\"<option0>\", \"<option1>\", \"<option2>\"],\n      \"answer\": [\"<index_of_correct_choice_as_string>\"]\n    },\n    ...\n  ]\n}\n\nREQUIREMENTS:\n- ${itemsCount} items.\n- Follow the schema exactly.\n- Provide exactly 3 answer choices per question with a single correct one.\n- \"answer\" must be the index of the correct option as a string: \"0\" | \"1\" | \"2\".\n- Keep questions natural, concise, and on the topic \"${topic}\".\n- Return JSON only, no additional commentary.\n\nEXAMPLE (FORMAT ONLY; DO NOT COPY CONTENT):\n{\n  \"id\": \"mcq-ps-1\",\n  \"type\": \"mcq\",\n  \"prompt\": \"Choose the correct Present Simple form.\",\n  \"items\": [\n    { \"q\": \"He usually ___ the bus to work.\", \"choices\": [\"take\", \"takes\", \"is taking\"], \"answer\": [\"1\"] },\n    { \"q\": \"They ___ coffee in the morning.\", \"choices\": [\"have\", \"haves\", \"are having\"], \"answer\": [\"0\"] }\n  ]\n}\n      `.trim(),\n      user: `\nTopic: ${topic}\nGenerate a task block of type \"mcq\" strictly following the OUTPUT SCHEMA.\nNumber of items: ${itemsCount}.\n      `.trim(),\n    },\n\n    gap: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"gap-${seedId}-1\",\n  \"type\": \"gap\",\n  \"prompt\": \"Fill the gaps with the correct word.\",\n  \"items\": [\n    { \"q\": \"They ___ (work) on Sundays.\", \"answer\": [\"correct_form\", \"alternative_if_any\"] },\n    ...\n  ]\n}\nREQUIREMENTS:\n- ${itemsCount} sentences.\n- \"q\" must be a clean English sentence. Do NOT wrap it in angle brackets, quotes, or markdown â€” use only plain text with a single blank shown as ___ (three underscores).\n- \"answer\" must be an array with at least one valid solution in lowercase (no angle brackets).\n- Keep sentences short, level A1â€“A2, and connected to \"${topic}\".\n      `.trim(),\n      user: oneLineUser(topic, 'gap', itemsCount),\n    },\n\n    transform: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"transform-${seedId}-1\",\n  \"type\": \"transform\",\n  \"prompt\": \"Rewrite each sentence in the negative form (no final period).\",\n  \"items\": [\n    {\n      \"q\": \"She likes coffee.\",\n      \"hint\": \"use doesn't + base verb; no period\",\n      \"answer\": [\"she doesn't like coffee\", \"she does not like coffee\"]\n    }\n  ]\n}\nREQUIREMENTS:\n- ${itemsCount} items.\n- Answers must follow the prompt instructions (for example, omit the final period).\n- Provide a helpful English hint for each item.\n      `.trim(),\n      user: oneLineUser(topic, 'transform', itemsCount),\n    },\n\n    match: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"match-${seedId}-1\",\n  \"type\": \"match\",\n  \"prompt\": \"Match the base verb with the third person singular form (he/she/it).\",\n  \"pairs\": [\n    { \"left\": \"go\", \"right\": \"goes\" },\n    ...\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(12, itemsCount))} unique pairs.\n- Provide one clear correct match for each pair without duplicates.\n- Use vocabulary related to \"${topic}\".\n      `.trim(),\n      user: oneLineUser(topic, 'match', itemsCount),\n    },\n\n    error: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"error-${seedId}-1\",\n  \"type\": \"error\",\n  \"prompt\": \"Find and correct the mistake (Present Simple, no final period).\",\n  \"items\": [\n    { \"q\": \"She don't like tea.\", \"hint\": \"use doesn't + base verb\", \"answer\": [\"she doesn't like tea\", \"she does not like tea\"] }\n  ]\n}\nREQUIREMENTS:\n- ${itemsCount} sentences containing a typical error connected to \"${topic}\".\n- Provide clear English hints.\n- Match the formatting requested in the prompt (for example, omit the period).\n      `.trim(),\n      user: oneLineUser(topic, 'error', itemsCount),\n    },\n\n    order: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"order-${seedId}-1\",\n  \"type\": \"order\",\n  \"prompt\": \"Put the words in the correct order.\",\n  \"items\": [\n    { \"q\": \"Arrange the sentence\", \"tokens\": [\"she\", \"often\", \"reads\", \"books\"], \"answer\": \"she often reads books\" }\n  ]\n}\nREQUIREMENTS:\n- ${itemsCount} items.\n- Provide tokens that form exactly the correct answer (lowercase, no period unless required by the topic).\n- Use sentences relevant to \"${topic}\".\n      `.trim(),\n      user: oneLineUser(topic, 'order', itemsCount),\n    },\n\n    short: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"short-${seedId}-1\",\n  \"type\": \"short\",\n  \"prompt\": \"Write short answers about ${topic}.\",\n  \"items\": [\n    { \"q\": \"Write 2â€“3 sentences about your daily routine.\", \"keywords\": [\"i\", \"usually\", \"every\"] }\n  ]\n}\nREQUIREMENTS:\n- ${Math.min(\n        6,\n        Math.max(3, Math.floor(itemsCount / 2))\n      )} tasks that invite short written responses.\n- \"keywords\" act as guidance, not strict scoring rubrics, and must be lowercase English words.\n      `.trim(),\n      user: oneLineUser(topic, 'short', itemsCount),\n    },\n\n    open: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"open-${seedId}-1\",\n  \"type\": \"open\",\n  \"prompt\": \"<brief classroom instruction in English>\",\n  \"items\": [\n    { \"situation\": \"<open-ended question or scenario related to the topic>\" }\n  ],\n  \"scoring\": {\n    \"criteria\": [\n      \"<criterion 1>\",\n      \"<criterion 2>\",\n      \"<criterion 3>\"\n    ]\n  }\n}\nREQUIREMENTS:\n- ${Math.max(3, Math.min(10, itemsCount))} unique items that require free-form answers.\n- Keep each \"situation\" within 8â€“14 words, focused on real-life communication linked to \"${topic}\".\n- Maintain an A1â€“A2 learner level and avoid simple yes/no prompts.\n- Provide exactly 3 concise scoring criteria phrased for teachers (e.g., \"Use two past time expressions\").\n- Optionally add \"example_answers\" arrays (1â€“3 short samples) to model good responses.\n- Output JSON only with no surrounding commentary.\n      `.trim(),\n      user: oneLineUser(topic, 'open', itemsCount),\n    },\n\n    writing: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"writing-${seedId}-1\",\n  \"type\": \"writing\",\n  \"prompt\": \"Short writing task about ${topic}.\",\n  \"description\": \"<1â€“2 sentences describing the assignment>\",\n  \"checklist\": [\n    \"<criterion 1>\",\n    \"<criterion 2>\",\n    \"<criterion 3>\"\n  ]\n}\nREQUIREMENTS:\n- Provide a clear English description of the task.\n- Include 4â€“6 checklist items with concrete evaluation criteria.\n      `.trim(),\n      user: oneLineUser(topic, 'writing', itemsCount),\n    },\n    roleplay: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"roleplay-${seedId}-1\",\n  \"type\": \"roleplay\",\n  \"prompt\": \"<short instruction in English>\",\n  \"scenario\": {\n    \"setting\": \"<where the situation takes place>\",\n    \"summary\": \"<1â€“2 sentences describing the task>\",\n    \"roles\": [\n      {\n        \"name\": \"Student 1\",\n        \"goal\": \"<goal to achieve>\",\n        \"details\": \"<two facts or prompts>\"\n      },\n      {\n        \"name\": \"Student 2\",\n        \"goal\": \"<goal to achieve>\",\n        \"details\": \"<two facts or prompts>\"\n      }\n    ],\n    \"steps\": [\n      \"<step 1>\",\n      \"<step 2>\",\n      \"<step 3>\",\n      \"<step 4>\"\n    ]\n  },\n  \"phrases\": [\n    { \"phrase\": \"<useful English phrase>\", \"translation\": \"<short explanation or translation in English>\" }\n  ]\n}\nREQUIREMENTS:\n- The situation must clearly connect to the topic \"${topic}\".\n- Exactly two roles: Student 1 and Student 2.\n- Provide 3â€“5 steps describing how the dialogue should develop.\n- Include ${Math.max(6, Math.min(10, itemsCount))} useful English phrases with brief English explanations or synonyms.\n- Do not add bullet symbols inside the strings.\n      `.trim(),\n      user: oneLineUser(topic, 'roleplay', itemsCount),\n    },\n    'dialogue-gap': {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"dialogue-gap-${seedId}-1\",\n  \"type\": \"dialogue-gap\",\n  \"prompt\": \"Fill the blanks in the dialogue using the word bank.\",\n  \"words\": [\"<word1>\", \"<word2>\", \"<word3>\"],\n  \"dialogue\": [\n    { \"speaker\": \"Student 1\", \"line\": \"<Line with one or two ___ blanks>\" }\n  ],\n  \"answers\": [\"<correct word 1>\", \"<correct word 2>\"]\n}\nREQUIREMENTS:\n- ${Math.max(4, Math.min(8, itemsCount))} turns in the dialogue.\n- Use exactly ${Math.max(4, Math.min(8, itemsCount))} blanks \"___\" across the dialogue.\n- \"words\" must list one entry per blank (repeat words when a blank uses the same word) and contain no unused distractors.\n- \"answers\" must be the same length as \"words\", list the correct words in blank order, and use only lowercase English words present in \"words\".\n- Keep each line short (maximum 12 words) and on the topic \"${topic}\".\n- Do not add extra fields beyond the schema.\n      `.trim(),\n      user: oneLineUser(topic, 'dialogue-gap', itemsCount),\n    },\n    'dialogue-order': {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"dialogue-order-${seedId}-1\",\n  \"type\": \"dialogue-order\",\n  \"prompt\": \"Arrange the dialogue lines in the correct order.\",\n  \"lines\": [\n    { \"speaker\": \"Student 1\", \"line\": \"<Line>\" },\n    { \"speaker\": \"Student 2\", \"line\": \"<Line>\" }\n  ],\n  \"solution\": [1, 0]\n}\nREQUIREMENTS:\n- ${Math.max(4, Math.min(8, itemsCount))} total lines.\n- Each line must contain 6â€“12 words, sound natural, and stay on the topic \"${topic}\".\n- \"solution\" is an array of zero-based indices describing the correct order of the lines.\n- Do not add extra fields beyond the schema.\n      `.trim(),\n      user: oneLineUser(topic, 'dialogue-order', itemsCount),\n    },\n    truefalse: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"truefalse-${seedId}-1\",\n  \"type\": \"truefalse\",\n  \"prompt\": \"Decide if each statement is true or false.\",\n  \"items\": [\n    { \"statement\": \"<short statement>\", \"answer\": true }\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(12, itemsCount))} statements.\n- \"answer\" must be strictly true or false.\n- Use simple A1â€“A2 level sentences in English related to \"${topic}\".\n      `.trim(),\n      user: oneLineUser(topic, 'truefalse', itemsCount),\n    },\n    'definition-match': {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"definition-match-${seedId}-1\",\n  \"type\": \"definition-match\",\n  \"prompt\": \"Match the word with its definition.\",\n  \"pairs\": [\n    { \"left\": \"<word>\", \"right\": \"<short definition>\" }\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(10, itemsCount))} pairs.\n- \"left\" must be a single lowercase word without articles.\n- \"right\" must be one sentence of up to 14 words.\n- Use vocabulary connected to the topic \"${topic}\".\n      `.trim(),\n      user: oneLineUser(topic, 'definition-match', itemsCount),\n    },\n    'synonym-clue': {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"synonym-clue-${seedId}-1\",\n  \"type\": \"synonym-clue\",\n  \"prompt\": \"Choose the correct word based on the clue.\",\n  \"wordBank\": [\"<word1>\", \"<word2>\", \"<word3>\"],\n  \"items\": [\n    { \"clue\": \"<clue>\", \"answers\": [\"<correct word>\"] }\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(10, itemsCount))} items.\n- Provide a word bank of 6â€“8 lowercase English words that includes all correct answers.\n- \"answers\" may contain 1â€“2 acceptable synonyms, all in lowercase English.\n- Write concise clues; omit the final period if the clue is a fragment.\n      `.trim(),\n      user: oneLineUser(topic, 'synonym-clue', itemsCount),\n    },\n    scramble: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"scramble-${seedId}-1\",\n  \"type\": \"scramble\",\n  \"prompt\": \"Unscramble the word.\",\n  \"items\": [\n    { \"scrambled\": \"<jumbled letters>\", \"answers\": [\"<correct word>\"] }\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(10, itemsCount))} items.\n- \"scrambled\" must be a shuffled version of an English word from \"${topic}\".\n- \"answers\" may list 1â€“2 valid spellings in lowercase English.\n      `.trim(),\n      user: oneLineUser(topic, 'scramble', itemsCount),\n    },\n    wordpairs: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"wordpairs-${seedId}-1\",\n  \"type\": \"wordpairs\",\n  \"prompt\": \"Match the singular form to the plural form.\",\n  \"pairs\": [\n    { \"left\": \"<singular>\", \"right\": \"<plural>\" }\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(10, itemsCount))} pairs.\n- Use accurate singular/plural pairs relevant to \"${topic}\".\n- Do not add extra keys beyond the schema.\n      `.trim(),\n      user: oneLineUser(topic, 'wordpairs', itemsCount),\n    },\n    'odd-one-out': {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"odd-one-out-${seedId}-1\",\n  \"type\": \"odd-one-out\",\n  \"prompt\": \"Find the odd one out.\",\n  \"items\": [\n    { \"options\": [\"<word1>\", \"<word2>\", \"<word3>\", \"<word4>\"], \"answer\": \"2\", \"explanation\": \"<reason>\" }\n  ]\n}\nREQUIREMENTS:\n- ${Math.max(6, Math.min(10, itemsCount))} items.\n- Provide exactly 4 options per item.\n- \"answer\" must be the index of the odd item as a string (\"0\"â€“\"3\").\n- Include a brief English explanation (up to 10 words) for why the option is odd.\n- Only one option may be different; the rest must relate to \"${topic}\".\n      `.trim(),\n      user: oneLineUser(topic, 'odd-one-out', itemsCount),\n    },\n    context: {\n      system: `\n${commonRules}\nOUTPUT SCHEMA:\n{\n  \"id\": \"context-${seedId}-1\",\n  \"type\": \"context\",\n  \"prompt\": \"<instruction in English>\",\n  \"context\": {\n    \"title\": \"<2â€“4 words>\",\n    \"format\": \"dialog\" | \"narrative\",\n    \"body\": []\n  },\n  \"questions\": [\n    {\n      \"q\": \"<question>\",\n      \"choices\": [\"<option0>\", \"<option1>\", \"<option2>\"],\n      \"answer\": [\"<index_of_correct_choice_as_string>\"]\n    },\n    ...\n  ]\n}\n\nREQUIREMENTS:\n- Provide ${itemsCount} comprehension questions for the passage.\n- Keep the text within 200 words using simple A1 English connected to \"${topic}\".\n- If \"format\" is \"dialog\", use objects {\"speaker\": \"...\", \"line\": \"...\"}.\n- If \"format\" is \"narrative\", use an array of short paragraph strings.\n- Each question must offer exactly 3 choices and a single correct answer.\n- Return the index of the correct choice as a string (\"0\" | \"1\" | \"2\").\n- Output only JSON, no extra commentary.\n\nEXAMPLE (FORMAT ONLY; DO NOT COPY CONTENT):\n{\n  \"id\": \"context-ps-1\",\n  \"type\": \"context\",\n  \"prompt\": \"Read the dialogue and choose the correct answer.\",\n  \"context\": {\n    \"title\": \"Morning Chat\",\n    \"format\": \"dialog\",\n    \"body\": [\n      { \"speaker\": \"Emma\", \"line\": \"Hi, Leo! Are you ready for school?\" },\n      { \"speaker\": \"Leo\", \"line\": \"Yes, but I can't find my maths book.\" },\n      { \"speaker\": \"Emma\", \"line\": \"Check your bag again.\" }\n    ]\n  },\n  \"questions\": [\n    {\n      \"q\": \"What did Leo lose?\",\n      \"choices\": [\"Pencil case\", \"Math textbook\", \"English notebook\"],\n      \"answer\": [\"1\"]\n    }\n  ]\n}`.trim(),\n      user: oneLineUser(topic, 'context', itemsCount),\n    },\n  };\n\n  const baseTemplate = templates[type] || templates.mcq;\n  const extraInstructions =\n    (opts.additionalInstructions || opts.extraInstructions || '').trim();\n\n  if (!extraInstructions) {\n    return baseTemplate;\n  }\n\n  return {\n    system: baseTemplate.system,\n    user: `${baseTemplate.user}\\n\\nAdditional teacher instructions:\\n${extraInstructions}`,\n  };\n}\n\n// ---- Helpers ----------------------------------------------------------------\nconst defaultItemsByType = {\n  mcq: 10,\n  gap: 10,\n  transform: 10,\n  match: 8,\n  error: 10,\n  order: 10,\n  short: 3,\n  open: 4,\n  writing: 1,\n  roleplay: 8,\n  'dialogue-gap': 6,\n  'dialogue-order': 6,\n  truefalse: 8,\n  'definition-match': 8,\n  'synonym-clue': 8,\n  scramble: 8,\n  wordpairs: 8,\n  'odd-one-out': 8,\n  context: 4,\n};\n\nfunction oneLineUser(topic, type, itemsCount) {\n  return `Topic: ${topic}\\nGenerate a task block of type \"${type}\" with ${itemsCount} items. Return JSON only that follows the described schema.`;\n}\n\nfunction shortSeed(s) {\n  return (\n    String(s || 'task')\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '')\n      .slice(0, 6) || 'task'\n  );\n}\n\nfunction appendVocabularyToPrompt(userContent, vocabulary) {\n  const trimmed = String(userContent || '').trim();\n  const formattedList = formatVocabularyList(vocabulary);\n  if (!formattedList) return trimmed || userContent || '';\n  const base = trimmed || 'Generate the task block.';\n  return `${base}\n\nSTRICT VOCABULARY REQUIREMENTS (communication lesson):\n1. Treat the target expressions below as the ONLY lexical focus for the task. Every generated item and every correct answer must contain at least one of these expressions verbatim (you may adapt grammar but keep the core phrase).\n2. Do not introduce alternative key phrases or synonyms outside this list; supporting words like articles or pronouns are fine, but the highlighted expression must come from the list.\n3. When offering distractors or incorrect options, keep them realistic yet stay close to the topic; never invent brand-new key phrases outside the set.\n4. The Ukrainian translations are reference only â€“ the final task must remain fully in English.\n\nTarget vocabulary:\\n${formattedList}`;\n}\n\nfunction formatVocabularyList(list) {\n  if (!Array.isArray(list) || !list.length) return '';\n  const extractEnglishExample = (value) => {\n    if (!value) return '';\n    const dashIdx = value.indexOf(' â€” ');\n    const enDashIdx = value.indexOf(' â€“ ');\n    const hyphenIdx = value.indexOf(' - ');\n    const candidates = [dashIdx, enDashIdx, hyphenIdx].filter((idx) => idx >= 0);\n    const cutIndex = candidates.length ? Math.min(...candidates) : -1;\n    const result = cutIndex >= 0 ? value.slice(0, cutIndex) : value;\n    return result.trim();\n  };\n  const lines = list\n    .map((entry, index) => {\n      if (!entry) return '';\n      const word = entry.word || entry.term || entry.phrase || entry.text || `Item ${index + 1}`;\n      const translation = entry.translation || entry.meaning || entry.ua || entry.uk || '';\n      const rawExample = entry.example || entry.sentence || entry.usage || entry.sample || '';\n      const example = extractEnglishExample(rawExample);\n      let line = `${index + 1}. ${word}`;\n      if (translation) line += ` â€” ${translation}`;\n      if (example) line += ` (Example: ${example})`;\n      return line;\n    })\n    .filter(Boolean);\n  if (!lines.length) return '';\n  return lines.join('\\n');\n}\n","import { generateTask } from '@api/chatGpt.js';\n\nconst adminWrapper = document.querySelector('.js-practice-section');\nconst form = document.querySelector('[data-practice-generator]');\nconst statusElement = form?.querySelector('[data-practice-status]');\nconst outputWrapper = document.querySelector('[data-generator-output]');\nconst jsonElement = document.querySelector('[data-generator-json]');\nconst copyButton = document.querySelector('[data-generator-copy]');\nconst downloadButton = document.querySelector('[data-generator-download]');\nconst typesContainer = form?.querySelector('[data-types]');\nconst typesTrigger = form?.querySelector('[data-types-trigger]');\nconst typesPanel = form?.querySelector('[data-types-panel]');\nconst placeholder = document.querySelector('[data-practice-placeholder]');\n\nconst defaultContext = window.lessonContext || {};\n\nlet baseTitle = defaultContext.title || 'Generated Practice';\nlet baseLevel = defaultContext.level || 'custom';\nconst baseTasks = [];\nconst generatedTasks = [];\n\nfunction hideElement(element) {\n  if (!element) return;\n  element.classList.add('hidden');\n}\n\nfunction showElement(element) {\n  if (!element) return;\n  element.classList.remove('hidden');\n}\n\nfunction isElementHidden(element) {\n  return !element || element.classList.contains('hidden');\n}\n\nfunction isGeneratorHidden() {\n  return localStorage.getItem('hideGenerateSection') === 'true';\n}\n\nfunction applyGeneratorVisibility() {\n  if (isGeneratorHidden()) {\n    hideElement(adminWrapper);\n    hideElement(typesPanel);\n    hideElement(outputWrapper);\n    closeTypesPanel();\n  } else {\n    showElement(adminWrapper);\n    updateTypesTriggerLabel();\n    updateJsonPreview();\n  }\n}\n\nfunction createTaskKey(task) {\n  const base =\n    task && typeof task === 'object' && task.id\n      ? String(task.id)\n      : String(task?.type || 'task');\n  return `${base}-${Date.now()}-${Math.random().toString(16).slice(2, 8)}`;\n}\n\nfunction buildAggregatePayload() {\n  return {\n    title: baseTitle || defaultContext.title || 'Generated Practice',\n    level: baseLevel || defaultContext.level || 'custom',\n    tasks: [...baseTasks, ...generatedTasks].map(item => item.data),\n  };\n}\n\nfunction updateJsonPreview() {\n  if (!jsonElement) return;\n\n  if (isGeneratorHidden()) {\n    hideElement(outputWrapper);\n    return;\n  }\n\n  if (!baseTasks.length && !generatedTasks.length) {\n    jsonElement.textContent = '';\n    hideElement(outputWrapper);\n    if (copyButton) copyButton.disabled = true;\n    if (downloadButton) downloadButton.disabled = true;\n    return;\n  }\n\n  jsonElement.textContent = JSON.stringify(buildAggregatePayload(), null, 2);\n  showElement(outputWrapper);\n  if (copyButton) copyButton.disabled = false;\n  if (downloadButton) downloadButton.disabled = false;\n}\n\nfunction addGeneratedTask(task) {\n  const key = createTaskKey(task);\n  generatedTasks.push({ key, data: task });\n  updateJsonPreview();\n  return key;\n}\n\nfunction removeTask(key, task) {\n  const removeFrom = list => {\n    const index = list.findIndex(\n      item => (key && item.key === key) || item.data === task\n    );\n    if (index !== -1) {\n      list.splice(index, 1);\n      return true;\n    }\n    return false;\n  };\n\n  const removed = removeFrom(generatedTasks) || removeFrom(baseTasks);\n  if (removed) {\n    updateJsonPreview();\n  }\n}\n\nfunction setInitialTopic() {\n  if (!form) return;\n  const topicInput = form.querySelector('[name=\"topic\"]');\n  if (topicInput && !topicInput.value) {\n    const initialTopic = defaultContext.title || 'Lesson topic';\n    topicInput.value = initialTopic;\n  }\n}\n\nfunction setStatus(message, state = 'idle') {\n  if (!statusElement) return;\n  statusElement.textContent = message;\n  statusElement.dataset.state = state;\n}\n\nfunction slugify(value) {\n  return String(value || '')\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-+|-+$/g, '')\n    .slice(0, 8);\n}\n\nfunction toFileSlug(value) {\n  return String(value || '')\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n}\n\nfunction getTypeInputs() {\n  return Array.from(form.querySelectorAll('input[name=\"types\"]'));\n}\n\nfunction formatTypesLabel(inputs) {\n  const selected = inputs\n    .filter(input => input.checked)\n    .map(input => input.nextElementSibling?.textContent?.trim())\n    .filter(Boolean);\n\n  if (!selected.length) return 'ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ Ñ‚Ð¸Ð¿Ð¸';\n  if (selected.length <= 2) return selected.join(', ');\n  return `${selected.slice(0, 2).join(', ')} +${selected.length - 2}`;\n}\n\nfunction updateTypesTriggerLabel() {\n  if (!typesTrigger) return;\n  const inputs = getTypeInputs();\n  typesTrigger.textContent = formatTypesLabel(inputs);\n}\n\nfunction closeTypesPanel() {\n  if (!typesPanel || !typesTrigger) return;\n  if (!isElementHidden(typesPanel)) {\n    hideElement(typesPanel);\n    typesTrigger.setAttribute('aria-expanded', 'false');\n  }\n}\n\nfunction toggleTypesPanel() {\n  if (!typesPanel || !typesTrigger) return;\n  const willOpen = isElementHidden(typesPanel);\n  if (willOpen) {\n    showElement(typesPanel);\n    typesTrigger.setAttribute('aria-expanded', 'true');\n    const firstInput = typesPanel.querySelector('input[name=\"types\"]');\n    firstInput?.focus({ preventScroll: true });\n  } else {\n    closeTypesPanel();\n  }\n}\n\nfunction toggleGeneratorVisibility() {\n  const shouldHide = !isGeneratorHidden();\n  localStorage.setItem('hideGenerateSection', String(shouldHide));\n  applyGeneratorVisibility();\n  updateJsonPreview();\n}\n\nfunction clearPracticeEmptyState() {\n  const practiceRoot = document.getElementById('practice');\n  const body = practiceRoot?.querySelector('#practice-body');\n  if (placeholder) {\n    placeholder.remove();\n  }\n  if (body && body.children.length === 1) {\n    const first = body.firstElementChild;\n    if (first && /Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ° Ð¿Ð¾ÐºÐ¸ Ð²Ñ–Ð´ÑÑƒÑ‚Ð½Ñ/i.test(first.textContent || '')) {\n      first.remove();\n    }\n  }\n}\n\nfunction ensurePracticeHeader() {\n  const practiceRoot = document.getElementById('practice');\n  if (!practiceRoot) return;\n  const body = practiceRoot.querySelector('#practice-body');\n  if (body && !body.querySelector('.practice-dynamic-title')) {\n    const header = document.createElement('div');\n    header.className = 'practice-dynamic-title';\n    header.innerHTML = `\n      <h2>Ð—Ð³ÐµÐ½ÐµÑ€Ð¾Ð²Ð°Ð½Ñ– Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ</h2>\n      ${\n        defaultContext.level\n          ? `<p class=\"muted\">Ð Ñ–Ð²ÐµÐ½ÑŒ: ${defaultContext.level}</p>`\n          : ''\n      }\n    `;\n    body.prepend(header);\n  }\n}\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  if (!form) return;\n\n  const submitButton = form.querySelector('button[type=\"submit\"]');\n  const topicInput = form.querySelector('[name=\"topic\"]');\n  const countInput = form.querySelector('[name=\"count\"]');\n  const instructionsInput = form.querySelector('[name=\"instructions\"]');\n  const typeInputs = getTypeInputs();\n\n  const topic = topicInput?.value?.trim();\n  const count = Number.parseInt(countInput?.value || '10', 10) || 10;\n  const additionalInstructions = instructionsInput?.value?.trim() || '';\n  const selectedTypes = typeInputs\n    .filter(input => input.checked)\n    .map(input => input.value);\n\n  if (!topic) {\n    setStatus('Ð£ÐºÐ°Ð¶Ñ–Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñƒ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñ— Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ.', 'error');\n    topicInput?.focus();\n    return;\n  }\n\n  if (!selectedTypes.length && typeof closeTypesPanel === 'function') {\n    setStatus('ÐžÐ±ÐµÑ€Ñ–Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð½Ð°Ð¹Ð¼Ð½Ñ– Ð¾Ð´Ð¸Ð½ Ñ‚Ð¸Ð¿ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ.', 'error');\n    return;\n  }\n\n  const seedBase = slugify(topic) || 'task';\n  setStatus(`Ð“ÐµÐ½ÐµÑ€ÑƒÑ”Ð¼Ð¾ ${selectedTypes.length} Ñ‚Ð¸Ð¿(Ð¸) Ð·Ð°Ð²Ð´Ð°Ð½ÑŒâ€¦`, 'loading');\n  if (submitButton) {\n    submitButton.disabled = true;\n    submitButton.dataset.originalText =\n      submitButton.dataset.originalText || submitButton.textContent;\n    submitButton.textContent = 'Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ñ–Ñâ€¦';\n  }\n\n  const category = String(defaultContext.category || '').toLowerCase();\n  const vocabulary = undefined;\n\n  try {\n    const generationPromises = selectedTypes.map(type =>\n      generateTask(\n        topic,\n        type,\n        {\n          items: count,\n          language: 'en',\n          seedId: `${seedBase}-${type}`,\n          ...(additionalInstructions\n            ? { additionalInstructions }\n            : {}),\n        },\n        vocabulary,\n      ).then(task => ({ type, task }))\n    );\n\n    const settled = await Promise.allSettled(generationPromises);\n    const successful = settled\n      .map((result, index) =>\n        result.status === 'fulfilled'\n          ? { type: selectedTypes[index], task: result.value.task }\n          : null\n      )\n      .filter(Boolean);\n    const failed = settled\n      .map((result, index) =>\n        result.status === 'rejected' ? selectedTypes[index] : null\n      )\n      .filter(Boolean);\n\n    if (!successful.length) {\n      throw new Error('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð³ÐµÐ½ÐµÑ€ÑƒÐ²Ð°Ñ‚Ð¸ Ð¶Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ñƒ Ð·Ð°Ð²Ð´Ð°Ð½ÑŒ');\n    }\n\n    const appended = [];\n    successful.forEach(({ type, task }) => {\n      const normalizedTask = { ...task };\n      if (!normalizedTask.id) {\n        normalizedTask.id = `${type}-${seedBase}-${Date.now().toString(\n          36\n        )}${Math.random().toString(36).slice(2, 6)}`;\n      }\n      const key = addGeneratedTask(normalizedTask);\n      appended.push({ task: normalizedTask, key });\n    });\n\n    clearPracticeEmptyState();\n    if (window.practice && typeof window.practice.appendTask === 'function') {\n      ensurePracticeHeader();\n      appended.forEach(({ task: generatedTask, key }) => {\n        window.practice.appendTask(generatedTask, { key });\n      });\n    }\n\n    closeTypesPanel();\n\n    const successTypes = successful.map(({ type }) => type).join(', ');\n    if (failed.length) {\n      setStatus(\n        `Ð—Ð³ÐµÐ½ÐµÑ€Ð¾Ð²Ð°Ð½Ð¾: ${successTypes}. ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ¸: ${failed.join(', ')}`,\n        'success'\n      );\n    } else {\n      setStatus(\n        `Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! Ð”Ð¾Ð´Ð°Ð½Ð¾ ${successful.length} Ð±Ð»Ð¾Ðº(Ð¸): ${successTypes}.`,\n        'success'\n      );\n    }\n  } catch (error) {\n    console.error(error);\n    const message =\n      error instanceof Error && error.message\n        ? `ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ°: ${error.message}`\n        : 'ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð³ÐµÐ½ÐµÑ€ÑƒÐ²Ð°Ñ‚Ð¸ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ. ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð°Ð±Ð¾ ÑÐ¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ‰Ðµ Ñ€Ð°Ð·.';\n    setStatus(message, 'error');\n  } finally {\n    if (submitButton) {\n      const original =\n        submitButton.dataset.originalText || 'Ð—Ð³ÐµÐ½ÐµÑ€ÑƒÐ²Ð°Ñ‚Ð¸ Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ';\n      submitButton.disabled = false;\n      submitButton.textContent = original;\n    }\n  }\n}\n\nasync function handleCopy() {\n  if (!jsonElement) return;\n  const content = jsonElement.textContent;\n  if (!content) return;\n  try {\n    await navigator.clipboard.writeText(content);\n    setStatus('JSON ÑÐºÐ¾Ð¿Ñ–Ð¹Ð¾Ð²Ð°Ð½Ð¾ Ñƒ Ð±ÑƒÑ„ÐµÑ€.', 'success');\n  } catch (error) {\n    console.error(error);\n    setStatus('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ ÑÐºÐ¾Ð¿Ñ–ÑŽÐ²Ð°Ñ‚Ð¸ JSON. Ð¡Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð²Ñ€ÑƒÑ‡Ð½Ñƒ.', 'error');\n  }\n}\n\nfunction getDownloadFilename(payload) {\n  const base =\n    toFileSlug(defaultContext.id) ||\n    toFileSlug(payload.title) ||\n    toFileSlug(defaultContext.title) ||\n    'practice';\n  return `${base || 'practice'}.json`;\n}\n\nasync function handleDownload() {\n  const payload = buildAggregatePayload();\n  const content = JSON.stringify(payload, null, 2);\n  if (!content || content === '{}' || content === '[]') {\n    setStatus('ÐÐµÐ¼Ð°Ñ” Ð´Ð°Ð½Ð¸Ñ… Ð´Ð»Ñ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ.', 'error');\n    return;\n  }\n\n  try {\n    const blob = new Blob([content], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const anchor = document.createElement('a');\n    anchor.href = url;\n    anchor.download = getDownloadFilename(payload);\n    document.body.appendChild(anchor);\n    anchor.click();\n    document.body.removeChild(anchor);\n    URL.revokeObjectURL(url);\n    setStatus('Ð¤Ð°Ð¹Ð» Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð¾.', 'success');\n  } catch (error) {\n    console.error(error);\n    setStatus('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ Ñ„Ð°Ð¹Ð».', 'error');\n  }\n}\n\nfunction init() {\n  if (!form) return;\n  setInitialTopic();\n  form.addEventListener('submit', handleSubmit);\n  if (copyButton) {\n    copyButton.addEventListener('click', handleCopy);\n    copyButton.disabled = true;\n  }\n  if (downloadButton) {\n    downloadButton.addEventListener('click', handleDownload);\n    downloadButton.disabled = true;\n  }\n\n  if (typesTrigger && typesPanel && typesContainer) {\n    typesTrigger.setAttribute('aria-haspopup', 'true');\n    typesTrigger.setAttribute('aria-expanded', 'false');\n    typesTrigger.addEventListener('click', () => {\n      toggleTypesPanel();\n    });\n\n    const handlePointerDown = event => {\n      if (!typesContainer.contains(event.target)) {\n        closeTypesPanel();\n      }\n    };\n\n    document.addEventListener('pointerdown', handlePointerDown);\n\n    const handleFocusOut = event => {\n      const next = event.relatedTarget;\n      if (!next || !typesContainer.contains(next)) {\n        closeTypesPanel();\n      }\n    };\n\n    typesContainer.addEventListener('focusout', handleFocusOut);\n\n    document.addEventListener('keydown', event => {\n      if (event.key === 'Escape') {\n        closeTypesPanel();\n        typesTrigger.focus();\n      }\n    });\n\n    getTypeInputs().forEach(input => {\n      input.addEventListener('change', () => {\n        updateTypesTriggerLabel();\n      });\n    });\n    updateTypesTriggerLabel();\n\n    form.addEventListener('submit', () => {\n      closeTypesPanel();\n    });\n  }\n\n  document.addEventListener('practice:taskRemoved', event => {\n    const detail = event.detail || {};\n    removeTask(detail.key, detail.task);\n  });\n\n  document.addEventListener('practice:dataLoaded', event => {\n    const detail = event.detail;\n    baseTasks.length = 0;\n    if (detail && Array.isArray(detail.entries)) {\n      baseTitle = detail.title ?? baseTitle;\n      baseLevel = detail.level ?? baseLevel;\n      detail.entries.forEach(({ task, key }) => {\n        const entryKey = key || createTaskKey(task);\n        baseTasks.push({ key: entryKey, data: task });\n      });\n    } else if (detail && Array.isArray(detail.tasks)) {\n      baseTitle = detail.title ?? baseTitle;\n      baseLevel = detail.level ?? baseLevel;\n      detail.tasks.forEach(task => {\n        const entryKey =\n          task && task.id ? String(task.id) : createTaskKey(task);\n        baseTasks.push({ key: entryKey, data: task });\n      });\n    } else {\n      if (!detail) {\n        baseTitle = defaultContext.title || baseTitle;\n        baseLevel = defaultContext.level || baseLevel;\n      } else {\n        baseTitle = detail.title ?? baseTitle;\n        baseLevel = detail.level ?? baseLevel;\n      }\n    }\n    updateJsonPreview();\n    applyGeneratorVisibility();\n  });\n\n  applyGeneratorVisibility();\n  updateJsonPreview();\n\n  document.addEventListener('keydown', event => {\n    if (\n      event.code &&\n      event.code === 'KeyH' &&\n      event.ctrlKey &&\n      event.shiftKey\n    ) {\n      event.preventDefault();\n      toggleGeneratorVisibility();\n    }\n  });\n}\n\ninit();\n"],"names":["communicationWords","shareRegistry","hasSubscribedToAuth","ensureShareAvailabilitySubscription","auth","user","setShareAvailability","ensureRelativePosition","element","current","ensureShareControlsWrapper","target","existing","controls","attachShareToTopic","topic","header","shareButton","sharePanel","unregister","createShareControl","student","context","container","lessonId","heading","lessonName","el1","el2","homework","addHomework","cleanupDetachedTopics","entry","isSharePanelActive","closeActiveSharePanel","_a","renderTopicSender","DEFAULT_THEME_ID","DEFAULT_TEMPLATE_ID","DEFAULT_FONT_STACK_ID","lessonWordwalls","buildBaseUrl","config","buildWordwallUrl","baseUrl","params","themeId","templateId","fontStackId","query","createWordwallIframe","src","iframe","getWordwallConfigsForLesson","entries","getVoicesReady","resolve","voices","speakText","text","lang","voiceName","rate","pitch","volume","utter","voice","v","createPlayBtn","playBtn","basePath","__vite_import_meta_env__","resolveAssetPath","path","normalizedBase","rawPath","normaliseCategoryParam","value","topicId","customLessonId","fallbackTitle","fallbackCategory","fallbackLevel","fallbackFile","lesson","lessons","item","customLesson","candidates","customLessonPresets","preset","topicIds","loadCustomLessons","isCustomLesson","resolvedTitle","resolvedCategory","resolvedLevel","topics","id","resolvedFile","candidate","titleElement","categoryElement","levelElement","statusElement","contentElement","setCurrentYear","yearEl","renderMeta","categoryText","lessonCategories","practiceTitleElement","makeTopicAnchorId","rawId","createSummaryList","wrapper","list","index","categoryLabel","anchorId","link","title","meta","event","fetchPracticeDataForTopic","normalized","segments","last","response","payload","error","renderEmptyPracticeState","note","createWordwallSection","configs","section","itemsWrapper","hasEmbeds","renderCustomLesson","intro","categoryOrder","orderedTopics","a","b","orderA","orderB","summary","wordwallSection","sectionAnchorId","body","markup","practiceWrapper","practiceData","practiceApi","level","hydrateCommunicationWords","loadLesson","template","normaliseCommunicationKey","communicationWordKeyIndex","key","communicationWordNormalizedMap","map","findCommunicationWordsKey","rawValue","directKey","normalizedCandidate","partial","reversePartial","resolveCommunicationTopic","appendCandidate","preferredDatasetKeys","ancestor","seen","matchedKey","renderCommunicationTable","words","table","thead","headRow","label","th","tbody","row","wordCell","transcriptionCell","translationCell","exampleCell","root","containers","topicKey","init","getAnswer","url","res","generateTask","typeQuestion","opts","vocabulary","promptBody","buildBody","raw","jsonMatch","token","model","normalizedType","system","makeMessages","userWithVocabulary","appendVocabularyToPrompt","type","itemsCount","defaultItemsByType","seedId","shortSeed","commonRules","templates","oneLineUser","baseTemplate","extraInstructions","s","userContent","trimmed","formattedList","formatVocabularyList","extractEnglishExample","dashIdx","enDashIdx","hyphenIdx","idx","cutIndex","lines","word","translation","rawExample","example","line","adminWrapper","form","outputWrapper","jsonElement","copyButton","downloadButton","typesContainer","typesTrigger","typesPanel","placeholder","defaultContext","baseTitle","baseLevel","baseTasks","generatedTasks","hideElement","showElement","isElementHidden","isGeneratorHidden","applyGeneratorVisibility","closeTypesPanel","updateTypesTriggerLabel","updateJsonPreview","createTaskKey","task","buildAggregatePayload","addGeneratedTask","removeTask","removeFrom","setInitialTopic","topicInput","initialTopic","setStatus","message","state","slugify","toFileSlug","getTypeInputs","formatTypesLabel","inputs","selected","input","_b","toggleTypesPanel","firstInput","toggleGeneratorVisibility","shouldHide","clearPracticeEmptyState","practiceRoot","first","ensurePracticeHeader","handleSubmit","submitButton","countInput","instructionsInput","typeInputs","count","additionalInstructions","selectedTypes","seedBase","generationPromises","settled","successful","result","failed","appended","normalizedTask","generatedTask","successTypes","original","handleCopy","content","getDownloadFilename","handleDownload","blob","anchor","handlePointerDown","handleFocusOut","next","detail","entryKey"],"mappings":"+RAAO,MAAMA,GAAqB,CAChC,sBAAuB,CACrB,CACE,KAAM,QACN,YAAa,SACb,QAAS,0BACV,EACD,CACE,KAAM,KACN,YAAa,uBACb,QAAS,8BACV,EACD,CACE,KAAM,eACN,YAAa,gBACb,QAAS,0BACV,EACD,CACE,KAAM,iBACN,YAAa,cACb,QAAS,2BACV,EACD,CACE,KAAM,eACN,YAAa,iBACb,QAAS,iCACV,EACD,CACE,KAAM,mBACN,YAAa,wBACb,QAAS,4BACV,EACD,CACE,KAAM,eACN,YAAa,aACb,QAAS,wBACV,EACD,CACE,KAAM,mBACN,YAAa,0BACb,QAAS,4BACV,EACD,CACE,KAAM,gBACN,YAAa,qBACb,QAAS,kCACV,EACD,CACE,KAAM,eACN,YAAa,qBACb,QAAS,qCACV,EACD,CACE,KAAM,UACN,YAAa,eACb,QAAS,+BACV,EACD,CACE,KAAM,MACN,YAAa,QACb,QAAS,4BACV,EACD,CACE,KAAM,YACN,YAAa,cACb,QAAS,kCACV,EACD,CACE,KAAM,kBACN,YAAa,cACb,QAAS,qCACV,EACD,CACE,KAAM,aACN,YAAa,aACb,QAAS,wBACV,CACF,EACD,uBAAwB,CACtB,CACE,KAAM,aACN,YAAa,OACb,QAAS,wBACV,EACD,CACE,KAAM,YACN,YAAa,WACb,QAAS,4BACV,EACD,CACE,KAAM,YACN,YAAa,aACb,QAAS,mCACV,EACD,CACE,KAAM,WACN,YAAa,uBACb,QAAS,8CACV,EACD,CACE,KAAM,MACN,YAAa,MACb,QAAS,mBACV,EACD,CACE,KAAM,qBACN,YAAa,iBACb,QAAS,wBACV,EACD,CACE,KAAM,YACN,YAAa,cACb,QAAS,uBACV,EACD,CACE,KAAM,UACN,YAAa,SACb,QAAS,wBACV,EACD,CACE,KAAM,OACN,YAAa,QACb,QAAS,6BACV,EACD,CACE,KAAM,WACN,YAAa,cACb,QAAS,yBACV,EACD,CACE,KAAM,iBACN,YAAa,mBACb,QAAS,+BACV,EACD,CACE,KAAM,UACN,YAAa,SACb,QAAS,gCACV,EACD,CACE,KAAM,cACN,YAAa,iBACb,QAAS,gCACV,EACD,CACE,KAAM,kBACN,YAAa,aACb,QAAS,kCACV,EACD,CACE,KAAM,mBACN,YAAa,gBACb,QAAS,uCACV,EACD,CACE,KAAM,OACN,YAAa,eACb,QAAS,oBACV,EACD,CACE,KAAM,UACN,YAAa,SACb,QAAS,iBACV,EACD,CACE,KAAM,YACN,YAAa,SACb,QAAS,yBACV,EACD,CACE,KAAM,gBACN,YAAa,kBACb,QAAS,mCACV,EACD,CACE,KAAM,mBACN,YAAa,oBACb,QAAS,sBACV,EACD,CACE,KAAM,UACN,YAAa,kBACb,QAAS,oCACV,EACD,CACE,KAAM,UACN,YAAa,qBACb,QAAS,4BACV,EACD,CACE,KAAM,QACN,YAAa,iBACb,QAAS,iBACV,EACD,CACE,KAAM,SACN,YAAa,2BACb,QAAS,6BACV,EACD,CACE,KAAM,UACN,YAAa,sBACb,QAAS,yBACV,EACD,CACE,KAAM,OACN,YAAa,iBACb,QAAS,aACV,EACD,CACE,KAAM,SACN,YAAa,eACb,QAAS,gBACV,EACD,CACE,KAAM,QACN,YAAa,mBACb,QAAS,gCACV,EACD,CACE,KAAM,qBACN,YAAa,gBACb,QAAS,0BACV,CACF,EACD,oBAAqB,CACnB,CACE,KAAM,MACN,YAAa,QACb,cAAe,MACf,QAAS,0BACV,EACD,CACE,KAAM,SACN,YAAa,UACb,cAAe,SACf,QAAS,4BACV,EACD,CACE,KAAM,WACN,YAAa,QACb,cAAe,WACf,QAAS,oCACV,EACD,CACE,KAAM,SACN,YAAa,QACb,cAAe,UACf,QAAS,oCACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,SACf,QAAS,2BACV,EACD,CACE,KAAM,OACN,YAAa,sBACb,cAAe,OACf,QAAS,gCACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,OACf,QAAS,wCACV,EACD,CACE,KAAM,WACN,YAAa,YACb,cAAe,aACf,QAAS,mCACV,EACD,CACE,KAAM,WACN,YAAa,aACb,cAAe,WACf,QAAS,iCACV,EACD,CACE,KAAM,QACN,YAAa,sBACb,cAAe,OACf,QAAS,mCACV,EACD,CACE,KAAM,OACN,YAAa,QACb,cAAe,MACf,QAAS,6BACV,EACD,CACE,KAAM,QACN,YAAa,QACb,cAAe,SACf,QAAS,0BACV,EACD,CACE,KAAM,SACN,YAAa,QACb,cAAe,UACf,QAAS,mCACV,EACD,CACE,KAAM,WACN,YAAa,WACb,cAAe,aACf,QAAS,yCACV,EACD,CACE,KAAM,UACN,YAAa,UACb,cAAe,UACf,QAAS,mCACV,EACD,CACE,KAAM,QACN,YAAa,QACb,cAAe,OACf,QAAS,kCACV,EACD,CACE,KAAM,SACN,YAAa,SACb,cAAe,SACf,QAAS,6BACV,EACD,CACE,KAAM,MACN,YAAa,gBACb,cAAe,MACf,QAAS,8BACV,EACD,CACE,KAAM,WACN,YAAa,WACb,cAAe,WACf,QAAS,8BACV,EACD,CACE,KAAM,OACN,YAAa,QACb,cAAe,OACf,QAAS,0BACV,EACD,CACE,KAAM,UACN,YAAa,UACb,cAAe,WACf,QAAS,yBACV,EACD,CACE,KAAM,aACN,YAAa,UACb,cAAe,cACf,QAAS,2CACV,EACD,CACE,KAAM,WACN,YAAa,UACb,cAAe,YACf,QAAS,gCACV,EACD,CACE,KAAM,aACN,YAAa,aACb,cAAe,YACf,QAAS,8BACV,EACD,CACE,KAAM,QACN,YAAa,WACb,cAAe,OACf,QAAS,+BACV,CACF,EACD,iBAAkB,CAChB,CACE,KAAM,QACN,YAAa,SACb,cAAe,OACf,QAAS,oCACV,EACD,CACE,KAAM,QACN,YAAa,QACb,cAAe,OACf,QAAS,6CACV,EACD,CACE,KAAM,OACN,YAAa,QACb,cAAe,OACf,QAAS,oCACV,EACD,CACE,KAAM,OACN,YAAa,gBACb,cAAe,OACf,QAAS,6BACV,EACD,CACE,KAAM,MACN,YAAa,WACb,cAAe,MACf,QAAS,sCACV,EACD,CACE,KAAM,OACN,YAAa,QACb,cAAe,OACf,QAAS,qCACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,QACf,QAAS,0CACV,EACD,CACE,KAAM,SACN,YAAa,SACb,cAAe,UACf,QAAS,sCACV,EACD,CACE,KAAM,SACN,YAAa,eACb,cAAe,WACf,QAAS,qCACV,EACD,CACE,KAAM,SACN,YAAa,aACb,cAAe,WACf,QAAS,0CACV,EACD,CACE,KAAM,OACN,YAAa,UACb,cAAe,OACf,QAAS,6CACV,EACD,CACE,KAAM,QACN,YAAa,aACb,cAAe,QACf,QAAS,gDACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,OACf,QAAS,mCACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,OACf,QAAS,2BACV,EACD,CACE,KAAM,OACN,YAAa,SACb,cAAe,OACf,QAAS,yCACV,EACD,CACE,KAAM,OACN,YAAa,SACb,cAAe,OACf,QAAS,uCACV,EACD,CACE,KAAM,SACN,YAAa,aACb,cAAe,WACf,QAAS,gDACV,EACD,CACE,KAAM,SACN,YAAa,WACb,cAAe,QACf,QAAS,oCACV,EACD,CACE,KAAM,QACN,YAAa,YACb,cAAe,UACf,QAAS,uCACV,EACD,CACE,KAAM,OACN,YAAa,uBACb,cAAe,OACf,QAAS,gCACV,EACD,CACE,KAAM,OACN,YAAa,qBACb,cAAe,OACf,QAAS,mCACV,EACD,CACE,KAAM,UACN,YAAa,cACb,cAAe,aACf,QAAS,yCACV,EACD,CACE,KAAM,QACN,YAAa,cACb,cAAe,YACf,QAAS,6CACV,EACD,CACE,KAAM,OACN,YAAa,oBACb,cAAe,OACf,QAAS,uCACV,EACD,CACE,KAAM,OACN,YAAa,sBACb,cAAe,OACf,QAAS,oCACV,EACD,CACE,KAAM,WACN,YAAa,WACb,cAAe,cACf,QAAS,+CACV,EACD,CACE,KAAM,QACN,YAAa,WACb,cAAe,OACf,QAAS,kCACV,EACD,CACE,KAAM,OACN,YAAa,MACb,cAAe,OACf,QAAS,+BACV,EACD,CACE,KAAM,UACN,YAAa,UACb,cAAe,UACf,QAAS,oDACV,CACF,EACD,uBAAwB,CACtB,CACE,KAAM,SACN,YAAa,OACb,cAAe,SACf,QAAS,wBACV,EACD,CACE,KAAM,MACN,YAAa,OACb,cAAe,MACf,QAAS,qBACV,EACD,CACE,KAAM,SACN,YAAa,SACb,cAAe,UACf,QAAS,wBACV,EACD,CACE,KAAM,MACN,YAAa,OACb,cAAe,MACf,QAAS,qBACV,EACD,CACE,KAAM,UACN,YAAa,SACb,cAAe,YACf,QAAS,yBACV,EACD,CACE,KAAM,MACN,YAAa,MACb,cAAe,MACf,QAAS,wBACV,EACD,CACE,KAAM,WACN,YAAa,QACb,cAAe,UACf,QAAS,gCACV,EACD,CACE,KAAM,UACN,YAAa,OACb,cAAe,UACf,QAAS,0BACV,EACD,CACE,KAAM,SACN,YAAa,SACb,cAAe,UACf,QAAS,yBACV,EACD,CACE,KAAM,UACN,YAAa,UACb,cAAe,WACf,QAAS,4BACV,EACD,CACE,KAAM,OACN,YAAa,UACb,cAAe,OACf,QAAS,0BACV,EACD,CACE,KAAM,QACN,YAAa,SACb,cAAe,SACf,QAAS,6BACV,EACD,CACE,KAAM,WACN,YAAa,OACb,cAAe,YACf,QAAS,yBACV,EACD,CACE,KAAM,cACN,YAAa,SACb,cAAe,cACf,QAAS,uBACV,EACD,CACE,KAAM,cACN,YAAa,SACb,cAAe,gBACf,QAAS,qCACV,EACD,CACE,KAAM,eACN,YAAa,kBACb,cAAe,iBACf,QAAS,wCACV,EACD,CACE,KAAM,OACN,YAAa,QACb,cAAe,OACf,QAAS,0BACV,EACD,CACE,KAAM,QACN,YAAa,SACb,cAAe,SACf,QAAS,2BACV,EACD,CACE,KAAM,SACN,YAAa,2BACb,cAAe,SACf,QAAS,gCACV,EACD,CACE,KAAM,QACN,YAAa,aACb,cAAe,OACf,QAAS,4BACV,EACD,CACE,KAAM,SACN,YAAa,YACb,cAAe,UACf,QAAS,qCACV,EACD,CACE,KAAM,UACN,YAAa,iCACb,cAAe,WACf,QAAS,mCACV,EACD,CACE,KAAM,gBACN,YAAa,kBACb,cAAe,gBACf,QAAS,uCACV,EACD,CACE,KAAM,gBACN,YAAa,iBACb,cAAe,iBACf,QAAS,iCACV,EACD,CACE,KAAM,iBACN,YAAa,iBACb,cAAe,iBACf,QAAS,oCACV,EACD,CACE,KAAM,gBACN,YAAa,oBACb,cAAe,iBACf,QAAS,+BACV,EACD,CACE,KAAM,aACN,YAAa,SACb,cAAe,cACf,QAAS,kCACV,EACD,CACE,KAAM,aACN,YAAa,SACb,cAAe,eACf,QAAS,kCACV,EACD,CACE,KAAM,aACN,YAAa,iBACb,cAAe,eACf,QAAS,+BACV,EACD,CACE,KAAM,cACN,YAAa,gBACb,cAAe,eACf,QAAS,uCACV,EACD,CACE,KAAM,SACN,YAAa,0BACb,cAAe,UACf,QAAS,aACV,EACD,CACE,KAAM,oBACN,YAAa,cACb,cAAe,oBACf,QAAS,0BACV,EACD,CACE,KAAM,UACN,YAAa,sBACb,cAAe,SACf,QAAS,mCACV,EACD,CACE,KAAM,UACN,YAAa,uBACb,cAAe,YACf,QAAS,6BACV,EACD,CACE,KAAM,WACN,YAAa,yBACb,cAAe,WACf,QAAS,iBACV,EACD,CACE,KAAM,UACN,YAAa,oBACb,cAAe,UACf,QAAS,wBACV,EACD,CACE,KAAM,UACN,YAAa,sBACb,cAAe,WACf,QAAS,4BACV,EACD,CACE,KAAM,SACN,YAAa,mBACb,cAAe,QACf,QAAS,oCACV,EACD,CACE,KAAM,SACN,YAAa,YACb,cAAe,YACf,QAAS,6BACV,EACD,CACE,KAAM,UACN,YAAa,WACb,cAAe,YACf,QAAS,4BACV,EACD,CACE,KAAM,aACN,YAAa,qBACb,cAAe,cACf,QAAS,sCACV,EACD,CACE,KAAM,QACN,YAAa,WACb,cAAe,QACf,QAAS,yBACV,EACD,CACE,KAAM,aACN,YAAa,kBACb,cAAe,YACf,QAAS,oCACV,EACD,CACE,KAAM,UACN,YAAa,gBACb,cAAe,WACf,QAAS,gDACV,EACD,CACE,KAAM,cACN,YAAa,WACb,cAAe,gBACf,QAAS,oCACV,EACD,CACE,KAAM,iBACN,YAAa,mBACb,cAAe,gBACf,QAAS,mCACV,EACD,CACE,KAAM,eACN,YAAa,kBACb,cAAe,eACf,QAAS,qCACV,EACD,CACE,KAAM,aACN,YAAa,YACb,cAAe,cACf,QAAS,uCACV,EACD,CACE,KAAM,QACN,YAAa,aACb,cAAe,OACf,QAAS,6BACV,EACD,CACE,KAAM,WACN,YAAa,uBACb,cAAe,UACf,QAAS,yCACV,EACD,CACE,KAAM,WACN,YAAa,YACb,cAAe,WACf,QAAS,0BACV,EACD,CACE,KAAM,WACN,YAAa,yBACb,cAAe,WACf,QAAS,uCACV,EACD,CACE,KAAM,YACN,YAAa,aACb,cAAe,eACf,QAAS,oCACV,EACD,CACE,KAAM,mBACN,YAAa,gBACb,cAAe,mBACf,QAAS,0CACV,EACD,CACE,KAAM,iBACN,YAAa,uBACb,cAAe,qBACf,QAAS,6CACV,EACD,CACE,KAAM,WACN,YAAa,iBACb,cAAe,WACf,QAAS,2BACV,EACD,CACE,KAAM,eACN,YAAa,WACb,cAAe,eACf,QAAS,0BACV,EACD,CACE,KAAM,WACN,YAAa,OACb,cAAe,YACf,QAAS,uBACV,EACD,CACE,KAAM,SACN,YAAa,SACb,cAAe,UACf,QAAS,+BACV,CACF,EACD,uBAAwB,CACtB,CACE,KAAM,cACN,YAAa,WACb,cAAe,cACf,QAAS,yCACV,EACD,CACE,KAAM,UACN,YAAa,UACb,cAAe,WACf,QAAS,iCACV,EACD,CACE,KAAM,UACN,YAAa,QACb,cAAe,UACf,QAAS,sCACV,EACD,CACE,KAAM,WACN,YAAa,gBACb,cAAe,YACf,QAAS,wCACV,EACD,CACE,KAAM,UACN,YAAa,aACb,cAAe,WACf,QAAS,wBACV,EACD,CACE,KAAM,WACN,YAAa,UACb,cAAe,YACf,QAAS,2CACV,EACD,CACE,KAAM,UACN,YAAa,SACb,cAAe,WACf,QAAS,sCACV,EACD,CACE,KAAM,cACN,YAAa,gBACb,cAAe,aACf,QAAS,kCACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,SACf,QAAS,0CACV,EACD,CACE,KAAM,eACN,YAAa,SACb,cAAe,iBACf,QAAS,oCACV,EAGD,CACE,KAAM,OACN,YAAa,QACb,cAAe,SACf,QAAS,+BACV,EACD,CACE,KAAM,QACN,YAAa,gBACb,cAAe,QACf,QAAS,4CACV,EACD,CACE,KAAM,WACN,YAAa,SACb,cAAe,YACf,QAAS,uCACV,EACD,CACE,KAAM,eACN,YAAa,oBACb,cAAe,gBACf,QAAS,wCACV,EACD,CACE,KAAM,MACN,YAAa,QACb,cAAe,MACf,QAAS,uBACV,EACD,CACE,KAAM,WACN,YAAa,iBACb,cAAe,YACf,QAAS,iCACV,EACD,CACE,KAAM,SACN,YAAa,wBACb,cAAe,UACf,QAAS,wCACV,EACD,CACE,KAAM,UACN,YAAa,QACb,cAAe,UACf,QAAS,gDACV,EACD,CACE,KAAM,mBACN,YAAa,gBACb,cAAe,iBACf,QAAS,oDACV,EACD,CACE,KAAM,OACN,YAAa,iBACb,cAAe,OACf,QAAS,+BACV,EACD,CACE,KAAM,QACN,YAAa,UACb,cAAe,QACf,QAAS,mCACV,EACD,CACE,KAAM,YACN,YAAa,kBACb,cAAe,WACf,QAAS,kCACV,EACD,CACE,KAAM,WACN,YAAa,gBACb,cAAe,WACf,QAAS,kCACV,EACD,CACE,KAAM,aACN,YAAa,mBACb,cAAe,cACf,QAAS,mCACV,EACD,CACE,KAAM,eACN,YAAa,eACb,cAAe,kBACf,QAAS,6BACV,EACD,CACE,KAAM,mBACN,YAAa,gBACb,cAAe,oBACf,QAAS,+BACV,EAGD,CACE,KAAM,SACN,YAAa,cACb,cAAe,QACf,QAAS,6BACV,EACD,CACE,KAAM,eACN,YAAa,4BACb,cAAe,kBACf,QAAS,mCACV,EACD,CACE,KAAM,QACN,YAAa,QACb,cAAe,QACf,QAAS,wBACV,EACD,CACE,KAAM,SACN,YAAa,gBACb,cAAe,SACf,QAAS,6BACV,EACD,CACE,KAAM,OACN,YAAa,UACb,cAAe,QACf,QAAS,yBACV,EACD,CACE,KAAM,YACN,YAAa,iBACb,cAAe,cACf,QAAS,sCACV,EACD,CACE,KAAM,kBACN,YAAa,iBACb,cAAe,iBACf,QAAS,iCACV,EACD,CACE,KAAM,aACN,YAAa,cACb,cAAe,aACf,QAAS,4BACV,EACD,CACE,KAAM,SACN,YAAa,gBACb,cAAe,SACf,QAAS,mCACV,EACD,CACE,KAAM,UACN,YAAa,SACb,cAAe,WACf,QAAS,oCACV,EACD,CACE,KAAM,kBACN,YAAa,cACb,cAAe,kBACf,QAAS,qCACV,EACD,CACE,KAAM,SACN,YAAa,YACb,cAAe,UACf,QAAS,4BACV,EACD,CACE,KAAM,OACN,YAAa,QACb,cAAe,OACf,QAAS,4BACV,EACD,CACE,KAAM,aACN,YAAa,SACb,cAAe,YACf,QAAS,kCACV,EACD,CACE,KAAM,MACN,YAAa,UACb,cAAe,MACf,QAAS,uCACV,EACD,CACE,KAAM,SACN,YAAa,QACb,cAAe,UACf,QAAS,qCACV,EACD,CACE,KAAM,WACN,YAAa,QACb,cAAe,WACf,QAAS,4BACV,EACD,CACE,KAAM,SACN,YAAa,SACb,cAAe,UACf,QAAS,0BACV,EACD,CACE,KAAM,SACN,YAAa,WACb,cAAe,SACf,QAAS,4BACV,EACD,CACE,KAAM,QACN,YAAa,SACb,cAAe,OACf,QAAS,iCACV,EACD,CACE,KAAM,MACN,YAAa,UACb,cAAe,MACf,QAAS,4BACV,EACD,CACE,KAAM,YACN,YAAa,yBACb,cAAe,WACf,QAAS,6BACV,EAGD,CACE,KAAM,gBACN,YAAa,aACb,cAAe,gBACf,QAAS,kCACV,EACD,CACE,KAAM,iBACN,YAAa,gBACb,cAAe,kBACf,QAAS,gCACV,EACD,CACE,KAAM,SACN,YAAa,aACb,cAAe,WACf,QAAS,mCACV,EACD,CACE,KAAM,qBACN,YAAa,iBACb,cAAe,mBACf,QAAS,oCACV,EACD,CACE,KAAM,iBACN,YAAa,eACb,cAAe,kBACf,QAAS,+BACV,EACD,CACE,KAAM,eACN,YAAa,kBACb,cAAe,cACf,QAAS,uCACV,EACD,CACE,KAAM,mBACN,YAAa,mBACb,cAAe,qBACf,QAAS,mCACV,CACF,CACH,ECttCMC,EAAgB,IAAI,IAC1B,IAAIC,GAAsB,GAE1B,SAASC,IAAsC,CACzCD,KACJA,GAAsB,GACtBE,GAAK,UAAU,CAAC,CAAE,KAAAC,KAAW,CAC3BC,GAAqBF,GAAK,QAAQC,CAAI,CAAC,CAC3C,CAAG,EACH,CAEA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"}